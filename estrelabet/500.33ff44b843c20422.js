"use strict";(self.webpackChunkdesktop=self.webpackChunkdesktop||[]).push([[500],{10500:(pn,k,d)=>{d.r(k),d.d(k,{UserInfoModule:()=>b});var m=d(36895),B=d(55028),u=d(7226),_=d(7625),S=d(8929),e=d(94650),T=d(34793),a=d(13313),c=d(24006),J=d(3201),K=d(82889),g=d(32925);function V(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.Oqu(t.orgFileName),e.xp6(2),e.Oqu(t.docType),e.xp6(2),e.Oqu(t.note)}}function H(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",3)(2,"div",4)(3,"div",5),e._UZ(4,"i",6),e.TgZ(5,"span",7),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",8)(9,"div",9)(10,"table",10)(11,"thead")(12,"tr")(13,"td"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,V,7,3,"tr",11),e.qZA()()()()(),e.BQk()),2&i){const t=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,5,"TEXTS.UPLOADED_FILES")),e.xp6(8),e.Oqu(e.lcZ(15,7,"TEXTS.FILE_NAME")),e.xp6(3),e.Oqu(e.lcZ(18,9,"TEXTS.DOCUMENT_TYPE")),e.xp6(3),e.Oqu(e.lcZ(21,11,"TEXTS.NOTE")),e.xp6(3),e.Q6J("ngForOf",t.docList)}}function j(i,n){if(1&i&&e._UZ(0,"field-messages",26),2&i){e.oxw(2);const t=e.MAs(11),o=e.oxw();e.Q6J("maxFileSize",o.maxFileSizeMsg)("field-errors",t.controls.uploadFileModel.controls.fileName.errors)}}function z(i,n){if(1&i&&(e.ynx(0),e.YNc(1,j,1,2,"field-messages",25),e.BQk()),2&i){e.oxw();const t=e.MAs(11);e.xp6(1),e.Q6J("ngIf",t.controls.uploadFileModel.controls.fileName.errors&&t.controls.uploadFileModel.controls.fileName.dirty)}}function W(i,n){1&i&&(e.ynx(0),e.TgZ(1,"div",27),e._UZ(2,"div",28),e.qZA(),e.BQk())}function ee(i,n){1&i&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TEXTS.FILE_UPLOAD_SUCCESSFULL")," "))}const te=function(i){return{param0:i}};function ie(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e._UZ(3,"i",6),e.TgZ(4,"span",7),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",8)(8,"div",12)(9,"div",13)(10,"form",14,15),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(11),r=e.oxw();return e.KtG(r.fileUploadOnSubmit(s))}),e._UZ(12,"document-upload",16),e.YNc(13,z,2,1,"ng-container",1),e.YNc(14,W,3,0,"ng-container",1),e.YNc(15,ee,3,3,"div",17),e.TgZ(16,"div",18)(17,"button",19),e._uU(18),e.ALo(19,"translate"),e.qZA()()()(),e.TgZ(20,"div",13)(21,"ul",20)(22,"li",21)(23,"h4")(24,"i",22),e._uU(25,"info"),e.qZA(),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"li",23)(29,"i",24),e._uU(30,"report_problem"),e.qZA(),e.TgZ(31,"span"),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"li",23)(35,"i",24),e._uU(36,"report_problem"),e.qZA(),e.TgZ(37,"span"),e._uU(38),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"li",23)(41,"i",24),e._uU(42,"report_problem"),e.qZA(),e.TgZ(43,"span"),e._uU(44),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"li",23)(47,"i",24),e._uU(48,"report_problem"),e.qZA(),e.TgZ(49,"span"),e._uU(50),e.ALo(51,"translate"),e.qZA()(),e.TgZ(52,"li",23)(53,"i",24),e._uU(54,"report_problem"),e.qZA(),e.TgZ(55,"span"),e._uU(56),e.ALo(57,"translate"),e.qZA()()()()()()()}if(2&i){const t=e.MAs(11),o=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,13,"TEXTS.FILE_UPLOAD")),e.xp6(7),e.Q6J("uploadInProgress",o.inProgress),e.xp6(1),e.Q6J("ngIf",t.controls.uploadFileModel),e.xp6(1),e.Q6J("ngIf",o.inProgress),e.xp6(1),e.Q6J("ngIf",o.successUpload),e.xp6(2),e.Q6J("disabled",!t.form.valid||o.inProgress),e.xp6(1),e.Oqu(e.lcZ(19,15,"TEXTS.FILE_UPLOAD")),e.xp6(8),e.Oqu(e.lcZ(27,17,"TEXTS.INFORMATION")),e.xp6(6),e.Oqu(e.lcZ(33,19,"MESSAGES.VERIFICATION_INFO_FOR_KYC_CHECK")),e.xp6(6),e.Oqu(e.lcZ(39,21,"TEXTS.MAXIMUM_UPLOAD_SIZE")),e.xp6(6),e.Oqu(e.lcZ(45,23,"TEXTS.FILE_TYPE_INFORMATION")),e.xp6(6),e.Oqu(e.xi3(51,25,"TEXTS.FILE_SIZE_INFORMATION",e.VKq(30,te,""+o.maxFileSize))),e.xp6(6),e.Oqu(e.lcZ(57,28,"TEXTS.DOCUMENTS_CANT_EDIT"))}}u.N.map.documents;class x{constructor(n,t,o,s){this.activatedRoute=n,this.userService=t,this.documentsService=o,this.traderService=s,this.maxFileSize=0,this.successUpload=!1,this.documentUploadCountLimit=5,this.showUploadDocumentForm=!1,this.submitClicked=!1,this.destroyed$=new S.xQ}ngOnInit(){this.docList=this.activatedRoute.snapshot.data.docList,this.maxFileSize=this.traderService.trader.ftpMFS/1048576,this.maxFileSize=parseFloat(this.maxFileSize).toFixed(2),this.maxFileSizeMsg=this.traderService.trader.ftpMFS/1024,this.showUploadDocumentForm=this.docList.length<this.documentUploadCountLimit,this.documentsService.kycDocumentsStore$.pipe((0,_.R)(this.destroyed$)).subscribe(n=>{n.data&&(this.docList=n.data,this.showUploadDocumentForm=this.docList.length<this.documentUploadCountLimit),this.inProgress=n.loading,this.submitClicked=n.loading,this.successUpload=n.success})}fileUploadOnSubmit(n){this.submitClicked=!0,this.successUpload=!1,this.inProgress=!0;const t=n.value.uploadFileModel.pepOrHio;if(!n.valid)return;const o={requestBody:n.value.uploadFileModel};this.userService.kycUploadFile(o).then(s=>{this.documentsService.getDocList_v2(),n.reset(),n.controls.uploadFileModel.controls.pepOrHio.setValue(t)}).catch(s=>{this.inProgress=!1})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.documentsService.clearKycDocuments$.next()}}x.\u0275fac=function(n){return new(n||x)(e.Y36(T.gz),e.Y36(a.Ye3),e.Y36(a.SeI),e.Y36(a._W6))},x.\u0275cmp=e.Xpm({type:x,selectors:[["app-documents"]],decls:3,vars:2,consts:[[1,"dcmnt-cntnt"],[4,"ngIf"],["class","dshbrd-mdl",4,"ngIf"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"fa","fa-cloud-upload"],[1,"inf-title"],[1,"mdl-cntnt"],[1,"uploaded-files"],[1,"striped"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","s12"],[3,"ngSubmit"],["fileUploadF","ngForm"],[3,"uploadInProgress"],["class","card-panel  message-box success animated fadeInDown",4,"ngIf"],[1,"input-field","clear"],[1,"btn","file-upload-btn","right",3,"disabled"],[1,"collection","with-header","modal-sidebar"],[1,"collection-header"],[1,"material-icons","info-icon"],[1,"collection-item"],[1,"material-icons","report-icon"],[3,"maxFileSize","field-errors",4,"ngIf"],[3,"maxFileSize","field-errors"],[1,"progress"],[1,"indeterminate"],[1,"card-panel","message-box","success","animated","fadeInDown"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,H,24,13,"ng-container",1),e.YNc(2,ie,58,32,"div",2),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",t.docList&&t.docList.length),e.xp6(1),e.Q6J("ngIf",t.showUploadDocumentForm))},dependencies:[m.sg,m.O5,c._Y,c.JL,c.F,J.Y,K.x,g.X$],encapsulation:2});var Q=d(73548),ne=d(93307);function oe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"input",37),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setSecurityType("sms"))}),e.qZA(),e.TgZ(2,"label",38),e._uU(3,"SMS"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked","sms"===t.selectedSecurityType)}}function se(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",30)(1,"h5",31),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",32)(5,"div",33)(6,"input",34),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setSecurityType("GA"))}),e.qZA(),e.TgZ(7,"label",35),e._uU(8,"Google Authenticator"),e.qZA()(),e.YNc(9,oe,4,1,"div",36),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"TEXTS.VERIFIED_TYPE")),e.xp6(4),e.Q6J("checked","GA"===t.selectedSecurityType),e.xp6(3),e.Q6J("ngIf","agclub7"!==t.traderName&&t.traderDefaults.otpSms)}}function re(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",39)(1,"button",40),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.resendMailGaInformation())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",40),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.disableOneTimePasswordSystem())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.formBusy),e.xp6(1),e.Oqu(e.lcZ(3,4,"FIELDS.SEND_RESET_LINK")),e.xp6(2),e.Q6J("disabled",t.formBusy||t.traderDefaults.reject2FADisableByUser),e.xp6(1),e.hij("GA-",e.lcZ(6,6,"TEXTS.DISABLE_TWO_STEP_VERIFICATION"),"")}}function ae(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",41),e._UZ(1,"app-static-inner-content",42),e.TgZ(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div")(6,"ol")(7,"li",43)(8,"div"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",44)(12,"a",45),e._UZ(13,"img",46),e.qZA(),e.TgZ(14,"a",47),e._UZ(15,"img",48),e.qZA()()(),e.TgZ(16,"li",43),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"li",43),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"li",43),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"li",43),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"li",43),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"li",43),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",49)(35,"input",50),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.agreeGA=s)}),e.qZA(),e.TgZ(36,"label",51),e._UZ(37,"span",52),e._uU(38),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"div",53)(41,"button",54),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setOtpToGA(!1))}),e._uU(42),e.ALo(43,"translate"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,12,"TEXTS.otp-desc1")," "),e.xp6(6),e.Oqu(e.lcZ(10,14,"TEXTS.otp-desc2")),e.xp6(8),e.Oqu(e.lcZ(18,16,"TEXTS.otp-desc3")),e.xp6(3),e.Oqu(e.lcZ(21,18,"TEXTS.otp-desc4")),e.xp6(3),e.Oqu(e.lcZ(24,20,"TEXTS.otp-desc5")),e.xp6(3),e.Oqu(e.lcZ(27,22,"TEXTS.otp-desc6")),e.xp6(3),e.Oqu(e.lcZ(30,24,"TEXTS.otp-desc7")),e.xp6(3),e.Oqu(e.lcZ(33,26,"TEXTS.otp-desc8")),e.xp6(3),e.Q6J("ngModel",t.agreeGA),e.xp6(3),e.hij(" ",e.lcZ(39,28,"MESSAGES.GA_ACTIVATION_APPROVAL")," "),e.xp6(3),e.Q6J("disabled",!t.agreeGA),e.xp6(1),e.Oqu(e.lcZ(43,30,"LINKS.YES_I_DO"))}}function ce(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div")(6,"ol")(7,"li",43),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"li",43),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"li",43),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"li",43),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"li",43),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"li",43),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"li",43),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"li",43),e._uU(29),e.ALo(30,"translate"),e.qZA()()(),e.TgZ(31,"div",53)(32,"button",57),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setOtpToSms(!1))}),e._uU(33),e.ALo(34,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,11,"TEXTS.sms-desc1")," "),e.xp6(5),e.Oqu(e.lcZ(9,13,"TEXTS.sms-desc2")),e.xp6(3),e.Oqu(e.lcZ(12,15,"TEXTS.sms-desc3")),e.xp6(3),e.Oqu(e.lcZ(15,17,"TEXTS.sms-desc4")),e.xp6(3),e.Oqu(e.lcZ(18,19,"TEXTS.sms-desc5")),e.xp6(3),e.Oqu(e.lcZ(21,21,"TEXTS.sms-desc6")),e.xp6(3),e.Oqu(e.lcZ(24,23,"TEXTS.sms-desc7")),e.xp6(3),e.Oqu(e.lcZ(27,25,"TEXTS.sms-desc8")),e.xp6(3),e.Oqu(e.lcZ(30,27,"TEXTS.sms-desc9")),e.xp6(3),e.Q6J("disabled",t.formBusy),e.xp6(1),e.Oqu(e.lcZ(34,29,"LINKS.YES_I_DO"))}}function le(i,n){1&i&&(e.TgZ(0,"div",55)(1,"div",56)(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA()()()),2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"TEXTS.SMS_SECURITY_IS_ACTIVATED")," "))}const _e=function(i){return{disabled:i}},de=function(i){return{"fa-spin":i}};u.N.map.userSecurity;class C{constructor(n,t,o,s,r,l,p,h){this.userSecurityService=n,this.route=t,this.userService=o,this.traderService=s,this.translate=r,this.toastFactory=l,this.router=p,this.translateFactory=h,this.selectedSecurityType=null,this.smsRemaningTime=0,this.smsCodeF={},this.formBusy=!1,this.agreeGA=!1,this.logout=!1,this.destroyed$=new S.xQ,this.smsModal=new e.vpe,this.gaModal=new e.vpe,this.smsModalParams=[{dismissible:!0,complete:function(){console.info("smsModal Closed")}}],this.gaModalParams=[{dismissible:!0,complete:function(){console.info("gaModal Closed")}}]}ngOnInit(){if(this.customerOneTimePasswordSettings=this.route.snapshot.data.customerOneTimePasswordSettings,"1"===this.customerOneTimePasswordSettings.otpActive&&(this.activeSecurityType=this.customerOneTimePasswordSettings.otpType,this.selectedSecurityType=this.customerOneTimePasswordSettings.otpType),this.traderName=u.N.trader.name,this.traderDefaults=this.traderService.trader,this.traderDefaults.hideTwoStepVerification){const n=this.translateFactory.currentLang.code;this.router.navigate([n,"dashboard","user-info","personal-and-account-detail"])}else this.userSecurityService.setOtpToGaStore$.pipe((0,_.R)(this.destroyed$)).subscribe(n=>{(n.data||n.success)&&this.openGaModal(),this.formBusy=n.loading}),this.userSecurityService.disableOneTimePasswordSystemStore$.pipe((0,_.R)(this.destroyed$)).subscribe(n=>{(n.data||n.success)&&(this.activeSecurityType=null,this.selectedSecurityType=null),this.formBusy=n.loading}),this.userSecurityService.resendMailGaInformationStore$.pipe((0,_.R)(this.destroyed$)).subscribe(n=>{this.formBusy=n.loading}),this.userSecurityService.setOtpToSmsStore$.pipe((0,_.R)(this.destroyed$)).subscribe(n=>{(n.data||n.success)&&(this.smsRemaningTime=n.data,this.openSmsModal(!1,!0)),this.formBusy=n.loading}),this.userSecurityService.checkSmsForSetOtpStore$.pipe((0,_.R)(this.destroyed$)).subscribe(n=>{(n.data||n.success)&&(this.smsModal.emit({action:"modal",params:["close"]}),this.activeSecurityType="SMS"),n.error&&"SMS_CODE_TIMED_OUT"===n.error.responseCodes[0].responseKey&&this.openSmsModal(),this.formBusy=n.loading}),this.userSecurityService.checkGaForSetOtpStore$.pipe((0,_.R)(this.destroyed$)).subscribe(n=>{(n.data||n.success)&&(this.gaModal.emit({action:"modal",params:["close"]}),this.activeSecurityType="GA"),n.error&&"INVALID_OTP_PASSWORD"===n.error.responseCodes[0].responseKey&&this.openGaModal(),this.formBusy=n.loading})}setSecurityType(n){this.selectedSecurityType=n}setOtpToGA(n){let t=new a.qPv;t.requestBody="",this.userSecurityService.setOtpToGa(t)}disableOneTimePasswordSystem(){let n=new a.qPv;n.requestBody="",this.userSecurityService.disableOneTimePasswordSystem(n)}resendMailGaInformation(){this.userSecurityService.resendMailGaInformation()}setOtpToSms(n){let t=new a.qPv;t.requestBody="",n||this.smsRemaningTime<=0?this.userSecurityService.setOtpToSms(t):this.openSmsModal(!0,!1)}openSmsModal(n,t){let o=this;o.smsModal.emit({action:"modal",params:["open"]}),(!n||t)&&function s(){clearInterval(o.smsRemaningTime),void 0===typeof o.smsRemaningTime&&(o.smsRemaningTime=60),o.smsTimer=setInterval(function(){o.smsRemaningTime<=1&&(clearInterval(o.smsRemaningTime),o.smsRemaningTime=1),o.smsRemaningTime-=1},1e3)}()}openGaModal(){this.gaModal.emit({action:"modal",params:["open"]})}checkSmsForSetOtp(n){let t=new a.qPv;t.requestBody=n.value,t.requestBody.username=this.userService.user.username,this.userSecurityService.checkSmsForSetOtp(t)}checkGaForSetOtp(n){let t=new a.qPv;t.requestBody=n.value,t.requestBody.username=this.userService.user.username,this.userSecurityService.checkGaForSetOtp(t)}ngOnDestroy(){this.logout&&this.userService.logout(),this.destroyed$.next(!0),this.destroyed$.complete(),this.userSecurityService.clearSetOtpToGa$.next(),this.userSecurityService.clearDisableOneTimePasswordSystem$.next(),this.userSecurityService.clearResendMailGaInformation$.next(),this.userSecurityService.clearSetOtpToSms$.next(),this.userSecurityService.clearCheckSmsForSetOtp$.next(),this.userSecurityService.clearCheckGaForSetOtp$.next()}}function me(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"input",17),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.value=s)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.s9C("name",t.customerAttributeCode),e.Q6J("ngModel",t.value)}}function ue(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"input",18),e.NdJ("change",function(){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.value=!s.value)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.s9C("name",t.customerAttributeCode),e.Q6J("ngModel",!t.value)}}function pe(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"uppercase"),e.TgZ(4,"div",13)(5,"label"),e._uU(6),e.ALo(7,"translate"),e.YNc(8,me,1,2,"input",14),e.YNc(9,ue,1,2,"input",15),e._UZ(10,"span",16),e._uU(11),e.ALo(12,"translate"),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,5,e.lcZ(3,7,"TEXTS."+t.customerAttributeCode))," "),e.xp6(5),e.hij(" ",e.lcZ(7,9,"TEXTS.OFF")," "),e.xp6(2),e.Q6J("ngIf","transaction_sms_notification_disable"!==t.customerAttributeCode),e.xp6(1),e.Q6J("ngIf","transaction_sms_notification_disable"===t.customerAttributeCode),e.xp6(2),e.hij(" ",e.lcZ(12,11,"TEXTS.ON")," ")}}function ge(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"i",5),e._uU(4,"supervisor_account"),e.qZA(),e.TgZ(5,"span",6),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",7)(9,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.changeCustomerSettings())}),e.YNc(11,pe,13,13,"div",10),e.TgZ(12,"div",11)(13,"button",12),e._uU(14),e.ALo(15,"translate"),e.qZA()()()()()}if(2&i){const t=e.MAs(10),o=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,4,"LINKS.NOTIFICATION_AND_SETTINGS")),e.xp6(5),e.Q6J("ngForOf",o.userSettings),e.xp6(2),e.Q6J("disabled",!t.dirty||o.formBusy),e.xp6(1),e.Oqu(e.lcZ(15,6,"LINKS.SAVE"))}}function fe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"i",5),e._uU(4,"supervisor_account"),e.qZA(),e.TgZ(5,"span",6),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",7)(9,"form",8,19),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(10),r=e.oxw();return e.KtG(r.changeCustomerPromotions(s))}),e._uU(11),e.ALo(12,"translate"),e.TgZ(13,"div",13)(14,"label"),e._uU(15),e.ALo(16,"translate"),e.TgZ(17,"input",20),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.customerPromotions.emailPromotions=s)}),e.qZA(),e._UZ(18,"span",16),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e._uU(21),e.ALo(22,"translate"),e.TgZ(23,"div",13)(24,"label"),e._uU(25),e.ALo(26,"translate"),e.TgZ(27,"input",21),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.customerPromotions.smsPromotions=s)}),e.qZA(),e._UZ(28,"span",16),e._uU(29),e.ALo(30,"translate"),e.qZA()(),e._uU(31),e.ALo(32,"translate"),e.TgZ(33,"div",13)(34,"label"),e._uU(35),e.ALo(36,"translate"),e.TgZ(37,"input",22),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.customerPromotions.postPromotions=s)}),e.qZA(),e._UZ(38,"span",16),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e._uU(41),e.ALo(42,"translate"),e.TgZ(43,"div",13)(44,"label"),e._uU(45),e.ALo(46,"translate"),e.TgZ(47,"input",23),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.customerPromotions.phonePromotions=s)}),e.qZA(),e._UZ(48,"span",16),e._uU(49),e.ALo(50,"translate"),e.qZA()(),e._uU(51),e.ALo(52,"translate"),e.TgZ(53,"div",13)(54,"label"),e._uU(55),e.ALo(56,"translate"),e.TgZ(57,"input",24),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.customerPromotions.thirdPartyPromotions=s)}),e.qZA(),e._UZ(58,"span",16),e._uU(59),e.ALo(60,"translate"),e.qZA()(),e._uU(61),e.ALo(62,"translate"),e.TgZ(63,"div",13)(64,"label"),e._uU(65),e.ALo(66,"translate"),e.TgZ(67,"input",25),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.customerPromotions.inSiteMessageNotifications=s)}),e.qZA(),e._UZ(68,"span",16),e._uU(69),e.ALo(70,"translate"),e.qZA()(),e.TgZ(71,"div",11)(72,"button",12),e._uU(73),e.ALo(74,"translate"),e.qZA()()()()()}if(2&i){const t=e.MAs(10),o=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,27,"LINKS.COMMUNICATION_PREFERENCES")),e.xp6(5),e.hij(" ",e.lcZ(12,29,"TEXTS.EMAIL_PROMOTION_OPTIONS")," "),e.xp6(4),e.hij(" ",e.lcZ(16,31,"TEXTS.OFF")," "),e.xp6(2),e.Q6J("ngModel",o.customerPromotions.emailPromotions),e.xp6(2),e.hij(" ",e.lcZ(20,33,"TEXTS.ON")," "),e.xp6(2),e.hij(" ",e.lcZ(22,35,"TEXTS.SMS_PROMOTION_OPTIONS")," "),e.xp6(4),e.hij(" ",e.lcZ(26,37,"TEXTS.OFF")," "),e.xp6(2),e.Q6J("ngModel",o.customerPromotions.smsPromotions),e.xp6(2),e.hij(" ",e.lcZ(30,39,"TEXTS.ON")," "),e.xp6(2),e.hij(" ",e.lcZ(32,41,"TEXTS.POST_PROMOTION_OPTIONS")," "),e.xp6(4),e.hij(" ",e.lcZ(36,43,"TEXTS.OFF")," "),e.xp6(2),e.Q6J("ngModel",o.customerPromotions.postPromotions),e.xp6(2),e.hij(" ",e.lcZ(40,45,"TEXTS.ON")," "),e.xp6(2),e.hij(" ",e.lcZ(42,47,"TEXTS.PHONE_PROMOTION_OPTIONS")," "),e.xp6(4),e.hij(" ",e.lcZ(46,49,"TEXTS.OFF")," "),e.xp6(2),e.Q6J("ngModel",o.customerPromotions.phonePromotions),e.xp6(2),e.hij(" ",e.lcZ(50,51,"TEXTS.ON")," "),e.xp6(2),e.hij(" ",e.lcZ(52,53,"TEXTS.THIRD_PARTY_PROMOTION_OPTIONS")," "),e.xp6(4),e.hij(" ",e.lcZ(56,55,"TEXTS.OFF")," "),e.xp6(2),e.Q6J("ngModel",o.customerPromotions.thirdPartyPromotions),e.xp6(2),e.hij(" ",e.lcZ(60,57,"TEXTS.ON")," "),e.xp6(2),e.hij(" ",e.lcZ(62,59,"TEXTS.IN_SITE_MESSAGE_NOTIFICATIONS")," "),e.xp6(4),e.hij(" ",e.lcZ(66,61,"TEXTS.OFF")," "),e.xp6(2),e.Q6J("ngModel",o.customerPromotions.inSiteMessageNotifications),e.xp6(2),e.hij(" ",e.lcZ(70,63,"TEXTS.ON")," "),e.xp6(3),e.Q6J("disabled",!t.dirty||o.formBusy),e.xp6(1),e.Oqu(e.lcZ(74,65,"LINKS.SAVE"))}}C.\u0275fac=function(n){return new(n||C)(e.Y36(a.svL),e.Y36(T.gz),e.Y36(a.Ye3),e.Y36(a._W6),e.Y36(g.sK),e.Y36(a.Uwl),e.Y36(T.F0),e.Y36(a.chr))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-user-security"]],decls:59,vars:47,consts:[[1,"user-security-cntnt"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"fa","fa-qrcode","fa-fw"],[1,"inf-title"],[1,"mdl-cntnt"],["contentCode","otp_info"],["class","radio-field",4,"ngIf"],["class","actv-scrty-cntn",4,"ngIf"],["class","ga-information-ct",4,"ngIf"],["class","sms-actions",4,"ngIf"],["id","smsModal","materialize","modal",1,"modal","modal-sm","open","dshbrd-modal",3,"materializeActions","materializeParams"],[1,"modal-content"],[1,"modul-accordion"],[1,"modal-close-button"],[1,"fa","fa-times","right"],[1,"modul-content"],[3,"ngSubmit"],["smsCodeF","ngForm"],[1,"input-field"],["id","SmsCode","name","smsCode","type","password","required","","maxlength","6",1,"browser-default",3,"ngModel","placeholder","ngModelChange"],[1,"remaning-time-cntnt"],[1,"remaning-time"],["href","javascript:;",1,"right",3,"ngClass","click"],[1,"fa","fa-refresh","fa-fw",3,"ngClass"],["type","submit",1,"btn",3,"disabled"],["id","gaModal","materialize","modal",1,"modal","modal-sm","open","dshbrd-modal",3,"materializeActions","materializeParams"],["gaCodeF","ngForm"],["id","OtpPassword","name","otpPassword","type","text","required","",1,"browser-default",3,"ngModel","placeholder","ngModelChange"],[1,"radio-field"],[1,"radio-hdr"],[1,"radio-cntnt"],[1,"radio-grp"],["name","twoStepAuthentication","type","radio","id","GA","value","gaValidation",3,"checked","click"],["for","GA"],["class","radio-grp",4,"ngIf"],["name","twoStepAuthentication","type","radio","id","sms","value","smsValidation",3,"checked","click"],["for","sms"],[1,"actv-scrty-cntn"],[1,"btn","primary-color",3,"disabled","click"],[1,"ga-information-ct"],["contentCode","ga-activation-info"],[1,"list-group-item"],[1,"pad10"],["href",'https://geo.itunes.apple.com/us/app/google-authenticator/id388497605?mt=8"',"target","_blank",1,"pad5"],["src","//v3.pronetstatic.com/common/img/apple-logo.png"],["href","https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2","target","_blank",1,"pad5"],["src","//v3.pronetstatic.com/common/img/android-logo.png"],[1,"checkbox-field","mar-left-10"],["type","checkbox","required","","name","agreeGA","id","agreeGA",1,"filled-in",3,"ngModel","ngModelChange"],["for","agreeGA"],[1,"required-icon"],[1,"input-field","clear"],["href","#",1,"btn","right","clear",3,"disabled","click"],[1,"sms-actions"],[1,"sms-information-ct"],[1,"btn","right","clear",3,"disabled","click"]],template:function(n,t){if(1&n){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"i",4),e.TgZ(5,"span",5),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",6),e._UZ(9,"app-static-inner-content",7),e.YNc(10,se,10,5,"div",8),e.YNc(11,re,7,8,"div",9),e.YNc(12,ae,44,32,"div",10),e.YNc(13,ce,35,31,"div",11),e.YNc(14,le,5,3,"div",11),e.qZA()()(),e.TgZ(15,"div",12)(16,"div",13)(17,"div",14)(18,"div",15)(19,"a"),e._UZ(20,"i",16),e.qZA()()(),e.TgZ(21,"div",17)(22,"b"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"form",18,19),e.NdJ("ngSubmit",function(){e.CHM(o);const r=e.MAs(26);return e.KtG(t.checkSmsForSetOtp(r))}),e.TgZ(27,"div",20)(28,"input",21),e.NdJ("ngModelChange",function(r){return t.smsCode=r}),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",22)(31,"span",23),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"a",24),e.NdJ("click",function(){return 0===t.smsRemaningTime&&t.setOtpToSms(!0)}),e._uU(35),e.ALo(36,"translate"),e._UZ(37,"i",25),e.qZA()(),e.TgZ(38,"button",26),e._uU(39),e.ALo(40,"translate"),e.qZA()()()()(),e.TgZ(41,"div",27)(42,"div",13)(43,"div",14)(44,"div",15)(45,"a"),e._UZ(46,"i",16),e.qZA()()(),e.TgZ(47,"div",17)(48,"b"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"form",18,28),e.NdJ("ngSubmit",function(){e.CHM(o);const r=e.MAs(52);return e.KtG(t.checkGaForSetOtp(r))}),e.TgZ(53,"div",20)(54,"input",29),e.NdJ("ngModelChange",function(r){return t.otpPassword=r}),e.ALo(55,"translate"),e.qZA()(),e.TgZ(56,"button",26),e._uU(57),e.ALo(58,"translate"),e.qZA()()()()()}if(2&n){const o=e.MAs(26),s=e.MAs(52);e.xp6(6),e.Oqu(e.lcZ(7,25,"TEXTS.TWO_STEP_VERIFICATION")),e.xp6(4),e.Q6J("ngIf",!t.activeSecurityType),e.xp6(1),e.Q6J("ngIf",!!t.activeSecurityType),e.xp6(1),e.Q6J("ngIf","GA"===t.selectedSecurityType&&!t.activeSecurityType),e.xp6(1),e.Q6J("ngIf","sms"===t.selectedSecurityType&&!t.activeSecurityType),e.xp6(1),e.Q6J("ngIf","sms"===t.selectedSecurityType&&"sms"===t.activeSecurityType),e.xp6(1),e.Q6J("materializeActions",t.smsModal)("materializeParams",t.smsModalParams),e.xp6(8),e.Oqu(e.lcZ(24,27,"TEXTS.TYPE_SMS_PASSWORD_DESC")),e.xp6(5),e.s9C("placeholder",e.lcZ(29,29,"TEXTS.SMS_PASSWORD")),e.Q6J("ngModel",t.smsCode),e.xp6(4),e.AsE(" ",e.lcZ(33,31,"TEXTS.REMANING_TIME"),": ",t.smsRemaningTime," sn. "),e.xp6(2),e.Q6J("ngClass",e.VKq(43,_e,0!==t.smsRemaningTime)),e.xp6(1),e.hij(" ",e.lcZ(36,33,"LINKS.SEND_AGAIN_SMS_PASSWORD")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(45,de,0!==t.smsRemaningTime)),e.xp6(1),e.Q6J("disabled",!o.form.valid||t.formBusy),e.xp6(1),e.Oqu(e.lcZ(40,35,"LINKS.FINISH_TRANSACTION")),e.xp6(2),e.Q6J("materializeActions",t.gaModal)("materializeParams",t.gaModalParams),e.xp6(8),e.Oqu(e.lcZ(50,37,"TEXTS.TYPE_GA_PASSWORD_DESC")),e.xp6(5),e.s9C("placeholder",e.lcZ(55,39,"TEXTS.GA_PASSWORD")),e.Q6J("ngModel",t.otpPassword),e.xp6(2),e.Q6J("disabled",!s.form.valid||t.formBusy),e.xp6(1),e.Oqu(e.lcZ(58,41,"LINKS.FINISH_TRANSACTION"))}},dependencies:[m.mk,m.O5,c._Y,c.Fj,c.Wl,c.JJ,c.JL,c.Q7,c.nD,c.Zs,c.On,c.F,Q.M,ne.n,g.X$],encapsulation:2});u.N.map.userSettings;class Z{constructor(n,t,o,s,r,l){this.userSettingService=n,this.userService=t,this.route=o,this.toastFactory=s,this.translateService=r,this.traderService=l,this.userSettings=[],this.customerPromotions={emailPromotions:null,smsPromotions:null,postPromotions:null,phonePromotions:null,thirdPartyPromotions:null},this.formBusy=!1,this.isOpenCommunicationModule=!0,this.destroyed$=new S.xQ,this.custAttrList=[],this.custPrmSettings={}}ngOnInit(){const n=this.route.snapshot.data.userSettings;n.forEach(t=>{t.value=!!parseInt(t.value)}),this.userSettings=n,this.userInfo=this.userService.user,this.isOpenCommunicationModule=this.traderService.trader.tREO||this.traderService.trader.tRSO,this.customerPromotions.emailPromotions=this.userInfo.emailPromotion,this.customerPromotions.smsPromotions=this.userInfo.smsPromotion,this.customerPromotions.postPromotions=this.userInfo.postPromotion,this.customerPromotions.phonePromotions=this.userInfo.phonePromotion,this.customerPromotions.thirdPartyPromotions=this.userInfo.thirdPartyPromotion,this.customerPromotions.inSiteMessageNotifications=this.userInfo.inSiteMessageNotifications,this.userSettingService.changeCustomerSettingsStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{t.responseCodes&&this.translateService.get("MESSAGES."+t.responseCodes[0].responseKey).pipe((0,_.R)(this.destroyed$)).subscribe(o=>{t.error?this.toastFactory.error(o):(this.userSettingService.customerSettingsUpdated({custAttrList:this.custAttrList}),this.toastFactory.success(o))}),this.formBusy=t.loading}),this.userSettingService.updateCustomerPromotionsStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{t.responseCodes&&this.translateService.get("MESSAGES."+t.responseCodes[0].responseKey).pipe((0,_.R)(this.destroyed$)).subscribe(o=>{t.error?this.toastFactory.error(o):(this.userSettingService.customerPromotionsUpdated(this.custPrmSettings),this.toastFactory.success(o))}),this.formBusy=t.loading})}changeCustomerSettings(){let n=new a.qPv;n.requestBody.custAttrList=[],this.userSettings.forEach(t=>{let o={};o.custAttrTypeID=t.customerAttributeTypeID,o.value=parseInt(t.value?1:0),this.custAttrList.push(o)}),n.requestBody.custAttrList=this.custAttrList,this.userSettingService.changeCustomerSettings(n)}changeCustomerPromotions(n){this.custPrmSettings=n.value;const t=new a.qPv(this.custPrmSettings);this.userSettingService.updateCustomerPromotions(t)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.userSettingService.clearChangeCustomerSettings$.next(),this.userSettingService.clearUpdateCustomerPromotions$.next()}}Z.\u0275fac=function(n){return new(n||Z)(e.Y36(a.m7Y),e.Y36(a.Ye3),e.Y36(T.gz),e.Y36(a.Uwl),e.Y36(g.sK),e.Y36(a._W6))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["app-user-settings"]],decls:3,vars:2,consts:[[1,"accnt-inf-cntnt"],["class","dshbrd-mdl",4,"ngIf"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"material-icons"],[1,"inf-title"],[1,"mdl-cntnt"],[3,"ngSubmit"],["userSettingsF","ngForm"],[4,"ngFor","ngForOf"],[1,"input-field"],["type","submit",1,"btn",3,"disabled"],[1,"switch"],["type","checkbox",3,"name","ngModel","ngModelChange",4,"ngIf"],["type","checkbox",3,"name","ngModel","change",4,"ngIf"],[1,"lever"],["type","checkbox",3,"name","ngModel","ngModelChange"],["type","checkbox",3,"name","ngModel","change"],["customerPromotionsF","ngForm"],["type","checkbox","name","emailPromotions",3,"ngModel","ngModelChange"],["type","checkbox","name","smsPromotions",3,"ngModel","ngModelChange"],["type","checkbox","name","postPromotions",3,"ngModel","ngModelChange"],["type","checkbox","name","phonePromotions",3,"ngModel","ngModelChange"],["type","checkbox","name","thirdPartyPromotions",3,"ngModel","ngModelChange"],["type","checkbox","name","inSiteMessageNotifications",3,"ngModel","ngModelChange"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,ge,16,8,"div",1),e.YNc(2,fe,75,67,"div",1),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",!!t.userSettings.length),e.xp6(1),e.Q6J("ngIf",t.isOpenCommunicationModule))},dependencies:[m.sg,m.O5,c._Y,c.Wl,c.JJ,c.JL,c.On,c.F,m.gd,g.X$],encapsulation:2});var he=d(40190),w=d(77040),P=d(92686),Se=d(56391),F=d(45147),Te=d(75778),xe=d(60287),$=d(67891),D=d(78387),Ae=d(70710);const ve=["dateInput"],Ce=["limitSettingsF"];function Ze(i,n){if(1&i&&(e.TgZ(0,"div",9),e._UZ(1,"message-box",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.s9C("content",t.boxMessage),e.s9C("type",t.boxType)}}const Y=function(i){return{active:i}};function ye(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"li",16)(1,"a",17),e.NdJ("click",function(){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.selectTab(r))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=n.$implicit,o=n.index,s=e.oxw();e.Q6J("ngClass",e.VKq(5,Y,o===s.selectedTab)),e.xp6(1),e.Q6J("ngClass",e.VKq(7,Y,o===s.selectedTab)),e.xp6(1),e.hij(" ",e.lcZ(3,3,"TEXTS."+t[0].groupName)," ")}}function Le(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"csSide"),e.ALo(4,"number"),e.qZA()),2&i){const t=e.oxw(3).$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==t.limitSettings[0].savedValue?e.lcZ(2,1,"TEXTS.NO_LIMITS_APPLIED"):e.xi3(3,3,e.xi3(4,6,t.limitSettings[0].savedValue,"1.2-2"),o.currentCurrency.currencySymbol)," ")}}function Ie(i,n){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.YNc(3,Le,5,9,"span",22),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("",e.lcZ(2,2,"TEXTS.DAILY")," "),e.xp6(2),e.Q6J("ngIf",!!t.limitSettings[0])}}function Ee(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"csSide"),e.ALo(4,"number"),e.qZA()),2&i){const t=e.oxw(3).$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==t.limitSettings[1].savedValue?e.lcZ(2,1,"TEXTS.NO_LIMITS_APPLIED"):e.xi3(3,3,e.xi3(4,6,t.limitSettings[1].savedValue,"1.2-2"),o.currentCurrency.currencySymbol)," ")}}function Me(i,n){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.YNc(3,Ee,5,9,"span",22),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("",e.lcZ(2,2,"TEXTS.WEEKLY")," "),e.xp6(2),e.Q6J("ngIf",!!t.limitSettings[1])}}function qe(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"csSide"),e.ALo(4,"number"),e.qZA()),2&i){const t=e.oxw(3).$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",null==t.limitSettings[2].savedValue?e.lcZ(2,1,"TEXTS.NO_LIMITS_APPLIED"):e.xi3(3,3,e.xi3(4,6,t.limitSettings[2].savedValue,"1.2-2"),o.currentCurrency.currencySymbol)," ")}}function Oe(i,n){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.YNc(3,qe,5,9,"span",22),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("",e.lcZ(2,2,"TEXTS.MONTHLY")," "),e.xp6(2),e.Q6J("ngIf",!!t.limitSettings[2])}}function be(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&i){const t=e.oxw(4).$implicit,o=e.oxw(2);e.xp6(1),e.hij(" ",o.isNumber(t.limitSettings[0].value)?e.xi3(2,1,t.limitSettings[0].value,"dd/MM/YY"):t.limitSettings[0].value," ")}}function Ne(i,n){1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIELDS.INDEFINITE_LIMIT")," "))}function Ue(i,n){if(1&i&&(e.ynx(0),e.YNc(1,be,3,4,"ng-container",22),e.YNc(2,Ne,3,3,"ng-container",22),e.BQk()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngIf",!!t.limitSettings[0].value),e.xp6(1),e.Q6J("ngIf",!!t.limitSettings[1].value)}}function we(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&i){const t=e.oxw(4).$implicit;e.xp6(1),e.AsE(" ",t.limitSettings[0].savedValue," ",e.lcZ(2,2,"TEXTS.MINUTE")," ")}}function Pe(i,n){if(1&i&&(e.ynx(0),e.YNc(1,we,3,4,"ng-container",22),e.BQk()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngIf",!!t.limitSettings[0])}}function Fe(i,n){if(1&i&&(e.TgZ(0,"div",27),e.YNc(1,Ue,3,2,"ng-container",22),e.YNc(2,Pe,2,1,"ng-container",22),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.name===o.SelfLimit.ExcludeYourself),e.xp6(1),e.Q6J("ngIf",t.name!==o.SelfLimit.ExcludeYourself)}}function De(i,n){1&i&&(e.TgZ(0,"div",27),e._uU(1,"-"),e.qZA())}function Je(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Ie,4,4,"div",26),e.YNc(2,Me,4,4,"div",26),e.YNc(3,Oe,4,4,"div",26),e.YNc(4,Fe,3,2,"div",26),e.YNc(5,De,2,0,"div",26),e.BQk()),2&i){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isHasDailyLimit),e.xp6(1),e.Q6J("ngIf",t.isHasWeeklyLimit),e.xp6(1),e.Q6J("ngIf",t.isHasMonthlyLimit),e.xp6(1),e.Q6J("ngIf",t.name===o.SelfLimit.ExcludeYourself||t.isHasMinuteLimit),e.xp6(1),e.Q6J("ngIf",t.isHasSpecificTimeLimit)}}function Qe(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TEXTS.MINUTE")))}function Ye(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,Qe,3,3,"span",22),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.hij("",null==t.limitSettings[0].savedValue?0:t.limitSettings[0].savedValue," "),e.xp6(1),e.Q6J("ngIf",!!t.limitSettings[0].savedValue)}}function Re(i,n){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.YNc(3,Ye,3,2,"span",22),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("",e.lcZ(2,2,"TEXTS.DAILY")," "),e.xp6(2),e.Q6J("ngIf",!!t.limitSettings[0])}}function ke(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TEXTS.MINUTE")))}function $e(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,ke,3,3,"span",22),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.hij("",null==t.limitSettings[1].savedValue?0:t.limitSettings[1].savedValue," "),e.xp6(1),e.Q6J("ngIf",!!t.limitSettings[1].savedValue)}}function Ge(i,n){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.YNc(3,$e,3,2,"span",22),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("",e.lcZ(2,2,"TEXTS.WEEKLY")," "),e.xp6(2),e.Q6J("ngIf",!!t.limitSettings[1])}}function Xe(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TEXTS.MINUTE")))}function Be(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,Xe,3,3,"span",22),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.hij("",null==t.limitSettings[2].savedValue?0:t.limitSettings[2].savedValue," "),e.xp6(1),e.Q6J("ngIf",!!t.limitSettings[2].savedValue)}}function Ke(i,n){if(1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.YNc(3,Be,3,2,"span",22),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("",e.lcZ(2,2,"TEXTS.MONTHLY")," "),e.xp6(2),e.Q6J("ngIf",!!t.limitSettings[2])}}function Ve(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Re,4,4,"div",26),e.YNc(2,Ge,4,4,"div",26),e.YNc(3,Ke,4,4,"div",26),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.isHasDailyLimit),e.xp6(1),e.Q6J("ngIf",t.isHasWeeklyLimit),e.xp6(1),e.Q6J("ngIf",t.isHasMonthlyLimit)}}function He(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.resetLimit(s.name))}),e._UZ(1,"i",29),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",t.formBusy)}}function je(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.resetLimit(s.name))}),e._UZ(1,"i",29),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",t.formBusy)}}function ze(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td",21),e.YNc(5,Je,6,5,"ng-container",22),e.YNc(6,Ve,4,3,"ng-container",22),e.qZA(),e.TgZ(7,"td")(8,"button",23),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.configOnClick(r.name,r.type))}),e._UZ(9,"i",24),e.qZA(),e.YNc(10,He,2,1,"button",25),e.YNc(11,je,2,1,"button",25),e.qZA()()}if(2&i){const t=n.$implicit,o=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,5,"TEXTS."+t.name)),e.xp6(3),e.Q6J("ngIf",!(null!=t&&null!=t.limitSettings[0]&&t.limitSettings[0].hasSpecificMultiTime)),e.xp6(1),e.Q6J("ngIf",null==t||null==t.limitSettings[0]?null:t.limitSettings[0].hasSpecificMultiTime),e.xp6(4),e.Q6J("ngIf",!t.isHasSpecificTimeLimit&&t.name!==o.SelfLimit.ExcludeYourself),e.xp6(1),e.Q6J("ngIf",!t.isHasSpecificTimeLimit&&t.name===o.SelfLimit.ExcludeYourself&&!o.trader.mgaRulesEnabled)}}function We(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",18)(2,"div",19)(3,"table",20)(4,"thead")(5,"tr")(6,"th"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,ze,12,7,"tr",12),e.qZA()()()(),e.BQk()),2&i){const t=n.$implicit,o=n.index,s=e.oxw();e.xp6(1),e.MGl("id","limitTab-",o,""),e.Q6J("ngClass",e.VKq(12,Y,o===s.selectedTab)),e.xp6(6),e.Oqu(e.lcZ(8,6,"TEXTS.LIMIT_TYPE")),e.xp6(3),e.Oqu(e.lcZ(11,8,"TEXTS.AMOUNT")),e.xp6(3),e.Oqu(e.lcZ(14,10,"TEXTS.MANAGE")),e.xp6(3),e.Q6J("ngForOf",t)}}const G=function(i){return{mask:i}};function et(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",57)(1,"label",58,59),e._UZ(3,"i",60)(4,"input",61),e.qZA(),e.TgZ(5,"input",62),e.NdJ("click",function(s){e.CHM(t);const r=e.oxw(4);return e.KtG(r.openDatePicker(s))}),e.qZA()()}if(2&i){const t=e.oxw(4);e.xp6(4),e.Q6J("materializeActions",t.startDateActions)("materializeParams",t.datepickerMaterializeParams)("formControl",t.datePickerControl),e.xp6(1),e.Q6J("imask",e.VKq(5,G,t.dateMask))("formControl",t.datePickerControl)}}function tt(i,n){if(1&i&&(e.ynx(0),e.YNc(1,et,6,7,"div",56),e.BQk()),2&i){const t=n.$implicit,o=n.index,s=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t&&0===o&&s.definiteLimitChecked)}}function it(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",50)(2,"div",51)(3,"input",52),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(15),r=e.oxw();return e.KtG(r.selectDefineteDate("defineteLimit",s))}),e.qZA(),e.TgZ(4,"label",53),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",51)(8,"input",54),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(15),r=e.oxw();return e.KtG(r.selectDefineteDate("indefineteLimit",s))}),e.qZA(),e.TgZ(9,"label",55),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e.YNc(12,tt,2,1,"ng-container",12),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("checked",t.definiteLimitChecked),e.xp6(2),e.Oqu(e.lcZ(6,5,"FIELDS.TEMPORARY_SELF_EXCLUSION")),e.xp6(3),e.Q6J("checked",t.inDefiniteLimitChecked),e.xp6(2),e.Oqu(e.lcZ(11,7,"FIELDS.PERMANENT_SELF_EXCLUSION")),e.xp6(2),e.Q6J("ngForOf",t.selectedLimit.limitSettings)}}function nt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",64)(1,"input",65),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.value=s)}),e.ALo(2,"translate"),e.qZA()()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(1),e.s9C("name",t.modelName),e.s9C("placeholder",e.lcZ(2,4,"FIELDS.EXCLUDE_YOURSELF")),e.Q6J("ngModel",t.value)("imask",e.VKq(6,G,o.dateMask))}}function ot(i,n){if(1&i&&(e.ynx(0),e.YNc(1,nt,3,8,"div",63),e.BQk()),2&i){const t=n.$implicit,o=n.index;e.xp6(1),e.Q6J("ngIf",t&&0===o)}}function st(i,n){if(1&i&&(e.ynx(0),e.YNc(1,ot,2,1,"ng-container",12),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.selectedLimit.limitSettings)}}function rt(i,n){if(1&i&&e._UZ(0,"field-messages",69),2&i){e.oxw();const t=e.MAs(5);e.Q6J("min-field-value",0)("field-errors",t.errors)}}function at(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",45),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",66,67),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw(2).$implicit;return e.KtG(r.value=s)}),e.qZA(),e.YNc(6,rt,1,2,"field-messages",68),e.BQk()}if(2&i){const t=e.MAs(5),o=e.oxw(2).$implicit,s=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,7,"TEXTS.DAILY")),e.xp6(2),e.Q6J("prefix",s.currentCurrency.currencySymbol)("name",o.modelName)("ngModel",o.value)("value",0)("pattern",s.MONEY_INPUT_REGEX),e.xp6(2),e.Q6J("ngIf",t.errors&&t.dirty)}}function ct(i,n){if(1&i&&e._UZ(0,"field-messages",69),2&i){e.oxw();const t=e.MAs(5);e.Q6J("min-field-value",0)("field-errors",t.errors)}}function lt(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",45),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",70,71),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw(2).$implicit;return e.KtG(r.value=s)}),e.qZA(),e.YNc(6,ct,1,2,"field-messages",68),e.BQk()}if(2&i){const t=e.MAs(5),o=e.oxw(2).$implicit,s=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,7,"TEXTS.WEEKLY")),e.xp6(2),e.Q6J("name",o.modelName)("ngModel",o.value)("value",0)("prefix",s.currentCurrency.currencySymbol)("pattern",s.MONEY_INPUT_REGEX),e.xp6(2),e.Q6J("ngIf",t.errors&&t.dirty)}}function _t(i,n){if(1&i&&e._UZ(0,"field-messages",69),2&i){e.oxw();const t=e.MAs(5);e.Q6J("min-field-value",0)("field-errors",t.errors)}}function dt(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",45),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",70,72),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw(2).$implicit;return e.KtG(r.value=s)}),e.qZA(),e.YNc(6,_t,1,2,"field-messages",68),e.BQk()}if(2&i){const t=e.MAs(5),o=e.oxw(2).$implicit,s=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,7,"TEXTS.MONTHLY")),e.xp6(2),e.Q6J("name",o.modelName)("ngModel",o.value)("value",0)("prefix",s.currentCurrency.currencySymbol)("pattern",s.MONEY_INPUT_REGEX),e.xp6(2),e.Q6J("ngIf",t.errors&&t.dirty)}}function mt(i,n){if(1&i&&e._UZ(0,"field-messages",76),2&i){e.oxw();const t=e.MAs(2),o=e.oxw(5);e.Q6J("min-field-value",o.betTimeLimitMin)("max-field-value",o.betTimeLimitMax)("field-errors",t.errors)}}function ut(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"input",73,74),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw(2).$implicit;return e.KtG(r.value=s)}),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA(),e.YNc(5,mt,1,3,"field-messages",75),e.BQk()}if(2&i){const t=e.MAs(2),o=e.oxw(2).$implicit,s=e.oxw(3);e.xp6(1),e.hYB("placeholder","",e.lcZ(3,7,"TEXTS."+o.label)," ",e.lcZ(4,9,"TEXTS.MINUTE"),""),e.Q6J("min",s.betTimeLimitMin)("max",s.betTimeLimitMax)("name",o.modelName)("ngModel",o.value),e.xp6(4),e.Q6J("ngIf",t.errors&&t.dirty)}}function pt(i,n){if(1&i&&e._UZ(0,"field-messages",80),2&i){e.oxw();const t=e.MAs(5);e.Q6J("field-errors",t.errors)}}function gt(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",45),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",77,78),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw(3).$implicit;return e.KtG(r.value=s)}),e.qZA(),e.YNc(6,pt,1,1,"field-messages",79),e.BQk()}if(2&i){const t=e.MAs(5),o=e.oxw(3).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,5,"TEXTS.DAILY")),e.xp6(2),e.Q6J("name",o.modelName)("ngModel",o.value)("value",0),e.xp6(2),e.Q6J("ngIf",t.errors&&t.dirty)}}function ft(i,n){if(1&i&&e._UZ(0,"field-messages",80),2&i){e.oxw();const t=e.MAs(5);e.Q6J("field-errors",t.errors)}}function ht(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",45),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",77,81),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw(3).$implicit;return e.KtG(r.value=s)}),e.qZA(),e.YNc(6,ft,1,1,"field-messages",79),e.BQk()}if(2&i){const t=e.MAs(5),o=e.oxw(3).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,5,"TEXTS.WEEKLY")),e.xp6(2),e.Q6J("name",o.modelName)("ngModel",o.value)("value",0),e.xp6(2),e.Q6J("ngIf",t.errors&&t.dirty)}}function St(i,n){if(1&i&&e._UZ(0,"field-messages",80),2&i){e.oxw();const t=e.MAs(5);e.Q6J("field-errors",t.errors)}}function Tt(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",45),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",77,82),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw(3).$implicit;return e.KtG(r.value=s)}),e.qZA(),e.YNc(6,St,1,1,"field-messages",79),e.BQk()}if(2&i){const t=e.MAs(5),o=e.oxw(3).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,5,"TEXTS.MONTHLY")),e.xp6(2),e.Q6J("name",o.modelName)("ngModel",o.value)("value",0),e.xp6(2),e.Q6J("ngIf",t.errors&&t.dirty)}}function xt(i,n){if(1&i&&(e.ynx(0),e.YNc(1,gt,7,7,"ng-container",22),e.YNc(2,ht,7,7,"ng-container",22),e.YNc(3,Tt,7,7,"ng-container",22),e.BQk()),2&i){const t=e.oxw(2),o=t.$implicit,s=t.index;e.xp6(1),e.Q6J("ngIf",!o.isHasSpecificTime&&0===s),e.xp6(1),e.Q6J("ngIf",!o.isHasSpecificTime&&1===s),e.xp6(1),e.Q6J("ngIf",!o.isHasSpecificTime&&2===s)}}function At(i,n){if(1&i&&(e.TgZ(0,"div",64),e.YNc(1,at,7,9,"ng-container",22),e.YNc(2,lt,7,9,"ng-container",22),e.YNc(3,dt,7,9,"ng-container",22),e.YNc(4,ut,6,11,"ng-container",22),e.YNc(5,xt,4,3,"ng-container",22),e.qZA()),2&i){const t=e.oxw(),o=t.$implicit,s=t.index;e.xp6(1),e.Q6J("ngIf",!o.hasSpecificMultiTime&&!o.isHasSpecificTime&&0===s),e.xp6(1),e.Q6J("ngIf",!o.hasSpecificMultiTime&&!o.isHasSpecificTime&&1===s),e.xp6(1),e.Q6J("ngIf",!o.hasSpecificMultiTime&&!o.isHasSpecificTime&&2===s),e.xp6(1),e.Q6J("ngIf",o.isHasSpecificTime),e.xp6(1),e.Q6J("ngIf",o.hasSpecificMultiTime)}}function vt(i,n){if(1&i&&(e.ynx(0),e.YNc(1,At,6,5,"div",63),e.BQk()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",t)}}function Ct(i,n){if(1&i&&(e.ynx(0),e.YNc(1,vt,2,1,"ng-container",12),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.selectedLimit.limitSettings)}}const X=function(i){return{param0:i}};function Zt(i,n){if(1&i&&(e._UZ(0,"message-box",83),e.ALo(1,"translate")),2&i){const t=e.oxw(2);e.Q6J("content",e.xi3(1,1,"MESSAGES.COOLOFFPERIOD",e.VKq(4,X,24*+t.trader.tCoolOffPeriod)))}}function yt(i,n){if(1&i&&(e._UZ(0,"message-box",83),e.ALo(1,"translate")),2&i){const t=e.oxw(2);e.Q6J("content",e.xi3(1,1,"MESSAGES.TSE_COOL_OFF_PERIOD",e.VKq(4,X,24*+t.trader.tSelfExcCoolOffPeriod)))}}function Lt(i,n){1&i&&(e._UZ(0,"message-box",83),e.ALo(1,"translate")),2&i&&e.Q6J("content",e.lcZ(1,1,"MESSAGES.PSE_COOL_OFF_PERIOD"))}function It(i,n){1&i&&(e._UZ(0,"message-box",84),e.ALo(1,"translate")),2&i&&e.Q6J("type","info")("content",e.lcZ(1,2,"MESSAGES.SESSION_EXPIRE_INFO_SELF_EXCLUDE"))}function Et(i,n){if(1&i&&(e.TgZ(0,"li",90)(1,"i",91),e._uU(2,"report_problem"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()),2&i){const t=n.$implicit;e.xp6(4),e.Oqu(e.lcZ(5,1,t))}}function Mt(i,n){if(1&i&&(e.TgZ(0,"div",85)(1,"ul",86)(2,"li",87)(3,"h4")(4,"i",88),e._uU(5,"info"),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,Et,6,3,"li",89),e.TgZ(9,"li",90)(10,"i",91),e._uU(11,"report_problem"),e.qZA(),e._uU(12),e.ALo(13,"translate"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(6),e.Oqu(e.lcZ(7,3,"TEXTS.INFORMATION")),e.xp6(2),e.Q6J("ngForOf",t.selectedLimit.infoList),e.xp6(4),e.hij(" ",e.lcZ(13,5,"MESSAGES.REGULATORY_SELF_LIMITS")," ")}}function qt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",1)(2,"div",2)(3,"div",31)(4,"div",32)(5,"h5",33),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",34),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.closeLimitModal())}),e.TgZ(9,"a"),e._UZ(10,"i",35),e.qZA()()()(),e.TgZ(11,"div",7)(12,"div",36)(13,"div",37)(14,"form",38,39),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.MAs(15),r=e.oxw();return e.KtG(r.saveLimitSettings(s,r.selectedLimit.name))}),e.TgZ(16,"span",40),e._uU(17),e.ALo(18,"translate"),e.ALo(19,"date"),e.qZA(),e.TgZ(20,"span",41),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.YNc(23,it,13,9,"ng-container",22),e.YNc(24,st,2,1,"ng-container",22),e.YNc(25,Ct,2,1,"ng-container",22),e.YNc(26,Zt,2,6,"message-box",42),e.YNc(27,yt,2,6,"message-box",42),e.YNc(28,Lt,2,3,"message-box",42),e.YNc(29,It,2,4,"message-box",43),e.TgZ(30,"div",44),e.ynx(31),e.TgZ(32,"span",45),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"input",46),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.limitReason=s)}),e.qZA(),e.BQk(),e.TgZ(36,"button",47),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"button",48),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.initValues(!0))}),e._uU(40),e.ALo(41,"translate"),e.qZA()()()(),e.YNc(42,Mt,14,7,"div",49),e.qZA()()()()}if(2&i){const t=e.MAs(15),o=e.oxw();e.xp6(6),e.hij(" ",e.lcZ(7,17,"TEXTS."+o.selectedLimit.name),""),e.xp6(11),e.AsE("",e.lcZ(18,19,"TEXTS.LAST_BET_DATE")," : ",e.xi3(19,21,o.selfLimitationModel.lastBetDate,"dd-MM-yyyy"),""),e.xp6(4),e.Oqu(e.lcZ(22,24,"TEXTS.SELF_EXCLUSION")),e.xp6(2),e.Q6J("ngIf",o.selectedLimit.name===o.SelfLimit.ExcludeYourself),e.xp6(1),e.Q6J("ngIf",o.selectedLimit.name===o.SelfLimit.CasinoExcludeYourself),e.xp6(1),e.Q6J("ngIf",o.selectedLimit.name!==o.SelfLimit.ExcludeYourself&&o.selectedLimit.name!==o.SelfLimit.CasinoExcludeYourself),e.xp6(1),e.Q6J("ngIf",o.trader.tCoolOffPeriod&&o.selectedLimit.name!==o.SelfLimit.ExcludeYourself),e.xp6(1),e.Q6J("ngIf",o.definiteLimitChecked&&o.trader.tSelfExcCoolOffPeriod&&o.selectedLimit.name===o.SelfLimit.ExcludeYourself&&"spacewilly"!==o.traderName),e.xp6(1),e.Q6J("ngIf",o.inDefiniteLimitChecked&&o.selectedLimit.name===o.SelfLimit.ExcludeYourself&&"spacewilly"!==o.traderName),e.xp6(1),e.Q6J("ngIf",o.selectedLimit.name===o.SelfLimit.ExcludeYourself&&o.trader.mgaRulesEnabled),e.xp6(4),e.Oqu(e.lcZ(34,26,"TEXTS.REASON")),e.xp6(2),e.Q6J("ngModel",o.limitReason),e.xp6(1),e.Q6J("disabled",o.formBusy||!t.valid||o.selectedLimit.name===o.SelfLimit.ExcludeYourself&&(!o.definiteLimitChecked&&!o.inDefiniteLimitChecked||!(o.datePickerControl.valid&&t.valid))),e.xp6(1),e.Oqu(e.lcZ(38,28,"LINKS.SAVE")),e.xp6(3),e.Oqu(e.lcZ(41,30,"LINKS.RESET")),e.xp6(2),e.Q6J("ngIf",o.selectedLimit.name!==o.SelfLimit.ExcludeYourself)}}u.N.map.limitSettings;class y{set content(n){n&&!this.inDefiniteLimitChecked?n.form.setValidators((0,a.ZDp)(c.kI.required)):n&&this.inDefiniteLimitChecked&&n.form.setValidators(null)}constructor(n,t,o,s,r,l,p,h,N,f,U){this.limitSettingsDataFactory=n,this.limitSettingsService=t,this.route=o,this.traderService=s,this.utilService=r,this.userService=l,this.translate=p,this.datePipe=h,this.toastFactory=N,this.translateService=f,this.changeDetector=U,this.destroyed$=new S.xQ,this.casinoSelfLimitationModel={},this.limitPeriodMessage=null,this.tseLimitMessage=null,this.isCommonBalance=!1,this.limitConfigModal=new e.vpe,this.startDateActions=new e.vpe,this.SelfLimit=a.OoT,this.isNumber=he.Z,this.MONEY_INPUT_REGEX="^(\\d+(?:[\\.\\,]\\d{2})?|)$",this.betTimeLimitMin=0,this.betTimeLimitMax=44640,this.dateMask="00/00/0000",this.limitConfigModalParams=[{dismissible:!0,complete:()=>{this.initValues(null,!0)}}],this.formBusy=!1,this.inDefiniteLimitChecked=!1,this.definiteLimitChecked=!1,this.selectedTab=0,this.onlyCasino=!1,this.onlySportsbook=!1,this.showMessageBox=!1,this.datepickerMaterializeParams=[],this.mgaRulesEnabled=!0,this.limitReason="",this.datePickerControl=new c.NI}ngOnInit(){this.onlySportsbook="S"===this.traderService.trader.tocs,this.initStoreSubs(),this.datePickerControl.valueChanges.pipe((0,_.R)(this.destroyed$),(0,Te.x)((n,t)=>n===t)).subscribe(n=>{this.datePickerControl.updateValueAndValidity(),this.datePickerControl.setValue(n),this.changeDetector.detectChanges()}),this.gsle=this.traderService.trader.gsle,this.userService.getCustomerCurrency().then(n=>{this.currentCurrency=n}),this.trader=this.traderService.trader,this.selfLimitationModel=this.route.snapshot.data.selfLimitation,this.initValues(null,!1),this.translate.get("MESSAGES.COOLOFFPERIOD",{param0:24*Number(this.trader.tCoolOffPeriod)}).pipe((0,_.R)(this.destroyed$)).subscribe(n=>{this.limitPeriodMessage=n}),this.translate.get("MESSAGES.TSE_COOL_OFF_PERIOD",{param0:24*Number(this.trader.tSelfExcCoolOffPeriod)}).pipe((0,_.R)(this.destroyed$)).subscribe(n=>{this.tseLimitMessage=n}),this.onlyCasino=u.N.trader.onlyCasino,this.traderName=u.N.trader.name,this.isCommonBalance=!!this.traderService.trader.tCB,this.configurableLimitTypes=this.traderService.trader.configurableLimitTypes,this.mgaRulesEnabled=!!this.traderService.trader.mgaRulesEnabled,this.utilService.getDatepickerParams().then(n=>{this.datepickerMaterializeParams=n})}initValues(n,t){if(this.initValuesSelectedName=n,this.inDefiniteLimitChecked=!1,this.definiteLimitChecked=!1,this.limitReason="",t){const o=this.limitSettingsDataFactory.getLimitTypes(this.selfLimitationModel,this.casinoSelfLimitationModel,!1,this.isCommonBalance,this.gsle,this.configurableLimitTypes);this.limitSettingsGroup=(0,w.Z)((0,P.Z)(o,"type"))}else this.limitSettingsService.getSelfLimitation_v2(),u.N.trader.IsIframe||this.limitSettingsService.getCasinoLimitInfo_v2(),n&&this.getSessionLimits(null)}configOnClick(n,t){this.showMessageBox=!1;const o=this.limitSettingsGroup.reduce((r,l)=>[...r,...l],[]);this.selectedLimit=o.find(r=>r.type===t&&r.name===n),this.changeDetector.detectChanges();const s=this.selectedLimit;s.name===a.OoT.ExcludeYourself&&s.limitSettings[0].savedValue?(this.inDefiniteLimitChecked=!1,this.definiteLimitChecked=!0,this.defineteLimitType="defineteLimit"):s.name===a.OoT.ExcludeYourself&&s.limitSettings[1].savedValue&&(this.definiteLimitChecked=!1,this.inDefiniteLimitChecked=!0),n===a.OoT.ExcludeYourself&&this.isIndefiniteLimitSetForUser?this.showContactSupportMessage():this.limitConfigModal.emit({action:"modal",params:["open"]})}resetLimit(n){this.showMessageBox=!1;const o=this.limitSettingsGroup.reduce((r,l)=>[...r,...l],[]).find(r=>r.name===n);if(o.limitSettings.some(r=>r&&r.value>=0)){const r={};(0,Se.Z)(o.limitSettings,(p,h)=>{p&&(r[p.modelName]=null)}),this.formBusy=!0;const l=new a.qPv;if(l.requestBody=r,l.requestBody.reason=this.limitReason,n===a.OoT.CasinoBetLimit)this.limitSettingsService.updateCasinoBetLimit(l);else if(n===a.OoT.CasinoLossLimit)this.limitSettingsService.updateCasinoLossLimit(l);else if(n===a.OoT.CasinoDepositLimit||n===a.OoT.DepositLimit)this.limitSettingsService.updateCasinoDepositLimit(l);else if(n===a.OoT.CasinoSesionLimit||n===a.OoT.SessionLimit)this.limitSettingsService.updateCasinoSessionLimit(l);else if(n===a.OoT.CasinoExcludeYourself)this.limitSettingsService.updateCasinoBetLimit(l);else if(n===a.OoT.BetTimeLimit)this.limitSettingsService.updateSportBetTimeLimit(l);else if(n===a.OoT.ExcludeYourself)this.isIndefiniteLimitSetForUser?this.showContactSupportMessage():(l.requestBody.customerId=this.userService.user.customerId,l.requestBody.reason=this.limitReason,this.limitSettingsService.updateDefiniteIndefinite(l));else if(n===a.OoT.GeneralSessionLimit)this.userService.updateSessionLimitation(l).then(p=>{this.initValues(n),this.showBoxSuccesMessage(),this.formBusy=!1}).catch(p=>{this.showBoxErrorMessage(p),this.formBusy=!1});else{let p=(0,F.Z)(this.selfLimitationModel,r);p=this.limitSettingsDataFactory.removeSessionDataFromLimitations(p),l.requestBody=p,l.requestBody.reason=this.limitReason,this.limitSettingsService.saveSelfLimitation(l)}}}saveLimitSettings(n,t){if(this.saveLimitSelectedName=t,this.isReasonFieldMandatory(n))return void this.toastFactory.error(this.translateService.instant("MESSAGES.ADD_REASON"));Object.keys(n.controls).forEach(r=>{if(n.controls[r].value){let l=""+n.controls[r].value;l&&(l=l.replace(this.currentCurrency.currencySymbol,"").replace(/,/g,""),n.controls[r].setValue(l))}});const o=()=>{this.initValues(t),this.showBoxSuccesMessage(),this.limitConfigModal.emit({action:"modal",params:["close"]})};null!==this.defineteLimitType&&("indefineteLimit"===this.defineteLimitType?(n.value.definiteLimit=null,n.value.indefiniteLimit=1):"defineteLimit"===this.defineteLimitType&&(n.value.definiteLimit=this.utilService.convertTimeStampDate(this.datePickerControl.value)));const s=n.value;if(this.formBusy=!0,"casinoLimit"===this.selectedLimit.type){const r=new a.qPv(s);r.requestBody.reason=this.limitReason,t===a.OoT.CasinoLossLimit||n.value.dailyLossLimit||n.value.weeklyLossLimit||n.value.monthlyLossLimit?this.limitSettingsService.updateCasinoLossLimit(r):t==a.OoT.DepositLimit||n.value.dailyDepositLimit||n.value.monthlyDepositLimit||n.value.weeklyDepositLimit?this.limitSettingsService.updateCasinoDepositLimit(r):n.value.excludeDate?this.limitSettingsService.excludePlayer(r):t==a.OoT.SessionLimit||n.value.sessionLimit?this.limitSettingsService.updateCasinoSessionLimit(r):this.limitSettingsService.updateCasinoBetLimit(r)}else{let r,l;t!==a.OoT.GeneralSessionLimit?(r=(0,F.Z)(this.selfLimitationModel,s),r=this.limitSettingsDataFactory.removeSessionDataFromLimitations(r),l=new a.qPv(r)):l=new a.qPv(s),l.requestBody.reason=this.limitReason,n.value.sportBetDateLimit?(l.requestBody={sportBetDateLimit:n.value.sportBetDateLimit,reason:this.limitReason},this.limitSettingsService.updateSportBetTimeLimit(l)):n.value.indefiniteLimit||n.value.definiteLimit?(n.value.definiteLimit&&(l.requestBody.indefiniteLimit=0,l.requestBody.reason=this.limitReason),this.limitSettingsService.updateDefiniteIndefinite(l)):t===a.OoT.GeneralSessionLimit?this.userService.updateSessionLimitation(l).then(p=>{o(),this.formBusy=!1}).catch(p=>{this.formBusy=!1,this.showBoxErrorMessage(p)}):this.limitSettingsService.saveSelfLimitation(l)}}selectDefineteDate(n,t){"defineteLimit"===n?(this.inDefiniteLimitChecked=!1,this.definiteLimitChecked=!0):"indefineteLimit"===n&&(this.definiteLimitChecked=!1,this.inDefiniteLimitChecked=!0),this.defineteLimitType=n,t.form.markAsPristine()}selectTab(n){this.showMessageBox=!1,this.selectedTab=n}closeLimitModal(){this.limitConfigModal.emit({action:"modal",params:["close"]})}openDatePicker(n){n.stopPropagation(),this.dateInput.nativeElement.click()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.limitSettingsService.clearSelfLimitation$.next(),this.limitSettingsService.clearSaveSelfLimitation$.next(),this.limitSettingsService.clearUpdateCasinoBetLimit$.next(),this.limitSettingsService.clearUpdateCasinoLossLimit$.next(),this.limitSettingsService.clearUpdateCasinoDepositLimit$.next(),this.limitSettingsService.clearUpdateCasinoSessionLimit$.next(),this.limitSettingsService.clearUpdateDefiniteIndefinite$.next(),this.limitSettingsService.clearUpdateSportBetTimeLimit$.next(),this.limitSettingsService.clearCasinoLimitInfo$.next()}getSessionLimits(n){let t;this.userService.getSessionLimitation().then(o=>{this.selfLimitationModel=(0,F.Z)(o,n?.data),this.userService.resetAndStartSessionCounter(this.selfLimitationModel),t=this.limitSettingsDataFactory.getLimitTypes(this.selfLimitationModel,this.casinoSelfLimitationModel,!0,this.isCommonBalance,this.gsle,this.configurableLimitTypes),this.limitSettingsGroup=(0,w.Z)((0,P.Z)(t,"type"))})}initStoreSubs(){this.limitSettingsService.selfLimitationStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{if(t.data){this.isIndefiniteLimitSetForUser=!!t.data.indefiniteLimit,this.traderService.trader.gsle?this.selfLimitationModel=(0,F.Z)(this.userService.sessionLimitation,t.data):this.selfLimitationModel=t.data;const o=this.datePipe.transform(t.data.definiteLimit,"dd/MM/yyyy","GMT+3");let s;this.datePickerControl.setValue(o),this.getSessionLimits(t),this.initValuesSelectedName!==a.OoT.GeneralSessionLimit&&(s=this.limitSettingsDataFactory.getLimitTypes(this.selfLimitationModel,this.casinoSelfLimitationModel,!0,this.isCommonBalance,this.gsle,this.configurableLimitTypes),this.limitSettingsGroup=(0,w.Z)((0,P.Z)(s,"type")))}(t.data||t.error||t.responseCodes)&&(this.initValuesSelectedName="")}),this.limitSettingsService.casinoLimitInfoStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{if(t.data){this.casinoSelfLimitationModel=t.data;const o=this.limitSettingsDataFactory.getLimitTypes(this.selfLimitationModel,this.casinoSelfLimitationModel,!0,this.isCommonBalance,this.gsle,this.configurableLimitTypes);this.limitSettingsGroup=(0,w.Z)((0,P.Z)(o,"type"))}});const n=t=>{(t.data||t.success)&&(this.initValues(this.saveLimitSelectedName),this.showBoxSuccesMessage(),this.limitConfigModal.emit({action:"modal",params:["close"]})),t.error&&this.showBoxErrorMessage(t.error),(t.data||t.error||t.responseCodes)&&(this.saveLimitSelectedName=""),this.formBusy=t.loading};this.limitSettingsService.updateCasinoLossLimitStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{n(t)}),this.limitSettingsService.updateCasinoDepositLimitStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{n(t)}),this.limitSettingsService.excludePlayerStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{n(t)}),this.limitSettingsService.updateCasinoSessionLimitStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{n(t)}),this.limitSettingsService.updateCasinoBetLimitStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{n(t)}),this.limitSettingsService.updateSportBetTimeLimitStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{n(t)}),this.limitSettingsService.updateDefiniteIndefiniteStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{t.responseCodes&&"LIM_UPD_SUCCESS_SESSION_EXPIRE"===t.responseCodes[0].responseKey&&setTimeout(()=>{this.userService.logout()},100),n(t)}),this.limitSettingsService.saveSelfLimitationStore$.pipe((0,_.R)(this.destroyed$)).subscribe(t=>{n(t)})}showBoxSuccesMessage(){this.translateService.get("MESSAGES.SUCCESS_LIMITS").pipe((0,_.R)(this.destroyed$)).subscribe(n=>{this.showMessageBox=!0,this.boxMessage=n,this.boxType="success"})}showBoxErrorMessage(n){if(n.error)if("LIMIT_CHANGE_DATE_VIOLATION"===n.error.responseCodes[0].responseKey){let t=n.error.data?n.error.data.param0:null;t=this.datePipe.transform(t,"dd-MM-yyyy HH:mm"),this.translateService.get("MESSAGES.LIMIT_CHANGE_DATE_VIOLATION",{param0:t}).pipe((0,_.R)(this.destroyed$)).subscribe(o=>{this.showMessageBox=!0,this.boxMessage=o,this.boxType="error",this.closeLimitModal()})}else"CASINOPRO_INCREASE_CST_LIMIT"===n.error.responseCodes[0].responseKey?this.translateService.get("MESSAGES.CASINOPRO_INCREASE_CST_LIMIT",{param0:n.error.data.description}).pipe((0,_.R)(this.destroyed$)).subscribe(t=>{this.showMessageBox=!0,this.boxMessage=t,this.boxType="error",this.closeLimitModal()}):"CASINOPRO_INCREASE_CST_LIMIT_NOT_ALLOWED"===n.error.responseCodes[0].responseKey?this.translateService.get("MESSAGES.CASINOPRO_INCREASE_CST_LIMIT_NOT_ALLOWED").pipe((0,_.R)(this.destroyed$)).subscribe(t=>{this.showMessageBox=!0,this.boxMessage=t,this.boxType="error",this.closeLimitModal()}):this.translateService.get("MESSAGES."+n.error.responseCodes[0].responseKey).pipe((0,_.R)(this.destroyed$)).subscribe(t=>{this.showMessageBox=!0,this.boxMessage=t,this.boxType="error",this.closeLimitModal()});else{if(!n[0])return;this.showMessageBox=!0,this.boxMessage=n[0],this.boxType="error",this.closeLimitModal()}}isReasonFieldMandatory(n){let t=!1;return void 0===this.trader.isReasonFieldOptional||this.trader.isReasonFieldOptional||(t=!n.value.reason),t}showContactSupportMessage(){this.translateService.get("MESSAGES.PSE_MANUAL_CHANGE").pipe((0,_.R)(this.destroyed$)).subscribe(n=>{this.showMessageBox=!0,this.boxMessage=n,this.boxType="info"}),this.formBusy=!1}}y.\u0275fac=function(n){return new(n||y)(e.Y36(a.xb8),e.Y36(a.zgE),e.Y36(T.gz),e.Y36(a._W6),e.Y36(a.XN8),e.Y36(a.Ye3),e.Y36(g.sK),e.Y36(m.uU),e.Y36(a.Uwl),e.Y36(g.sK),e.Y36(e.sBO))},y.\u0275cmp=e.Xpm({type:y,selectors:[["limit-settings"]],viewQuery:function(n,t){if(1&n&&(e.Gf(ve,5),e.Gf(Ce,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.dateInput=o.first),e.iGM(o=e.CRH())&&(t.content=o.first)}},decls:17,vars:9,consts:[[1,"bet-lmt-cntnt"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"fa","fa-ban"],[1,"inf-title"],["class","col s12",4,"ngIf"],[1,"mdl-cntnt"],[1,"row"],[1,"col","s12"],["materialize","tabs",1,"tabs"],["class","tab col s4",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["id","limitConfigModal","materialize","modal",1,"modal","modal-md","open","dshbrd-modal",3,"materializeActions","materializeParams"],["class","modal-content",4,"ngIf"],[3,"content","type"],[1,"tab","col","s4",3,"ngClass"],["href","javascript:;",3,"ngClass","click"],[1,"col","s12","tab-content",3,"id","ngClass"],[1,"scrllble-tbl"],[1,"dshbrd-tbl","lmt-tbl","highlight"],["width","50%"],[4,"ngIf"],[1,"btn",3,"click"],["aria-hidden","true",1,"fa","fa-cog","fa-fw"],["class","btn",3,"disabled","click",4,"ngIf"],["class","currency-symbol",4,"ngIf"],[1,"currency-symbol"],[1,"btn",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-trash-o","fa-fw"],[1,"modal-content"],[1,"header-content"],[1,"modal-title"],[1,"with-icon"],[1,"modal-close-button",3,"click"],[1,"fa","fa-times"],[1,"content","row"],[1,"col","s8"],[3,"ngSubmit"],["limitSettingsF","ngForm"],[1,"display-block"],[1,"display-block","set-limit-text","mar-top-10"],["type","info",3,"content",4,"ngIf"],[3,"type","content",4,"ngIf"],[1,"footer-btn-grp","left-grp"],[1,"field-label"],["type","text","name","reason",1,"browser-default","mar-bottom-5",3,"ngModel","ngModelChange"],["type","submit",1,"btn",3,"disabled"],["type","reset",1,"btn","disagree-btn",3,"click"],["class","col s4",4,"ngIf"],[1,"radio-field"],[1,"radio-option"],["name","limitRadio","type","radio","id","definiteLimit",1,"with-gap",3,"checked","click"],["for","definiteLimit"],["name","limitRadio","type","radio","id","inDefiniteLimit",1,"with-gap",3,"checked","click"],["for","inDefiniteLimit"],["class","date-picker-field ",4,"ngIf"],[1,"date-picker-field"],["for","selfLimitationDatePicker",1,"date-picker-mask"],["dateInput",""],["aria-hidden","true",1,"fa","fa-calendar"],["type","text","id","selfLimitationDatePicker","materialize","pickadate","tabindex","30",3,"materializeActions","materializeParams","formControl"],["type","text","pattern","[0-9]{2}/[0-9]{2}/[0-9]{4}","minlength","10","tabindex","1","required","",1,"datepicker","browser-default",2,"cursor","pointer",3,"imask","formControl","click"],["class","input-field",4,"ngIf"],[1,"input-field"],["type","text","pattern","[0-9]{2}/[0-9]{2}/[0-9]{4}","minlength","10","tabindex","1","required","",1,"browser-default",3,"name","placeholder","ngModel","imask","ngModelChange"],["type","tel","mask","separator.2","thousandSeparator",",","min","0",1,"browser-default",3,"prefix","name","ngModel","value","pattern","ngModelChange"],["daily","ngModel"],[3,"min-field-value","field-errors",4,"ngIf"],[3,"min-field-value","field-errors"],["type","tel","mask","separator.2","thousandSeparator",",","min","0",1,"browser-default",3,"name","ngModel","value","prefix","pattern","ngModelChange"],["weekly","ngModel"],["montly","ngModel"],["minMaxDirective","","mask","separator.0","thousandSeparator",",",1,"browser-default",3,"min","max","name","ngModel","placeholder","ngModelChange"],["limitInputModel","ngModel"],[3,"min-field-value","max-field-value","field-errors",4,"ngIf"],[3,"min-field-value","max-field-value","field-errors"],["type","tel","mask","0*",1,"browser-default",3,"name","ngModel","value","ngModelChange"],["limitMultiTimeDailyModel","ngModel"],[3,"field-errors",4,"ngIf"],[3,"field-errors"],["limitMultiTimeWeeklyModel","ngModel"],["limitMultiTimeMonthlyModel","ngModel"],["type","info",3,"content"],[3,"type","content"],[1,"col","s4"],[1,"collection","with-header","modal-sidebar"],[1,"collection-header"],[1,"material-icons","info-icon"],["class","collection-item ",4,"ngFor","ngForOf"],[1,"collection-item"],[1,"material-icons","report-icon"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"i",4),e.TgZ(5,"span",5),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.YNc(8,Ze,2,2,"div",6),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"ul",10),e.YNc(13,ye,4,9,"li",11),e.qZA()(),e.YNc(14,We,17,14,"ng-container",12),e.qZA()()()(),e.TgZ(15,"div",13),e.YNc(16,qt,43,32,"div",14),e.qZA()),2&n&&(e.xp6(6),e.Oqu(e.lcZ(7,7,"TEXTS.LIMIT_SETTINGS")),e.xp6(2),e.Q6J("ngIf",t.showMessageBox),e.xp6(5),e.Q6J("ngForOf",t.limitSettingsGroup),e.xp6(1),e.Q6J("ngForOf",t.limitSettingsGroup),e.xp6(1),e.Q6J("materializeActions",t.limitConfigModal)("materializeParams",t.limitConfigModalParams),e.xp6(1),e.Q6J("ngIf",!!t.selectedLimit))},dependencies:[m.mk,m.sg,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.c5,c.On,c.F,c.oH,xe.I,Q.M,$.An,D.W,J.Y,m.JJ,m.uU,g.X$,Ae.O],encapsulation:2});var Ot=d(18460),bt=d(24507);function Nt(i,n){1&i&&(e.TgZ(0,"div",18),e._UZ(1,"div",19),e.qZA())}function Ut(i,n){1&i&&(e.ynx(0),e._UZ(1,"message-box",20),e.BQk())}function wt(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"message-box",21),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("content",t.passwordChangeErrorMessage)}}u.N.map.changePassword;class L{constructor(n,t){this.fb=n,this.userService=t,this.inProgress=!1,this.passwordChangeError=!1,this.passwordChangeSuccess=!1,this.passwordChangeErrorMessage=null,this.changePasswordForm=n.group({oldPassword:new c.NI("",[c.kI.required]),newPassword:new c.NI("",[c.kI.required,this.passwordCantContain()])})}ngOnInit(){}passwordCantContain(){return n=>n.value===this.userService.user.username||n.value===this.userService.user.firstName||n.value===this.userService.user.secondname||n.value===this.userService.user.surname?{passwordCantContain:{valid:!1}}:null}changePassword(){const n={requestBody:{oldPassword:this.changePasswordForm.controls.oldPassword.value,newPassword:this.changePasswordForm.controls.newPassword.value}};this.inProgress=!0,this.passwordChangeError=!1,this.passwordChangeSuccess=!1,this.userService.changePassword(n).then(t=>{this.changePasswordForm.reset(),this.inProgress=!1,this.passwordChangeError=!1,this.passwordChangeSuccess=!0}).catch(t=>{this.inProgress=!1,this.passwordChangeError=!0,this.passwordChangeSuccess=!1,this.passwordChangeErrorMessage=t[0]})}}L.\u0275fac=function(n){return new(n||L)(e.Y36(c.qu),e.Y36(a.Ye3))},L.\u0275cmp=e.Xpm({type:L,selectors:[["app-change-password"]],decls:26,vars:25,consts:[[1,"chng-psswrd-cntnt"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"fa","fa-unlock-alt","fa-fw"],[1,"inf-title"],[1,"mdl-cntnt"],["name","changePasswordForm",3,"formGroup","ngSubmit"],[1,"input-field","bubble"],["type","password","name","currentPassword","id","current-password","required","",1,"browser-default",3,"placeholder","formControl"],["el","current-password"],["type","password","name","newPassword","id","new-password","required","",1,"browser-default",3,"placeholder","formControl"],[3,"model","upper","lower","number","length","notEqual"],["el","new-password"],[1,"input-field","das-change-pass"],[1,"btn",3,"disabled"],["class","progress",4,"ngIf"],[4,"ngIf"],[1,"progress"],[1,"indeterminate"],["type","success","content","MESSAGES.PASSWORD_UPDATE"],["type","error",3,"content"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"i",4),e.TgZ(5,"span",5),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",6)(9,"form",7),e.NdJ("ngSubmit",function(){return t.changePasswordForm.valid&&t.changePassword()}),e.TgZ(10,"div",8),e._UZ(11,"input",9),e.ALo(12,"translate"),e._UZ(13,"password-eye",10),e.qZA(),e.TgZ(14,"div",8),e._UZ(15,"input",11),e.ALo(16,"translate"),e._UZ(17,"bubble-validator",12)(18,"password-eye",13),e.qZA(),e.TgZ(19,"div",14)(20,"button",15),e._uU(21),e.ALo(22,"translate"),e.qZA()()(),e.YNc(23,Nt,2,0,"div",16),e.qZA()(),e.YNc(24,Ut,2,0,"ng-container",17),e.YNc(25,wt,2,1,"ng-container",17),e.qZA()),2&n&&(e.xp6(6),e.Oqu(e.lcZ(7,17,"TEXTS.CHANGE_PASSWORD")),e.xp6(3),e.Q6J("formGroup",t.changePasswordForm),e.xp6(2),e.s9C("placeholder",e.lcZ(12,19,"TEXTS.OLD_PASSWORD")),e.Q6J("formControl",t.changePasswordForm.controls.oldPassword),e.xp6(4),e.s9C("placeholder",e.lcZ(16,21,"FIELDS.NEW_PASSWORD")),e.Q6J("formControl",t.changePasswordForm.controls.newPassword),e.xp6(2),e.Q6J("model",t.changePasswordForm.controls.newPassword)("upper",1)("lower",1)("number",1)("length",6)("notEqual",t.changePasswordForm.controls.oldPassword),e.xp6(3),e.Q6J("disabled",!t.changePasswordForm.valid&&!t.inProgress),e.xp6(1),e.Oqu(e.lcZ(22,23,"LINKS.CHANGE")),e.xp6(2),e.Q6J("ngIf",t.inProgress),e.xp6(1),e.Q6J("ngIf",t.passwordChangeSuccess),e.xp6(1),e.Q6J("ngIf",t.passwordChangeError))},dependencies:[m.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.oH,c.sg,D.W,Ot.M,bt.J,g.X$],encapsulation:2});u.N.map.accountDetails;class I{constructor(n,t){this.userService=n,this.traderService=t}ngOnInit(){this.accountDetails=this.userService.user,this.traderService.getTraderCurrencyList().then(n=>{this.currencyList=n,this.accountDetails.currencyCode=this.getCurrentCurrency().currencyCode})}get user(){return this.userService.user}getCurrentCurrency(){const n=this.currencyList.findIndex(t=>t.currencyId===this.user.currencyId);return n<0?"-":this.currencyList[n]}}function Pt(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.NAME")),e.xp6(3),e.Oqu(t.userInfo.firstName)}}function Ft(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.SECOND_NAME")),e.xp6(3),e.Oqu(t.userInfo.secondname)}}function Dt(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.LASTNAME")),e.xp6(3),e.Oqu(t.userInfo.surname)}}function Jt(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.BIRTHDATE")),e.xp6(3),e.Oqu(t.userInfo.birthDate)}}function Qt(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.IDENTITY")),e.xp6(3),e.Oqu(t.userInfo.identity)}}function Yt(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.CITY")),e.xp6(3),e.Oqu(t.userInfo.cityName)}}function Rt(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.ADDRESS")),e.xp6(3),e.Oqu(t.userInfo.address)}}I.\u0275fac=function(n){return new(n||I)(e.Y36(a.Ye3),e.Y36(a._W6))},I.\u0275cmp=e.Xpm({type:I,selectors:[["app-account-details"]],decls:35,vars:19,consts:[[1,"accnt-inf-cntnt"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"material-icons"],[1,"inf-title"],[1,"mdl-cntnt"],[1,"striped"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"i",4),e._uU(5,"supervisor_account"),e.qZA(),e.TgZ(6,"span",5),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",6)(10,"table",7)(11,"tr")(12,"td"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()(),e.TgZ(17,"tr")(18,"td"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA()(),e.TgZ(23,"tr")(24,"td"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA()(),e.TgZ(29,"tr")(30,"td"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA()()()()()()),2&n&&(e.xp6(7),e.Oqu(e.lcZ(8,9,"TEXTS.ACCOUNT_INFORMATION")),e.xp6(6),e.Oqu(e.lcZ(14,11,"FIELDS.USERNAME")),e.xp6(3),e.Oqu(t.accountDetails.username),e.xp6(3),e.Oqu(e.lcZ(20,13,"TEXTS.EMAIL")),e.xp6(3),e.Oqu(t.accountDetails.email),e.xp6(3),e.Oqu(e.lcZ(26,15,"FIELDS.SELECT_CURRENCY")),e.xp6(3),e.Oqu(t.accountDetails.currencyCode),e.xp6(3),e.Oqu(e.lcZ(32,17,"TEXTS.CUSTOMER_NUMBER")),e.xp6(3),e.Oqu(t.accountDetails.code))},dependencies:[g.X$],encapsulation:2});u.N.map.userDetails;class E{constructor(n){this.userService=n}ngOnInit(){this.traderName=u.N.trader.name}get userInfo(){return this.userService.user}get userPhone(){for(var n="",t=0;t<this.userService.user.phone.length-2;t++)n+="x";return n+=this.userService.user.phone.substr(this.userService.user.phone.length-2,2)}}E.\u0275fac=function(n){return new(n||E)(e.Y36(a.Ye3))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-user-details"]],decls:24,vars:14,consts:[[1,"prsnl-inf-cntnt"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"material-icons"],[1,"inf-title"],[1,"mdl-cntnt"],[1,"striped"],[4,"ngIf"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"i",4),e._uU(5,"account_balance_wallet"),e.qZA(),e.TgZ(6,"span",5),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",6)(10,"table",7),e.YNc(11,Pt,6,4,"tr",8),e.YNc(12,Ft,6,4,"tr",8),e.YNc(13,Dt,6,4,"tr",8),e.YNc(14,Jt,6,4,"tr",8),e.YNc(15,Qt,6,4,"tr",8),e.TgZ(16,"tr")(17,"td"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA()(),e.YNc(22,Yt,6,4,"tr",8),e.YNc(23,Rt,6,4,"tr",8),e.qZA()()()()),2&n&&(e.xp6(7),e.Oqu(e.lcZ(8,10,"TEXTS.PERSONAL_INFORMATION")),e.xp6(4),e.Q6J("ngIf",t.userInfo.firstName&&"topicbet"!==t.traderName),e.xp6(1),e.Q6J("ngIf",t.userInfo.secondname&&"topicbet"!==t.traderName),e.xp6(1),e.Q6J("ngIf",t.userInfo.surname&&"topicbet"!==t.traderName),e.xp6(1),e.Q6J("ngIf",t.userInfo.birthDate&&"topicbet"!==t.traderName),e.xp6(1),e.Q6J("ngIf",t.userInfo.identity&&"topicbet"!==t.traderName),e.xp6(3),e.Oqu(e.lcZ(19,12,"FIELDS.PHONE")),e.xp6(3),e.Oqu(t.userPhone),e.xp6(1),e.Q6J("ngIf",t.userInfo.cityName&&"topicbet"!==t.traderName),e.xp6(1),e.Q6J("ngIf",t.userInfo.identity&&"topicbet"!==t.traderName))},dependencies:[m.O5,g.X$],encapsulation:2});var kt=d(82795),$t=d(36053),Gt=d(23981),Xt=d(18393),Bt=d(42056);function Kt(i,n){1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TEXTS.VERIFIED")))}function Vt(i,n){1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TEXTS.NOT_VERIFIED")))}function Ht(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"button",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.openSMSModal())}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"LINKS.VERIFY")))}const jt=function(i){return{param0:i}},zt=function(i){return{"fa-spin":i}};function Wt(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"i",4),e._uU(5,"supervisor_account"),e.qZA(),e.TgZ(6,"label",5),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"table",8)(12,"tbody")(13,"tr")(14,"td"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.YNc(17,Kt,3,3,"td",0),e.YNc(18,Vt,3,3,"td",0),e.YNc(19,Ht,4,3,"td",0),e.qZA()()()()()(),e.TgZ(20,"div",9)(21,"div",2)(22,"div",10)(23,"div",11),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.closeSMSModal())}),e.TgZ(24,"a"),e._UZ(25,"i",12),e.qZA()()()(),e.TgZ(26,"div",13)(27,"div",14)(28,"b"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"form",15),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.sendSMSCode(s.smsForm))}),e.TgZ(32,"div",16),e._UZ(33,"input",17),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"div",16)(36,"button",18),e._uU(37),e.ALo(38,"translate"),e.qZA()()()(),e.TgZ(39,"div",19)(40,"span",20),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"a",21),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.reSendSMSToMyPhone())}),e._uU(44),e.ALo(45,"translate"),e._UZ(46,"i",22),e.qZA()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(7),e.Oqu(e.lcZ(8,16,"TEXTS.PHONE_VERIFIED")),e.xp6(8),e.Oqu(e.lcZ(16,18,"TEXTS.PHONE_VERIFIED")),e.xp6(2),e.Q6J("ngIf",t.isPhoneVerified),e.xp6(1),e.Q6J("ngIf",!t.isPhoneVerified),e.xp6(1),e.Q6J("ngIf",!t.isPhoneVerified),e.xp6(1),e.Q6J("materializeActions",t.mobileVerificationActions)("materializeParams",t.mobileVerificationParams),e.xp6(9),e.Oqu(e.lcZ(30,20,"TEXTS.TYPE_SMS_PASSWORD_DESC")),e.xp6(2),e.Q6J("formGroup",t.smsForm),e.xp6(2),e.s9C("placeholder",e.lcZ(34,22,"TEXTS.SMS_PASSWORD")),e.Q6J("formControl",t.smsForm.controls.smsCode),e.xp6(3),e.Q6J("disabled",t.smsForm.invalid),e.xp6(1),e.Oqu(e.lcZ(38,24,"LINKS.FINISH_TRANSACTION")),e.xp6(4),e.Oqu(e.xi3(42,26,"MESSAGES.REMANING_SECONDS",e.VKq(31,jt,t.remainingTime))),e.xp6(3),e.hij(" ",e.lcZ(45,29,"LINKS.SEND_AGAIN_SMS_PASSWORD")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(33,zt,t.remainingTime>0))}}u.N.map.phoneVerify;class M{constructor(n,t,o,s,r,l){this.fb=n,this.smsVerificationService=t,this.translateService=o,this.toastFactory=s,this.traderService=r,this.userService=l,this.mobileVerificationActions=new e.vpe,this.mobileVerificationParams=[{dismissible:!0,ready:()=>this.readySMSModal()}],this.initialTime=0,this.remainingTime=0,this.reSendInProgress=!1,this.destroyed$=new S.xQ,this.smsForm=n.group({smsCode:new c.NI("",[c.kI.required,c.kI.minLength(6),c.kI.maxLength(6)])})}ngOnInit(){this.trader=this.traderService.trader,this.isRegSMSNeeded=this.trader.regSMS}ngAfterViewInit(){this.userService.getCurrentCustomer(!0).then(n=>{this.isPhoneVerified=n.isPhoneVerified,this.userService.refreshBalance()}).catch(n=>!1)}openSMSModal(){this.mobileVerificationActions.emit({action:"modal",params:["open"]})}readySMSModal(){this.sendSMSToMyPhone()}closeSMSModal(){this.mobileVerificationActions.emit({action:"modal",params:["close"]})}sendSMSToMyPhone(){this.reSendInProgress=!0;const n={requestBody:{username:this.user.username}};this.smsVerificationService.resendActivationSms(n).then(t=>{this.reSendInProgress=!1,this.initialTime=t||60,this.remainingTime=t||60,this.countdown()}).catch(t=>{this.reSendInProgress=!1;const o=t.error.responseCodes[0].responseKey;"SMS_CODE_NOT_TIMED_OUT_YET"===o&&(this.initialTime=t.data||60,this.remainingTime=t.data||60,this.countdown()),this.translateService.get("MESSAGES."+o).pipe((0,_.R)(this.destroyed$)).subscribe(s=>{this.toastFactory.error(s)})})}reSendSMSToMyPhone(){this.remainingTime>0||this.reSendInProgress||this.sendSMSToMyPhone()}sendSMSCode(n){const t={requestBody:{smsCode:n.value.smsCode,username:this.user.username}};this.smsVerificationService.sendActivationSmsCheck(t).then(o=>{this.mobileVerificationActions.emit({action:"modal",params:["close"]}),this.translateService.get("MESSAGES.SUCCESS").pipe((0,_.R)(this.destroyed$)).subscribe(s=>{this.toastFactory.success(s)}),this.isPhoneVerified=!0}).catch(o=>{"SMS_CODE_TIMED_OUT"===o.error.responseCodes[0].responseKey?this.translateService.get("MESSAGES.SMS_CODE_TIMED_OUT",{param0:this.initialTime}).pipe((0,_.R)(this.destroyed$)).subscribe(s=>{this.toastFactory.error(s)}):this.translateService.get("MESSAGES."+o.error.responseCodes[0].responseKey).pipe((0,_.R)(this.destroyed$)).subscribe(s=>{this.toastFactory.error(s)})})}countdown(){const n=setInterval(()=>{if(this.remainingTime<=0)return clearInterval(n);this.remainingTime--},1e3)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}M.\u0275fac=function(n){return new(n||M)(e.Y36(c.qu),e.Y36(a.El7),e.Y36(g.sK),e.Y36(a.Uwl),e.Y36(a._W6),e.Y36(a.Ye3))},M.\u0275cmp=e.Xpm({type:M,selectors:[["phone-verify"]],inputs:{user:"user",customer:"customer"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"material-icons"],[1,"inf-title"],[1,"mdl-cntnt"],[1,"cntnt"],[1,"striped"],["id","mobileVerificationModal","materialize","modal",1,"sms-verification","modal","modal-sm","open","dshbrd-modal",3,"materializeActions","materializeParams"],[1,"header-content"],[1,"modal-close-button",3,"click"],[1,"fa","fa-times","right"],[1,"modal-content"],[1,"modul-content"],[3,"formGroup","ngSubmit"],[1,"input-field"],["name","smsCode","type","password","required","","maxlength","6",1,"browser-default",3,"formControl","placeholder"],["type","submit",1,"btn",3,"disabled"],[1,"remaning-time-cntnt","w100","inline-block"],[1,"remaning-time"],["href","javascript:;",1,"right",3,"click"],[1,"fa","fa-refresh","fa-fw",3,"ngClass"],[1,"btn",3,"click"]],template:function(n,t){1&n&&e.YNc(0,Wt,47,35,"ng-container",0),2&n&&e.Q6J("ngIf",t.isRegSMSNeeded)},dependencies:[m.mk,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.oH,c.sg,Q.M,g.X$],encapsulation:2});var ei=d(3429),ti=d(24064),A=function(i,n,t,o){return new(t||(t=Promise))(function(r,l){function p(f){try{N(o.next(f))}catch(U){l(U)}}function h(f){try{N(o.throw(f))}catch(U){l(U)}}function N(f){f.done?r(f.value):function s(r){return r instanceof t?r:new t(function(l){l(r)})}(f.value).then(p,h)}N((o=o.apply(i,n||[])).next())})};function ii(i,n){1&i&&(e.TgZ(0,"div",11),e._UZ(1,"i",12),e.qZA())}function ni(i,n){if(1&i&&e._UZ(0,"message-box",13),2&i){const t=e.oxw();e.Q6J("content",t.kycMessage)}}function oi(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.user.currency.currencyCode)}}function si(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.NAME")),e.xp6(3),e.hij("",t.customer.firstName," ")}}function ri(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.SECOND_NAME")),e.xp6(3),e.hij("",t.customer.secondName," ")}}function ai(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.LAST_NAME")),e.xp6(3),e.Oqu(t.customer.surname)}}function ci(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"secretDate"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.BIRTH_DATE")),e.xp6(3),e.Oqu(e.lcZ(6,4,t.customer.birthdate))}}function li(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"secret"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.IDENTITY")),e.xp6(3),e.Oqu(e.xi3(6,4,t.customer.identity,1))}}function _i(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"secret"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.PHONE")),e.xp6(3),e.Oqu(e.xi3(6,4,t.customer.phone,3))}}function di(i,n){if(1&i&&(e.TgZ(0,"tr",16)(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.GENDER")),e.xp6(3),e.Oqu(t.user.gender)}}function mi(i,n){1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TEXTS.OTHER")))}function ui(i,n){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.user.countryAbbrvt)}}function pi(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,mi,3,3,"td",9),e.YNc(5,ui,2,1,"td",9),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"TEXTS.COUNTRY")),e.xp6(2),e.Q6J("ngIf",t.otherCountryDisplayed),e.xp6(1),e.Q6J("ngIf",!t.otherCountryDisplayed)}}function gi(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.CITY")),e.xp6(3),e.Oqu(t.user.cityName||"-")}}function fi(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"FIELDS.ADDRESS")),e.xp6(3),e.Oqu(t.customer.address)}}function hi(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"table",14)(2,"tbody")(3,"tr")(4,"td"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()(),e.TgZ(9,"tr")(10,"td"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"secret"),e.qZA()(),e.TgZ(16,"tr")(17,"td"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"td"),e.YNc(21,oi,2,1,"span",9),e.qZA()(),e.TgZ(22,"tr")(23,"td"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA()(),e.YNc(28,si,6,4,"tr",9),e.YNc(29,ri,6,4,"tr",9),e.YNc(30,ai,6,4,"tr",9),e.YNc(31,ci,7,6,"tr",9),e.YNc(32,li,7,7,"tr",9),e.YNc(33,_i,7,7,"tr",9),e.YNc(34,di,6,4,"tr",15),e.YNc(35,pi,6,5,"tr",9),e.YNc(36,gi,6,4,"tr",9),e.YNc(37,fi,6,4,"tr",9),e.qZA()(),e.BQk()),2&i){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,18,"FIELDS.USERNAME")),e.xp6(3),e.Oqu(t.user.username),e.xp6(3),e.Oqu(e.lcZ(12,20,"TEXTS.EMAIL")),e.xp6(3),e.Oqu(e.xi3(15,22,t.customer.email,3)),e.xp6(4),e.Oqu(e.lcZ(19,25,"FIELDS.CURRENCY")),e.xp6(3),e.Q6J("ngIf",t.user&&t.user.currency),e.xp6(3),e.Oqu(e.lcZ(25,27,"TEXTS.CUSTOMER_NUMBER")),e.xp6(3),e.Oqu(t.user.code),e.xp6(1),e.Q6J("ngIf",t.customer.firstName),e.xp6(1),e.Q6J("ngIf",t.customer.secondName),e.xp6(1),e.Q6J("ngIf",t.customer.surname),e.xp6(1),e.Q6J("ngIf",t.customer.birthdate),e.xp6(1),e.Q6J("ngIf",t.customer.identity),e.xp6(1),e.Q6J("ngIf",t.customer.phone),e.xp6(1),e.Q6J("ngIf",t.user.gender),e.xp6(1),e.Q6J("ngIf",t.user.countryAbbrvt),e.xp6(1),e.Q6J("ngIf",t.user.cityName),e.xp6(1),e.Q6J("ngIf",t.customer.address)}}function Si(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"birthdate-input",36),e.BQk()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("birthdate",t.updateForm.controls.birthdate)("min",18)("max",100)}}function Ti(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"input",37),e.NdJ("intlTelInputObject",function(s){e.CHM(t);const r=e.oxw(4);return e.KtG(r.setPhoneInstance(s,!0))})("hasError",function(s){e.CHM(t);const r=e.oxw(4);return e.KtG(r.setPhoneInstanceError(s,!0))})("countryChange",function(s){e.CHM(t);const r=e.oxw(4);return e.KtG(r.setPhoneCountry(s))}),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.s9C("required",t.required),e.s9C("id",t.name),e.Q6J("ng2TelInputOptions",o.phoneOptions)("type",t.inputType||"text")("formControl",o.updateForm.controls[t.name])}}function xi(i,n){1&i&&(e.TgZ(0,"span",41),e._uU(1,"+"),e.qZA())}const Ai=function(i){return{"other-country-phone":i}};function vi(i,n){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,xi,2,0,"span",39),e._UZ(2,"input",40),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.Q6J("ngClass",e.VKq(6,Ai,!!t.isEditable&&o.otherCountryDisplayed)),e.xp6(1),e.Q6J("ngIf",!!t.isEditable&&o.otherCountryDisplayed),e.xp6(1),e.s9C("required",t.required),e.s9C("id",t.name),e.Q6J("type",t.inputType||"text")("formControl",o.updateForm.controls[t.name])}}function Ci(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"input",42),e.NdJ("intlTelInputObject",function(s){e.CHM(t);const r=e.oxw(4);return e.KtG(r.setPhoneInstance(s,!1))})("hasError",function(s){e.CHM(t);const r=e.oxw(4);return e.KtG(r.setPhoneInstanceError(s,!1))}),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.s9C("id",t.name),e.s9C("required",t.required),e.Q6J("ng2TelInputOptions",o.phoneOptions)("type",t.inputType||"text")("formControl",o.updateForm.controls[t.name])}}function Zi(i,n){1&i&&(e.TgZ(0,"span",41),e._uU(1,"+"),e.qZA())}const yi=function(i){return{"other-country-second-phone":i}};function Li(i,n){if(1&i&&(e.TgZ(0,"div",38),e.YNc(1,Zi,2,0,"span",39),e._UZ(2,"input",43),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.Q6J("ngClass",e.VKq(6,yi,!!t.isEditable&&o.otherCountryDisplayed)),e.xp6(1),e.Q6J("ngIf",!!t.isEditable&&o.otherCountryDisplayed),e.xp6(1),e.s9C("required",t.required),e.s9C("id",t.name),e.Q6J("type",t.inputType||"text")("formControl",o.updateForm.controls[t.name])}}const Ii=function(i){return{mask:i}};function Ei(i,n){if(1&i&&e._UZ(0,"input",44),2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.s9C("id",t.name),e.s9C("required",t.required),e.Q6J("maxlength",t.max)("type",t.inputType||"text")("formControl",o.updateForm.controls[t.name])("imask",e.VKq(7,Ii,t.mask))("pattern",t.pattern)}}function Mi(i,n){if(1&i&&e._UZ(0,"field-messages",45),2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.s9C("compare-model-name",t.comparisonModel),e.Q6J("pattern-type",t.pattern)("field-errors",o.updateForm.controls[t.name].errors)}}const v=function(i){return{required:i}},R=function(i){return{param0:i}};function qi(i,n){if(1&i&&(e.TgZ(0,"div",29)(1,"span",30),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Si,2,3,"ng-container",9),e.YNc(5,Ti,1,5,"input",31),e.YNc(6,vi,3,8,"div",32),e.YNc(7,Ci,1,5,"input",33),e.YNc(8,Li,3,8,"div",32),e.YNc(9,Ei,1,9,"input",34),e.YNc(10,Mi,1,3,"field-messages",35),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(2);e.Q6J("ngClass",e.VKq(13,v,t.required)),e.xp6(1),e.Q6J("ngClass",e.VKq(15,v,t.required)),e.xp6(1),e.Oqu(e.xi3(3,10,"FIELDS."+t.key,e.VKq(17,R,t.keyParam))),e.xp6(2),e.Q6J("ngIf","birthdate"===t.name),e.xp6(1),e.Q6J("ngIf","phone"===t.name&&!!t.isEditable&&!o.otherCountryDisplayed),e.xp6(1),e.Q6J("ngIf","phone"===t.name&&(!t.isEditable||o.otherCountryDisplayed)),e.xp6(1),e.Q6J("ngIf","secondPhone"===t.name&&!!t.isEditable&&!o.otherCountryDisplayed),e.xp6(1),e.Q6J("ngIf","secondPhone"===t.name&&(!t.isEditable||o.otherCountryDisplayed)),e.xp6(1),e.Q6J("ngIf","phone"!==t.name&&"secondPhone"!==t.name&&"birthdate"!==t.name),e.xp6(1),e.Q6J("ngIf",o.updateForm.controls[t.name].errors&&o.updateForm.controls[t.name].dirty)}}function Oi(i,n){1&i&&(e.TgZ(0,"option",52),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TEXTS.OTHER")))}function bi(i,n){1&i&&(e.TgZ(0,"option",52),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"FIELDS.SELECT")))}function Ni(i,n){if(1&i&&(e.TgZ(0,"option",54),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=n.$implicit;e.s9C("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,"FIELDS."+t.key))}}function Ui(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Ni,3,4,"option",53),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",t.options)}}function wi(i,n){if(1&i&&(e.TgZ(0,"option",54),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.s9C("value",t.value),e.xp6(1),e.Oqu(t.key)}}function Pi(i,n){if(1&i&&e.YNc(0,wi,2,2,"option",53),2&i){const t=e.oxw(2).$implicit;e.Q6J("ngForOf",t.options)}}function Fi(i,n){if(1&i&&e._UZ(0,"field-messages",45),2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.s9C("compare-model-name",t.comparisonModel),e.Q6J("pattern-type",t.pattern)("field-errors",o.updateForm.controls[t.name].errors)}}function Di(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",46),e.ynx(1,47),e.NdJ("fetchSelectData",function(s){e.CHM(t);const r=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.getSelectOptions(s,r.name))}),e.TgZ(2,"span",30),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"select",48),e.NdJ("change",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.onChangeMethodRunner(s.onChangeMethodForUpdate))}),e.YNc(6,Oi,3,3,"option",49),e.YNc(7,bi,3,3,"option",49),e.YNc(8,Ui,2,1,"ng-container",50),e.YNc(9,Pi,1,1,"ng-template",null,51,e.W1O),e.qZA(),e.BQk(),e.YNc(11,Fi,1,3,"field-messages",35),e.qZA()}if(2&i){const t=e.MAs(10),o=e.oxw().$implicit,s=e.oxw(2);e.Q6J("ngClass",e.VKq(14,v,o.required)),e.xp6(1),e.s9C("get-select-opt",o.name),e.xp6(1),e.Q6J("ngClass",e.VKq(16,v,o.required)),e.xp6(1),e.Oqu(e.lcZ(4,12,"FIELDS."+o.key)),e.xp6(2),e.s9C("id",o.name),e.Q6J("required",o.required)("formControl",s.updateForm.controls[o.name]),e.xp6(1),e.Q6J("ngIf",s.otherCountryDisplayed),e.xp6(1),e.Q6J("ngIf",!s.otherCountryDisplayed),e.xp6(1),e.Q6J("ngIf",o.static)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",s.updateForm.controls[o.name].errors&&s.updateForm.controls[o.name].dirty)}}function Ji(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",59),e._UZ(2,"input",60),e.TgZ(3,"label",61),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.BQk()),2&i){const t=n.$implicit,o=e.oxw(2).$implicit,s=e.oxw(2);e.xp6(2),e.Q6J("id","option"+t.value)("formControl",s.updateForm.controls[o.name])("value",t.value)("name",o.name),e.xp6(1),e.Q6J("for","option"+t.value),e.xp6(1),e.Oqu(e.lcZ(5,6,"FIELDS."+t.key))}}function Qi(i,n){if(1&i&&e._UZ(0,"field-messages",62),2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.Q6J("field-errors",o.updateForm.controls[t.name].errors)}}function Yi(i,n){if(1&i&&(e.TgZ(0,"div",55)(1,"div",56)(2,"span",19),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",57),e.YNc(6,Ji,6,8,"ng-container",18),e.qZA(),e.YNc(7,Qi,1,1,"field-messages",58),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(2);e.Q6J("ngClass",e.VKq(7,v,t.required)),e.xp6(3),e.Oqu(e.xi3(4,4,"FIELDS."+t.key,e.VKq(9,R,t.keyParam))),e.xp6(3),e.Q6J("ngForOf",t.options),e.xp6(1),e.Q6J("ngIf",o.updateForm.controls[t.name].errors&&o.updateForm.controls[t.name].dirty)}}function Ri(i,n){1&i&&e._UZ(0,"span",67)}function ki(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"a",69),e.NdJ("click",function(s){e.CHM(t);const r=e.oxw(3).$implicit,l=e.oxw(2);return e.KtG(l.openGenericModal(s,r.link.key))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.hij("",e.lcZ(2,1,"TEXTS."+t.link.label)," ")}}function $i(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.YNc(3,ki,3,3,"a",68),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,2,"TEXTS."+t.key)," "),e.xp6(2),e.Q6J("ngIf",!!t.link)}}function Gi(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"a",69),e.NdJ("click",function(s){e.CHM(t);const r=e.oxw(3).$implicit,l=e.oxw(2);return e.KtG(l.openGenericModal(s,r.link2.key))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" , ",e.lcZ(2,1,"TEXTS."+t.link2.label)," ")}}function Xi(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Gi,3,3,"a",68),e._uU(2),e.ALo(3,"translate"),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",!!t.link2),e.xp6(1),e.hij(" ",e.lcZ(3,2,"TEXTS."+t.key2),"")}}function Bi(i,n){if(1&i&&e._UZ(0,"field-messages",70),2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.Q6J("pattern-type",t.pattern)("field-errors",o.updateForm.controls[t.name].errors)}}function Ki(i,n){if(1&i&&(e.TgZ(0,"div",63),e._UZ(1,"input",64),e.TgZ(2,"label",61),e.YNc(3,Ri,1,0,"span",65),e.YNc(4,$i,4,4,"ng-container",9),e.YNc(5,Xi,4,4,"ng-container",9),e.qZA(),e.YNc(6,Bi,1,2,"field-messages",66),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.s9C("name",t.name),e.s9C("id",t.value),e.s9C("required",t.required),e.Q6J("formControl",o.updateForm.controls[t.name]),e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.Q6J("ngIf",t.required),e.xp6(1),e.Q6J("ngIf",t.key),e.xp6(1),e.Q6J("ngIf",t.key2),e.xp6(1),e.Q6J("ngIf",o.updateForm.controls[t.name].errors&&o.updateForm.controls[t.name].dirty)}}function Vi(i,n){if(1&i&&e._UZ(0,"field-messages",45),2&i){const t=e.oxw(2).$implicit,o=e.oxw(2);e.s9C("compare-model-name",t.comparisonModel),e.Q6J("pattern-type",t.pattern)("field-errors",o.updateForm.controls[t.name].errors)}}function Hi(i,n){if(1&i&&(e.TgZ(0,"div",71)(1,"span",30),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"textarea",72),e._uU(5,"                "),e.qZA(),e.YNc(6,Vi,1,3,"field-messages",35),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(2);e.Q6J("ngClass",e.VKq(10,v,t.required)),e.xp6(1),e.Q6J("ngClass",e.VKq(12,v,t.required)),e.xp6(1),e.Oqu(e.xi3(3,7,"FIELDS."+t.key,e.VKq(14,R,t.keyParam))),e.xp6(2),e.s9C("id",t.name),e.Q6J("maxlength",t.max)("formControl",o.updateForm.controls[t.name]),e.xp6(2),e.Q6J("ngIf",o.updateForm.controls[t.name].errors&&o.updateForm.controls[t.name].dirty)}}function ji(i,n){if(1&i&&(e.ynx(0),e.YNc(1,qi,11,19,"div",24),e.YNc(2,Di,12,18,"div",25),e.YNc(3,Yi,8,11,"div",26),e.YNc(4,Ki,7,9,"div",27),e.YNc(5,Hi,7,16,"div",28),e.BQk()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",0===t.type||6===t.type),e.xp6(1),e.Q6J("ngIf",1===t.type),e.xp6(1),e.Q6J("ngIf",2===t.type),e.xp6(1),e.Q6J("ngIf",7===t.type),e.xp6(1),e.Q6J("ngIf",3===t.type)}}function zi(i,n){1&i&&(e.TgZ(0,"div",11),e._UZ(1,"i",12),e.qZA())}const Wi=function(i){return["/",i,"dashboard","user-info","limit-settings"]};function en(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",17),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.updateCustomer(s.updateForm))}),e.YNc(2,ji,6,5,"ng-container",18),e.TgZ(3,"div")(4,"span",19),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",20)(8,"a",21),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",22)(12,"button",23),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.YNc(15,zi,2,0,"div",7),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.updateForm),e.xp6(1),e.Q6J("ngForOf",t.fields),e.xp6(3),e.Oqu(e.lcZ(6,8,"TEXTS.SELF_LIMITS")),e.xp6(3),e.Q6J("routerLink",e.VKq(14,Wi,t.currentLang)),e.xp6(1),e.Oqu(e.lcZ(10,10,"TEXTS.LIMIT_SETTINGS")),e.xp6(3),e.Q6J("disabled",!t.updateForm.valid||t.inProgressForm||t.isUpdatedCustomer||!t.updateForm.touched),e.xp6(1),e.Oqu(e.lcZ(14,12,"LINKS.UPDATE_INFORMATION")),e.xp6(2),e.Q6J("ngIf",t.inProgressForm)}}function tn(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"message-box",13),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("content",t.message)}}function nn(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"message-box",73),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("content",t.message)}}function on(i,n){1&i&&e._UZ(0,"app-documents")}u.N.map.personalAndAccountDetail;class q{constructor(n,t,o,s,r,l,p,h){this.personalAndAccountService=n,this.personalAndAccountFactory=t,this.userService=o,this.translateService=s,this.traderService=r,this.modalService=l,this.toastFactory=p,this.customValidationService=h,this.hasError=!1,this.inProgress=!0,this.inProgressForm=!1,this.isUpdatedCustomer=!1,this.isForm=!1,this.phoneOptions={preferredCountries:u.N.trader.preferredCountriesPhone.length?u.N.trader.preferredCountriesPhone:[u.N.trader.defaultLang.code],onlyCountries:u.N.trader.forcedPhoneCountry.length?u.N.trader.forcedPhoneCountry:[],separateDialCode:!0,nationalMode:!0},this.debounceIdentity=(0,kt.Z)(this.getIdentityTypes,1e3,{leading:!1,trailing:!0}),this.kycMessage=null,this.updateCustomerModel=new a.qPv,this.displayOthrContryOpt=!1,this.otherCountry=!1,this.otherCountryDisplayed=!1,this.destroyed$=new S.xQ,this.firstInit=!0,this.countries=[]}ngOnInit(){return A(this,void 0,void 0,function*(){this.currentLang=this.translateService.currentLang,this.gliVerification=this.traderService.trader.gliUpdateCustVerification,this.tKYCON=this.traderService.trader.tKYCON,this.displayOthrContryOpt=!!this.traderService.trader.hideCustomerCountry,this.user=this.userService.user,(0,$t.aj)([this.personalAndAccountService.fetchCustomerDetailsStore$,this.personalAndAccountService.fetchCountriesStore$]).pipe((0,_.R)(this.destroyed$)).subscribe(([n,t])=>A(this,void 0,void 0,function*(){t.data&&(this.countries=t.data),n.data&&(this.customer=n.data,this.firstInit&&(this.otherCountry=!!this.customer.hasHiddenCountry,this.otherCountryDisplayed=this.displayOthrContryOpt&&this.otherCountry,this.isForm=this.gliVerification||!this.customer.hasUpdatedDetail||this.user.minimal,this.fields=yield this.personalAndAccountFactory.getUpdateFields(this.user.minimal),this.updateForm=yield this.personalAndAccountFactory.getUpdateFormGroup(this.fields,this.customer,this.user),this.displayOthrContryOpt&&this.updateForm.controls.countryId.disable(),this.setKycStatus()),this.firstInit=!1),this.inProgress=t.loading,this.inProgressForm=n.loading})),this.personalAndAccountService.updateCustomerInformationStore$.pipe((0,_.R)(this.destroyed$)).subscribe(n=>A(this,void 0,void 0,function*(){if(n.responseCodes){this.personalAndAccountService.fetchCustomerDetails_v2(),this.user=yield this.userService.getCurrentCustomer(!0);const t=n.responseCodes.find(s=>"WAITING_EMAIL_CODE"===s.responseKey),o=n.responseCodes.find(s=>"WAITING_SMS_CODE"===s.responseKey);if(t||o){this.updateCustomerModel=this.updateForm.value,this.remainingTime=n.data||60,t&&(this.gliEmail=this.user.email),o&&(this.gliPhone=this.user.phone);const s={email:this.gliEmail,phone:this.gliPhone,remainingTime:this.remainingTime,updateCustomerModel:this.updateCustomerModel,username:this.user.username,fromDynamic:!0},r=new a.u_l("gli-verification","sms-mdl",null,0,null,"sms-verification",null,s);this.modalService.modalObserver.next(r)}else{this.hasError=!1,this.isUpdatedCustomer=!0;const s=n.responseCodes[0].responseKey||"SUCCESS";this.translateService.get("MESSAGES."+s).pipe((0,_.R)(this.destroyed$)).subscribe(r=>{this.message=r}),setTimeout(()=>{this.isForm=!1,this.setKycStatus()},3e3)}if(!n.error){this.hasError=!0;const s=n.responseCodes[0].responseKey||"EXCEPTION";this.translateService.get("MESSAGES."+s).pipe((0,_.R)(this.destroyed$)).subscribe(r=>{this.message=r})}}this.inProgressForm=n.loading})),this.personalAndAccountService.fetchCustomerDetails_v2(),this.personalAndAccountService.fetchCountries_v2()})}getIdentityTypes(n){return A(this,void 0,void 0,function*(){const t=this.fields.findIndex(o=>"identityTypeId"===o.name);this.fields[t].options=yield this.personalAndAccountFactory.getIdentityTypes(n)})}setPhoneCountry(n){return A(this,void 0,void 0,function*(){if(!n)return;const t=("GB"===n.iso2?"UK":n.iso2).toLowerCase(),o=this.countries.find(s=>s.code.toLowerCase()===t);o&&(this.updateForm.controls.countryId.disabled||this.updateForm.controls.countryId.setValue(o.countryId))})}getSelectOptions(n,t){return A(this,void 0,void 0,function*(){const o=this.fields.findIndex(r=>r.name===t);if(this.fields[o]&&this.fields[o].static||(this.fields[o].options=yield this.personalAndAccountFactory.getSelectOptions(n),!this.updateForm.controls[n].disabled))return;const s=this.updateForm.controls[n].value;if(s&&"countryId"===n)this.displayOthrContryOpt&&this.otherCountry&&this.translateService.get("TEXTS.OTHER").pipe((0,_.R)(this.destroyed$)).subscribe(r=>{this.fields[o].options.find(l=>l.value===s).key=r}),yield this.countryChange(s)})}countryChange(n){return A(this,void 0,void 0,function*(){const t=this.countries.find(o=>o.countryId===Number(n));t&&(this.updateForm.controls.identity&&("TR"===t.code?this.updateForm.controls.identity.setValidators([c.kI.required,a.$Yw]):this.updateForm.controls.identity.setValidators(null),this.updateForm.controls.identity.updateValueAndValidity(),this.debounceIdentity(t.code)),this.phone&&this.phone.setCountry(t.code),this.updateForm.controls.cpfNumber&&this.setCPFNumberValidation(t.code))})}setPhoneInstance(n,t){t?this.phone=n:this.secondPhone=n}setPhoneInstanceError(n,t){const o=t?"phone":"secondPhone",s=this.fields.find(r=>r.name===o);if(s){if(!n&&this.updateForm.controls[o].value)return void this.updateForm.controls[o].setErrors({invalidPhone:!n});this.updateForm.controls[o].errors||s.required||this.updateForm.controls[o].setErrors(null)}}setCPFNumberValidation(n){"BR"===n?this.updateForm.controls.cpfNumber.setValidators([c.kI.required,this.customValidationService.cpfCustomValidator]):this.updateForm.controls.cpfNumber.setValidators(null),this.updateForm.controls.cpfNumber.updateValueAndValidity()}onChangeMethodRunner(n){const o={customerIdTypeChange:()=>{this.customerIdTypeChange(this.updateForm.get("identityTypeId").value)},countryChange:()=>{this.countryChange(this.updateForm.get("countryId").value)}}[n];o&&o()}customerIdTypeChange(n){const o=this.fields.find(r=>"identityTypeId"===r.name).options.find(r=>Number(r.value)===Number(n));if(!o)return;const s=this.fields.find(r=>"identity"===r.name);s&&(s.pattern=new RegExp(o.pattern))}updateCustomer(n){this.gliVerification?this.updateForm.markAsUntouched():this.inProgressForm=!0,this.personalAndAccountService.updateCustomerInformation(n.value)}setKycStatus(){let n=this.traderService.trader.tKYCON,t=this.user.kycVerified,o=this.traderService.trader.tIgnoreKycWdraw,s=this.user.kycStatus,r=!!n&&!t&&!o;r&&this.isForm?this.kycMessage="MESSAGES.CUSTOMER_KYC_NOT_VERIFIED":this.isForm&&!this.gliVerification?this.kycMessage="MESSAGES.CUSTOMER_INFORMATIONS_SHOULD_BE_UPDATED":this.kycMessage=r?`MESSAGES.CUSTOMER_DOCUMENT_STATUS_${s}`:""}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.personalAndAccountService.clearFetchCustomerDetails$.next(),this.personalAndAccountService.clearFetchCountries$.next(),this.personalAndAccountService.clearUpdateCustomerInformation$.next(),this.personalAndAccountService.clearFetchCustomerDetails$.next(),this.personalAndAccountService.clearFetchCustomerDetails$.next()}}function sn(i,n){1&i&&(e.TgZ(0,"div",13),e._UZ(1,"i",14),e.qZA())}function rn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.YNc(1,sn,2,0,"div",10),e.TgZ(2,"table",11)(3,"tr")(4,"td"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()(),e.TgZ(9,"tr")(10,"td"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"td",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.copyClipboard(s.referenceLink))}),e._uU(14),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.inProgress),e.xp6(4),e.Oqu(e.lcZ(6,5,"FIELDS.REFERENCE_CODE")),e.xp6(3),e.Oqu(t.referenceCode),e.xp6(3),e.Oqu(e.lcZ(12,7,"TEXTS.REFERRAL_LINK")),e.xp6(3),e.Oqu(t.referenceLink)}}function an(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"button",15),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.generateReferenceCode())}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TEXTS.GENERATE_REFERENCE_CODE_AND_REFERRAL_LINK")))}function cn(i,n){1&i&&(e.TgZ(0,"div",13),e._UZ(1,"i",14),e.qZA())}function ln(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.Oqu(t.username),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.lcZ(7,3,t.registerDate))}}function _n(i,n){if(1&i&&(e.TgZ(0,"div",9),e.YNc(1,cn,2,0,"div",10),e.TgZ(2,"table",11)(3,"thead")(4,"tr")(5,"th"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"th"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"th"),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,ln,8,5,"tr",16),e.qZA()()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.inProgress),e.xp6(5),e.Oqu(e.lcZ(7,5,"FIELDS.USERNAME")),e.xp6(3),e.Oqu(e.lcZ(10,7,"FIELDS.NAME")),e.xp6(3),e.Oqu(e.lcZ(13,9,"FIELDS.REGISTER_DATE")),e.xp6(3),e.Q6J("ngForOf",t.referredCustomers)}}function dn(i,n){1&i&&e._UZ(0,"message-box",17)}q.\u0275fac=function(n){return new(n||q)(e.Y36(a._Wf),e.Y36(a.M11),e.Y36(a.Ye3),e.Y36(g.sK),e.Y36(a._W6),e.Y36(a.F$_),e.Y36(a.Uwl),e.Y36(a.KQJ))},q.\u0275cmp=e.Xpm({type:q,selectors:[["app-personal-and-account-detail"]],decls:18,vars:12,consts:[[1,"prsnl-accnt-inf-cntnt"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"material-icons"],[1,"inf-title"],[1,"mdl-cntnt"],["class","progress",4,"ngIf"],["type","error",3,"content",4,"ngIf"],[4,"ngIf"],[3,"customer","user"],[1,"progress"],[1,"indeterminate"],["type","error",3,"content"],[1,"striped"],["class","personel-gender",4,"ngIf"],[1,"personel-gender"],[3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],[1,"field-label"],[1,"browser-default"],[3,"routerLink"],[1,"input-field","clear"],["type","submit",1,"btn","user-edit-btn","right","mar-bottom-10",3,"disabled"],["class","input-field",3,"ngClass",4,"ngIf"],["class","select-field",3,"ngClass",4,"ngIf"],["class","radio-field",3,"ngClass",4,"ngIf"],["class","checkbox-field mar-top-10",4,"ngIf"],["class","textarea-field",3,"ngClass",4,"ngIf"],[1,"input-field",3,"ngClass"],[1,"field-label",3,"ngClass"],["type","text","class","browser-default","ng2TelInput","",3,"ng2TelInputOptions","required","id","type","formControl","intlTelInputObject","hasError","countryChange",4,"ngIf"],["class","flex-container",3,"ngClass",4,"ngIf"],["type","text","class","validate browser-default","ng2TelInput","",3,"ng2TelInputOptions","id","required","type","formControl","intlTelInputObject","hasError",4,"ngIf"],["class","validate browser-default",3,"maxlength","id","type","formControl","imask","pattern","required",4,"ngIf"],[3,"pattern-type","field-errors","compare-model-name",4,"ngIf"],[3,"birthdate","min","max"],["type","text","ng2TelInput","",1,"browser-default",3,"ng2TelInputOptions","required","id","type","formControl","intlTelInputObject","hasError","countryChange"],[1,"flex-container",3,"ngClass"],["class","phone-prefix-sign",4,"ngIf"],["type","text",1,"browser-default","phone-input",3,"required","id","type","formControl"],[1,"phone-prefix-sign"],["type","text","ng2TelInput","",1,"validate","browser-default",3,"ng2TelInputOptions","id","required","type","formControl","intlTelInputObject","hasError"],["type","text",1,"validate","browser-default","second-phone-input",3,"required","id","type","formControl"],[1,"validate","browser-default",3,"maxlength","id","type","formControl","imask","pattern","required"],[3,"pattern-type","field-errors","compare-model-name"],[1,"select-field",3,"ngClass"],[3,"get-select-opt","fetchSelectData"],[1,"browser-default",3,"id","required","formControl","change"],["selected","","value","",4,"ngIf"],[4,"ngIf","ngIfElse"],["dynamic",""],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"radio-field",3,"ngClass"],[1,"radio-hdr","in-form"],[1,"radio-cntnt"],[3,"field-errors",4,"ngIf"],[1,"radio-grp"],["type","radio",1,"with-gap",3,"id","formControl","value","name"],[3,"for"],[3,"field-errors"],[1,"checkbox-field","mar-top-10"],["type","checkbox",1,"filled-in",3,"name","id","formControl","required"],["class","required-icon",4,"ngIf"],[3,"pattern-type","field-errors",4,"ngIf"],[1,"required-icon"],["class","term-and-conditions blue-text",3,"click",4,"ngIf"],[1,"term-and-conditions","blue-text",3,"click"],[3,"pattern-type","field-errors"],[1,"textarea-field",3,"ngClass"],["cols","30","rows","10",1,"validate","browser-default",3,"maxlength","id","formControl"],["type","success",3,"content"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"i",4),e._uU(5,"supervisor_account"),e.qZA(),e.TgZ(6,"label",5),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",6),e.YNc(10,ii,2,0,"div",7),e.YNc(11,ni,1,1,"message-box",8),e.YNc(12,hi,38,29,"ng-container",9),e.YNc(13,en,16,16,"ng-container",9),e.YNc(14,tn,2,1,"ng-container",9),e.YNc(15,nn,2,1,"ng-container",9),e.qZA()()(),e._UZ(16,"phone-verify",10),e.YNc(17,on,1,0,"app-documents",9)),2&n&&(e.xp6(7),e.Oqu(e.lcZ(8,10,"TEXTS.PERSONAL_AND_ACCOUNT_INFORMATION")),e.xp6(3),e.Q6J("ngIf",t.inProgress),e.xp6(1),e.Q6J("ngIf",t.kycMessage),e.xp6(1),e.Q6J("ngIf",!t.isForm&&!t.inProgress),e.xp6(1),e.Q6J("ngIf",t.isForm&&!t.inProgress),e.xp6(1),e.Q6J("ngIf",t.hasError&&t.message),e.xp6(1),e.Q6J("ngIf",!t.hasError&&t.message),e.xp6(1),e.Q6J("customer",t.customer)("user",t.user),e.xp6(1),e.Q6J("ngIf",!!t.tKYCON))},dependencies:[T.rH,m.mk,m.sg,m.O5,c._Y,c.YN,c.Kr,c.Fj,c.Wl,c.EJ,c._,c.JJ,c.JL,c.Q7,c.nD,c.c5,c.Zs,c.oH,c.sg,Gt.o,Xt.E,$.An,D.W,Bt.U,J.Y,x,M,g.X$,ei.u,ti.g],encapsulation:2});u.N.map.friendReferral;class O{constructor(n,t,o,s){this.userService=n,this.translate=t,this.toastFactory=o,this.utilService=s,this.inProgress=!0,this.destroyed$=new S.xQ}ngOnInit(){this.getReferredCustomers()}getReferredCustomers(){this.userService.getReferredCustomers().then(n=>{this.referenceCode=n.referenceCode,this.referredCustomers=n.referredCustomers,this.referenceCode&&(this.referenceLink=this.generateReferenceLink(this.referenceCode)),this.inProgress=!1}).catch(n=>{this.inProgress=!1,this.translate.get("MESSAGES.PLEASE_CONTACT_LIVE_SUPPORT").pipe((0,_.R)(this.destroyed$)).subscribe(t=>{this.toastFactory.error(t)})})}generateReferenceCode(){this.userService.generateReferenceCode().then(n=>{this.referenceCode=n.referenceCode,this.referenceCode&&(this.referenceLink=this.generateReferenceLink(this.referenceCode)),this.inProgress=!1}).catch(n=>{this.inProgress=!1,this.translate.get("MESSAGES.REFERENCE_CODE_GENERATION_ERROR").pipe((0,_.R)(this.destroyed$)).subscribe(t=>{this.toastFactory.error(t)})})}copyClipboard(n){n.result?this.utilService.copyToClipboard(n.result):this.utilService.copyToClipboard(n),this.translate.get("MESSAGES.COPIED").pipe((0,_.R)(this.destroyed$)).subscribe(t=>{this.toastFactory.success(t)})}generateReferenceLink(n){return location.protocol+"//"+location.host+"/"+this.translate.currentLang+`/authentication/signup?referenceCode=${n}`}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}O.\u0275fac=function(n){return new(n||O)(e.Y36(a.Ye3),e.Y36(g.sK),e.Y36(a.Uwl),e.Y36(a.XN8))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-friend-referral"]],decls:22,vars:10,consts:[[1,"accnt-inf-cntnt"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"material-icons"],[1,"inf-title"],["class","mdl-cntnt",4,"ngIf"],[1,"pad-10"],["type","info","content","MESSAGES.NO_REFERRED_FRIENDS",4,"ngIf"],[1,"mdl-cntnt"],["class","progress",4,"ngIf"],[1,"striped"],[3,"click"],[1,"progress"],[1,"indeterminate"],["type","button",1,"btn","btn-submit",2,"width","100%",3,"click"],[4,"ngFor","ngForOf"],["type","info","content","MESSAGES.NO_REFERRED_FRIENDS"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"i",4),e._uU(5,"supervisor_account"),e.qZA(),e.TgZ(6,"span",5),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.YNc(9,rn,15,9,"div",6),e.YNc(10,an,4,3,"div",6),e.qZA(),e.TgZ(11,"div",1)(12,"div",2)(13,"div",3)(14,"i",4),e._uU(15,"supervisor_account"),e.qZA(),e.TgZ(16,"span",5),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.YNc(19,_n,16,11,"div",6),e.TgZ(20,"div",7),e.YNc(21,dn,1,0,"message-box",8),e.qZA()()()),2&n&&(e.xp6(7),e.Oqu(e.lcZ(8,6,"TEXTS.FRIEND_REFERRAL")),e.xp6(2),e.Q6J("ngIf",t.referenceCode),e.xp6(1),e.Q6J("ngIf",!t.referenceCode&&!t.inProgress),e.xp6(7),e.Oqu(e.lcZ(18,8,"TEXTS.REFERRED_FRIENDS")),e.xp6(2),e.Q6J("ngIf",t.referredCustomers&&t.referredCustomers.length>0),e.xp6(2),e.Q6J("ngIf",!(null!=t.referredCustomers&&t.referredCustomers.length||t.inProgress)))},dependencies:[m.sg,m.O5,D.W,m.uU,g.X$],encapsulation:2});const mn=[{path:"user-details",canActivate:[a.m6R],component:E,data:{name:"user-details",meta:"dashboard.userInfo.userDetail"}},{path:"account-details",canActivate:[a.m6R],component:I,data:{name:"account-details",meta:"dashboard.userInfo.accountDetail"}},{path:"limit-settings",component:y,data:{name:"limit-settings",meta:"dashboard.userInfo.limitSettings"}},{path:"change-password",canActivate:[a.m6R],component:L,data:{name:"change-password",meta:"dashboard.userInfo.changePassword"}},{path:"user-settings",canActivate:[a.m6R],component:Z,resolve:{userSettings:a.Ky$},data:{name:"user-settings",meta:"dashboard.userInfo.userSettings"}},{path:"user-security",canActivate:[a.m6R],component:C,resolve:{customerOneTimePasswordSettings:a.Ye8},data:{name:"user-security"}},{path:"documents",canActivate:[a.m6R],component:x,resolve:{docList:a.M4z},data:{name:"documents",meta:"dashboard.userInfo.uploadDocument"}},{path:"personal-and-account-detail",canActivate:[a.m6R],component:q,resolve:{docList:a.M4z},data:{name:"personal-and-account-detail",meta:"dashboard.userInfo.accountDetail"}},{path:"friend-referral",canActivate:[a.m6R],component:O,data:{name:"friend-referral",meta:"dashboard.userInfo.friendReferral"}}],un=T.Bz.forChild(mn);class b{}b.\u0275fac=function(n){return new(n||b)},b.\u0275mod=e.oAB({type:b}),b.\u0275inj=e.cJS({imports:[un,m.ez,B.m]})}}]);