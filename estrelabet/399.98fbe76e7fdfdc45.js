"use strict";(self.webpackChunkdesktop=self.webpackChunkdesktop||[]).push([[399],{90479:(_n,q,p)=>{p.r(q),p.d(q,{PaymentsModule:()=>w});var l=p(36895),d=p(7226),F=p(87034),u=p(7625),x=p(8929),t=p(94650),Z=p(34793),c=p(13313),h=p(32925),M=p(78387);const E=function(n){return{param0:n}};function J(n,o){if(1&n&&(t._UZ(0,"message-box",11),t.ALo(1,"translate")),2&n){const e=t.oxw();t.s9C("content",t.xi3(1,1,"MESSAGES.PAYMENT_SUCCESS_LONG_DESC",t.VKq(4,E,e.paymentName)))}}function Q(n,o){if(1&n&&(t._UZ(0,"message-box",12),t.ALo(1,"translate")),2&n){const e=t.oxw();t.s9C("content",t.xi3(1,1,"MESSAGES.PAYMENT_PENDING_LONG_DESC",t.VKq(4,E,e.paymentName)))}}function Y(n,o){if(1&n&&(t._UZ(0,"message-box",13),t.ALo(1,"translate")),2&n){const e=t.oxw();t.s9C("content",t.xi3(1,1,"MESSAGES.PAYMENT_ERROR_LONG_DESC",t.VKq(4,E,e.paymentName)))}}function W(n,o){if(1&n&&(t._UZ(0,"message-box",13),t.ALo(1,"translate")),2&n){const e=t.oxw();t.s9C("content",t.xi3(1,1,"MESSAGES.PAYMENT_FAIL_LONG_DESC",t.VKq(4,E,e.paymentName)))}}function k(n,o){if(1&n&&(t._UZ(0,"message-box",13),t.ALo(1,"translate")),2&n){const e=t.oxw();t.s9C("content",t.xi3(1,1,"MESSAGES.PAYMENT_CANCEL_LONG_DESC",t.VKq(4,E,e.paymentName)))}}function B(n,o){if(1&n&&t._UZ(0,"message-box",11),2&n){const e=t.oxw(2);t.s9C("content",e.message.message)}}function X(n,o){if(1&n&&t._UZ(0,"message-box",13),2&n){const e=t.oxw(2);t.s9C("content",e.message.message)}}function j(n,o){if(1&n&&(t.ynx(0),t.YNc(1,B,1,1,"message-box",14),t.YNc(2,X,1,1,"message-box",15),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.message.status),t.xp6(1),t.Q6J("ngIf",!e.message.status)}}function $(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value)}}d.N.map.paymentsResult;class f{constructor(o,e,i,a,s,r){this.route=o,this.paymentsModelService=e,this.paymentService=i,this.translateService=a,this.router=s,this.storage=r,this.currentLang="",this.resultParams=[],this.destroyed$=new x.xQ}ngOnInit(){this.redirectPage(),this.currentLang=this.translateService.currentLang,this.paymentName=this.route.snapshot.paramMap.get("paymentName");let o=this.route.snapshot.queryParamMap.params;if("ecopayz_success"===this.paymentName||"ecopayz_error"===this.paymentName)this.status=this.paymentName.split("_")[1],this.paymentName=this.paymentName.split("_")[0];else{if(location.href.indexOf("apcopay")>-1)return void this.initApcopayResult();location.href.indexOf("frbtc")>-1&&this.initFrbtcResult()}this.paymentDepositList=this.paymentsModelService.paymentDepositList,this.payment=this.paymentDepositList.find(e=>e.resultPageUrlPaymentName===this.paymentName),location.search?this.initWithSearchQueryParam(o):this.initPaymentCheckPostModel()}initApcopayResult(){let e=(new DOMParser).parseFromString(this.storage.local.get("apcoXML"),"text/xml"),i=e.getElementsByTagName("Result")[0].childNodes[0].nodeValue,s={param0:e.getElementsByTagName("ORef")[0].childNodes[0].nodeValue};"OK"==i?this.translateService.get("MESSAGES.APCOPAY_DEPOSIT_SUCCESS",s).pipe((0,u.R)(this.destroyed$)).subscribe(r=>{this.message={message:r,status:!0}}):this.translateService.get("MESSAGES.APCOPAY_DEPOSIT_ERROR",s).pipe((0,u.R)(this.destroyed$)).subscribe(r=>{this.message={message:r,status:!1}})}initFrbtcResult(){let e=this.route.snapshot.paramMap.params;if(e.transId){let a={frbtcId:e.transId.replace(":",""),customerAccountMasterType:{code:"S"},bonusId:null,freebetId:null};this.paymentService.paymentResultCheckTransactionStatus("frbtc/doReceiveRequest",a).then(s=>{this.storage.local.set("frbtcFinished",s),this.storage.local.remove("frbtchtml"),window.close()}).catch(s=>{})}else(()=>{let i=this.storage.local.get("frbtchtml"),a=i.replace('<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"><\/script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"><\/script>',"");a=a.replace("body {","body { background: #e6e6e6!important; "),a=a.replace("?PGTransactionID=",":"),document.getElementsByClassName("page-wrap")[0].innerHTML+=i})()}initPaymentCheckPostModel(){let o={},e=this.route.snapshot.paramMap.params;this.setResultParams(e,!0),this.payment.resultPageExtraSequentParams.forEach((i,a)=>{a+=2,"status"===i?(this.status=e["param"+a],e["param"+a].indexOf("success")>-1?this.status="success":this.status="error"):i&&(o[i]=e["param"+a],Number(o[i])&&(o[i]=Number(o[i])))}),this.paymentResultCheckTransactionStatus(o)}paymentResultCheckTransactionStatus(o){this.payment.resultPageCheckUrl&&this.paymentService.paymentResultCheckTransactionStatus(this.payment.resultPageCheckUrl,o).then(e=>{this.status=e.success?"success":"fail",this.translateService.get(e).pipe((0,u.R)(this.destroyed$)).subscribe(i=>{this.message={message:i,status:!0}})}).catch(e=>{this.status="fail",e.responseCodes&&this.translateService.get(e.responseCodes[0].responseMessage).pipe((0,u.R)(this.destroyed$)).subscribe(i=>{this.message={message:i,status:!0}})})}initWithSearchQueryParam(o){this.status=o.tx_status||o.status||status,this.setResultParams(o)}setResultParams(o,e){e?this.payment.resultPageExtraSequentParams.forEach((i,a)=>{let s={key:i,value:o["param"+(a+2)]};this.resultParams.push(s)}):this.resultParams=Object.keys(o).map((i,a)=>({key:i,value:o[i]})),(0,F.Z)(this.resultParams,i=>"status"===i.key),delete this.resultParams.status}redirectPage(){setTimeout(()=>{this.router.navigate([this.currentLang,"dashboard","payments","deposit-money"])},1e4)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}f.\u0275fac=function(o){return new(o||f)(t.Y36(Z.gz),t.Y36(c.jxU),t.Y36(c.sUb),t.Y36(h.sK),t.Y36(Z.F0),t.Y36(c.SwN))},f.\u0275cmp=t.Xpm({type:f,selectors:[["payment-result"]],decls:17,vars:12,consts:[[1,"pymnt-rslt-cntnt"],[3,"ngSwitch"],["type","success","icon","fa fa-exclamation-circle",3,"content",4,"ngSwitchCase"],["type","warning","icon","fa fa-exclamation-circle",3,"content",4,"ngSwitchCase"],["type","error","icon","fa fa-exclamation-circle",3,"content",4,"ngSwitchCase"],[4,"ngIf"],[1,"dshbrd-tbl","white-row"],[4,"ngFor","ngForOf"],["type","info","icon","fa fa-exclamation-circle",3,"content"],[1,"progress"],[1,"indeterminate"],["type","success","icon","fa fa-exclamation-circle",3,"content"],["type","warning","icon","fa fa-exclamation-circle",3,"content"],["type","error","icon","fa fa-exclamation-circle",3,"content"],["type","success","icon","fa fa-exclamation-circle",3,"content",4,"ngIf"],["type","error","icon","fa fa-exclamation-circle",3,"content",4,"ngIf"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"h5"),t._uU(2),t.qZA(),t.ynx(3,1),t.YNc(4,J,2,6,"message-box",2),t.YNc(5,Q,2,6,"message-box",3),t.YNc(6,Y,2,6,"message-box",4),t.YNc(7,W,2,6,"message-box",4),t.YNc(8,k,2,6,"message-box",4),t.BQk(),t.YNc(9,j,3,2,"ng-container",5),t.TgZ(10,"table",6)(11,"tbody"),t.YNc(12,$,5,2,"tr",7),t.qZA()(),t._UZ(13,"message-box",8),t.ALo(14,"translate"),t.TgZ(15,"div",9),t._UZ(16,"div",10),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(e.paymentName.toUpperCase()),t.xp6(1),t.Q6J("ngSwitch",e.status),t.xp6(1),t.Q6J("ngSwitchCase","success"),t.xp6(1),t.Q6J("ngSwitchCase","pending"),t.xp6(1),t.Q6J("ngSwitchCase","error"),t.xp6(1),t.Q6J("ngSwitchCase","fail"),t.xp6(1),t.Q6J("ngSwitchCase","cancel"),t.xp6(1),t.Q6J("ngIf","apcopay"===e.paymentName&&!!e.message),t.xp6(3),t.Q6J("ngForOf",e.resultParams),t.xp6(1),t.s9C("content",t.lcZ(14,10,"MESSAGES.REDIRECTING")))},dependencies:[l.sg,l.O5,l.RF,l.n9,M.W,h.X$],encapsulation:2});var P=p(73548),V=p(93307),K=p(14141),L=p(15872),G=p(46853),H=p(43384),z=p(27501),_=p(24006);function tt(n,o){if(1&n&&(t.TgZ(0,"option",9),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.accountTitle),t.xp6(1),t.Oqu(e.accountTitle)}}function et(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"select",5),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.wa=a)})("change",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.setAccountToForm(a,s.wa))}),t.TgZ(8,"option",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.YNc(11,tt,2,2,"option",7),t.qZA(),t._UZ(12,"div",8),t.BQk()}if(2&n){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,4,"TEXTS.SAVED_WITHDRAW_ACCOUNT_OPTIONS")),t.xp6(2),t.Q6J("ngModel",e.wa),t.xp6(2),t.Oqu(t.lcZ(10,6,"FIELDS.SELECT_WITHDRAW_SAVED_ACCOUNTS")),t.xp6(2),t.Q6J("ngForOf",e.withdrawAccounts)}}d.N.map.withdrawMethods;class C{constructor(o){this.paymentService=o,this.waChange=new t.vpe,this.wa="select",this.clearMethodsSubs=this.paymentService.clearMethods.subscribe(()=>{this.clearSavedAccount()})}ngOnInit(){this.getPaymentTypes()}ngOnDestroy(){this.clearMethodsSubs.unsubscribe()}getPaymentTypes(){const o=setInterval(()=>{if(typeof this.paymentTypes<"u"){let e;clearInterval(o);for(const i in this.withdrawAccounts){this.paymentTypes.find(s=>{if("bankTransfer"!==s.type)return s.commonCode===this.withdrawAccounts[i].commonCode;e=s.childPaymentTypes.find(r=>r.commonCode===this.withdrawAccounts[i].commonCode)})}this.preparing=!0}},700)}setAccountToForm(o,e){if("select"!==e){const i=this.withdrawAccounts.find(r=>r.accountTitle===e);let a,s;for(const r in this.paymentTypes)if("bankTransfer"!==this.paymentTypes[r].type)this.paymentTypes[r].commonCode===i.commonCode&&(a=this.paymentTypes[r],a.savedWithdrawAccountsData=i);else for(const m in this.paymentTypes[r].childPaymentTypes)this.paymentTypes[r].childPaymentTypes[m].commonCode===i.commonCode&&(s=this.paymentTypes[r].childPaymentTypes[m],a=this.paymentTypes[r],a.savedWithdrawAccountsData=i,s.savedWithdrawAccountsData=i);this.waChange.emit(a),typeof s<"u"&&setTimeout(()=>{this.paymentService._justTransferMethods.next(s)},300)}}clearSavedAccount(){this.wa="select",this.paymentTypes.filter(o=>o.savedWithdrawAccountsData).map(o=>delete o.savedWithdrawAccountsData)}}C.\u0275fac=function(o){return new(o||C)(t.Y36(c.sUb))},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-withdraw-methods"]],inputs:{withdrawAccounts:"withdrawAccounts",paymentTypes:"paymentTypes"},outputs:{waChange:"waChange"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"mdl-hdr","mar-bottom-10"],[1,"inf-hdr"],["aria-hidden","true",1,"fa","fa-archive"],[1,"inf-title"],[1,"col","s4","browser-default",3,"ngModel","ngModelChange","change"],["value","select","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"clearfix"],[3,"value"]],template:function(o,e){1&o&&t.YNc(0,et,13,8,"ng-container",0),2&o&&t.Q6J("ngIf",e.preparing)},dependencies:[l.sg,l.O5,_.YN,_.Kr,_.EJ,_.JJ,_.On,h.X$],encapsulation:2});var nt=p(11481);function ot(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"iframe",1),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.source,t.uOi)}}d.N.map.paymentIframe;class S{constructor(o,e,i,a){this.sanitizer=o,this.paymentService=e,this.translate=i,this.paymentFormControlService=a}ngOnInit(){const o=this.paymentFormControlService.generatePaymentRequestModel({value:{}},this.payment,null);this.paymentService.submitPayment(o,this.payment.endpoint).then(e=>{this.source=this.getIframeSource(e)}).catch(e=>{})}getIframeSource(o){switch(this.payment.commonCode){case"paymentiq-platform-deposit":case"paymentiq-platform-withdrawal":return this.getPaymentIQUrl(o);default:return this.sanitizer.bypassSecurityTrustResourceUrl(o.data)}}getPaymentIQUrl(o){return this.sanitizer.bypassSecurityTrustResourceUrl(o.data)}}S.\u0275fac=function(o){return new(o||S)(t.Y36(nt.H7),t.Y36(c.sUb),t.Y36(h.sK),t.Y36(c.suK))},S.\u0275cmp=t.Xpm({type:S,selectors:[["payment-iframe"]],inputs:{payment:"payment"},decls:1,vars:1,consts:[[4,"ngIf"],["id","sizetracker","frameborder","0","width","100%","height","1000px",3,"src"]],template:function(o,e){1&o&&t.YNc(0,ot,2,1,"ng-container",0),2&o&&t.Q6J("ngIf",e.source)},dependencies:[l.O5],encapsulation:2});var it=p(70564);function at(n,o){1&n&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.DEPOSIT")))}function st(n,o){1&n&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.WITHDRAW")))}function rt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"waiting-transactions",27),t.NdJ("cancelTransactionEvent",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.getCustomerTransactions(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("latestTransaction",e.unCompletedTransaction)}}function ct(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGES.MONEY_DEPOSIT_DESCRIPTION")))}function pt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t.TgZ(4,"metamap-button",28),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.getidNowUrl())}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,4,"TEXTS.KYC_METAMAP")," "),t.xp6(3),t.Q2q("metadata",'{"customerCode":"',e.userCode,'"}'),t.uIk("clientId",e.traderDefaults.metamapApiClientId)("flowId",e.traderDefaults.metamapApiFlowId)}}function mt(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,pt,5,6,"p",8),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"TEXTS.MONEY_WITHDRAWAL_DESCRIPTION")),t.xp6(2),t.Q6J("ngIf",!e.kycVerified&&e.traderDefaults.tIgnoreKycWdraw&&e.traderDefaults.kycMetaMapVerification)}}function lt(n,o){if(1&n&&(t.TgZ(0,"div",29)(1,"span"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.cancelSuccess.message)}}function _t(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-withdraw-methods",30),t.NdJ("waChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.generatePaymentForm(a))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("paymentTypes",e.paymentTypes)("withdrawAccounts",e.withdrawAccounts)}}function dt(n,o){1&n&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.MONEY_DEPOSIT_OPTIONS")))}function ut(n,o){1&n&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.MONEY_WITHDRAWAL_OPTIONS")))}function ht(n,o){1&n&&(t.TgZ(0,"div",31),t._UZ(1,"div",32),t.qZA())}const ft=function(n){return{link:"LINKS.GO_TO_PERSONAL_INFORMATION",url:n}};function Tt(n,o){if(1&n&&t._UZ(0,"message-box",33),2&n){const e=t.oxw();t.Q6J("action",t.VKq(2,ft,e.kycStatusObj.targetPath))("content",e.kycStatusObj.key)}}const gt=function(n,o,e,i){return{content:n,paramName:o,paramValue:e,paramUrl:i}};function yt(n,o){if(1&n&&t._UZ(0,"message-box",34),2&n){const e=t.oxw();t.Q6J("contentWithUrlParam",t.l5B(1,gt,e.kycStatusObj.key,e.kycStatusObj.paramName,e.kycStatusObj.paramValue,e.kycStatusObj.paramUrl))}}function At(n,o){if(1&n&&t._UZ(0,"message-box",35),2&n){const e=t.oxw();t.Q6J("content",e.kycStatusObj.key)}}function xt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",36)(1,"div",37),t._UZ(2,"i",38),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.TgZ(5,"a",39),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.getidNowUrl())}),t._uU(6),t.ALo(7,"translate"),t.qZA()()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"TEXTS.KYC_IDNOW")," "),t.xp6(3),t.hij(" ",t.lcZ(7,4,"TEXTS.KYC_IDNOW_LINK"),""))}function Zt(n,o){1&n&&t._UZ(0,"app-static-inner-content",40)}function Ct(n,o){1&n&&t._UZ(0,"app-static-inner-content",41)}function St(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"payment-iframe",44),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("payment",e)}}function vt(n,o){1&n&&(t.TgZ(0,"small"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGES.TRANSFER_WITH_BANK_TRANSFER")))}function Ot(n,o){1&n&&(t.TgZ(0,"small"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.WITHDRAW_USING_BANK_TRANSFER")))}function Nt(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.FREE")))}function wt(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.FREE")))}function bt(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.TgZ(2,"span",60),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n){const e=t.oxw(4).$implicit;t.xp6(1),t.hij("/ ",e.processingTime," "),t.xp6(2),t.Oqu(t.lcZ(4,2,"TEXTS.MIN"))}}function Et(n,o){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"TEXTS.NOW"))}function It(n,o){if(1&n&&(t.TgZ(0,"div",54)(1,"div",57)(2,"h5"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"small"),t.YNc(7,Nt,3,3,"ng-container",8),t.YNc(8,wt,3,3,"ng-container",8),t.YNc(9,bt,5,4,"span",58),t.YNc(10,Et,2,3,"ng-template",null,59,t.W1O),t.qZA()()()),2&n){const e=t.MAs(11),i=t.oxw(3).$implicit,a=t.oxw(2);t.xp6(3),t.AsE("",t.lcZ(4,6,"TEXTS.TRANSACTION_FEE")," & ",t.lcZ(5,8,"TEXTS.TRANSACTION_TIME"),""),t.xp6(4),t.Q6J("ngIf",a.isDeposit),t.xp6(1),t.Q6J("ngIf",!a.isDeposit),t.xp6(1),t.Q6J("ngIf",i.processingTime)("ngIfElse",e)}}function Ut(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"payment-icon",53),t.TgZ(2,"div",54)(3,"div",55)(4,"h5"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.YNc(7,vt,3,3,"small",8),t.YNc(8,Ot,3,3,"small",8),t.qZA()(),t.YNc(9,It,12,10,"div",56),t.BQk()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("isDeposit",i.isDeposit)("payment",e)("width",100)("height",33),t.xp6(4),t.Oqu(t.lcZ(6,8,"LINKS.BANK_TRANSFER")),t.xp6(2),t.Q6J("ngIf",i.isDeposit),t.xp6(1),t.Q6J("ngIf",!i.isDeposit),t.xp6(1),t.Q6J("ngIf",i.isDeposit&&i.showBankProcessTimeD||!i.isDeposit&&i.showBankProcessTimeW)}}function qt(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.FREE")))}function Mt(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.FREE")))}function Pt(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.TgZ(2,"span",60),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n){const e=t.oxw(4).$implicit;t.xp6(1),t.hij("/ ",e.processingTime," "),t.xp6(2),t.Oqu(t.lcZ(4,2,"TEXTS.MIN"))}}function Lt(n,o){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.Oqu(t.lcZ(1,1,"TEXTS.NOW"))}function Dt(n,o){if(1&n&&(t.TgZ(0,"div",54)(1,"div",57)(2,"h5"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"small"),t.YNc(7,qt,3,3,"ng-container",8),t.YNc(8,Mt,3,3,"ng-container",8),t.YNc(9,Pt,5,4,"span",58),t.YNc(10,Lt,2,3,"ng-template",null,59,t.W1O),t.qZA()()()),2&n){const e=t.MAs(11),i=t.oxw(3).$implicit,a=t.oxw(2);t.xp6(3),t.AsE("",t.lcZ(4,6,"TEXTS.TRANSACTION_FEE")," & ",t.lcZ(5,8,"TEXTS.TRANSACTION_TIME"),""),t.xp6(4),t.Q6J("ngIf",a.isDeposit),t.xp6(1),t.Q6J("ngIf",!a.isDeposit),t.xp6(1),t.Q6J("ngIf",i.processingTime)("ngIfElse",e)}}function Rt(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"payment-icon",53),t.TgZ(2,"div",54)(3,"div",55)(4,"h5"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"small"),t._uU(8),t.ALo(9,"translate"),t.qZA()()(),t.YNc(10,Dt,12,10,"div",56),t.BQk()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("isDeposit",i.isDeposit)("payment",e)("width",100)("height",33),t.xp6(4),t.Oqu(t.lcZ(6,7,"LINKS.MOBILEBANK")),t.xp6(3),t.Oqu(t.lcZ(9,9,"MESSAGES.TRANSFER_WITH_MOBILEBANK")),t.xp6(2),t.Q6J("ngIf",i.isDeposit&&i.showBankProcessTimeD||!i.isDeposit&&i.showBankProcessTimeW)}}function Ft(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"payment-icon",53),t.BQk()),2&n){const e=t.oxw(3).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("isDeposit",i.isDeposit)("payment",e)("width",100)("height",33)}}function Jt(n,o){if(1&n&&(t.TgZ(0,"div",55)(1,"h5",63),t._uU(2),t.qZA(),t.TgZ(3,"small"),t._uU(4),t.qZA()()),2&n){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description||e.name)}}const D=function(n){return{param0:n}};function Qt(n,o){if(1&n&&(t.TgZ(0,"div",55)(1,"h5",63),t._uU(2),t.qZA(),t.TgZ(3,"small"),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&n){const e=t.oxw(4).$implicit;t.xp6(1),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name),t.xp6(2),t.Oqu(t.xi3(5,3,"TEXTS.USING_3RD",t.VKq(6,D,e.description||e.name)))}}function Yt(n,o){if(1&n&&(t.TgZ(0,"div",55)(1,"h5",63),t._uU(2),t.qZA(),t.TgZ(3,"small"),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA()()),2&n){const e=t.oxw(4).$implicit;t.xp6(1),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name),t.xp6(2),t.AsE("",t.lcZ(5,4,"TEXTS.CARD_TYPES")," ",t.xi3(6,6,"TEXTS.USING_3RD",t.VKq(9,D,e.description||e.name)),"")}}function Wt(n,o){if(1&n&&(t.YNc(0,Qt,6,8,"div",64),t.YNc(1,Yt,7,11,"div",64)),2&n){const e=t.oxw(3).$implicit,i=t.oxw(2);t.Q6J("ngIf","p4f-deposit"!==e.commonCode&&!(457===e.custTransMasterTypeId&&("safirbet"===i.traderName||"vevobahis"===i.traderName||"imajbet"===i.traderName))),t.xp6(1),t.Q6J("ngIf",457===e.custTransMasterTypeId&&("safirbet"===i.traderName||"vevobahis"===i.traderName||"imajbet"===i.traderName))}}function kt(n,o){if(1&n&&(t.TgZ(0,"div",54)(1,"div",48)(2,"h5"),t._uU(3),t.qZA()()()),2&n){const e=t.oxw(3).$implicit;t.xp6(3),t.Oqu(e.bonusText)}}function Bt(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.TRANSACTION_FEE_DEPOSIT")))}function Xt(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.TRANSACTION_FEE_WITHDRAW")))}function jt(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.TgZ(2,"span",60),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n){const e=t.oxw(3).$implicit;t.xp6(1),t.hij("/ ",e.processingTime," "),t.xp6(2),t.Oqu(t.lcZ(4,2,"TEXTS.MIN"))}}function $t(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.hij(" / ",t.lcZ(2,1,"TEXTS.INSTANT"),""))}const Vt=function(){return[1591,1592]};function Kt(n,o){if(1&n&&t.YNc(0,$t,3,3,"ng-container",8),2&n){const e=t.oxw(3).$implicit;t.Q6J("ngIf",t.DdM(1,Vt).includes(e.custTransMasterTypeId))}}function Gt(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Ft,2,4,"ng-container",8),t.TgZ(2,"div",54)(3,"div"),t.YNc(4,Jt,5,3,"div",61),t.YNc(5,Wt,2,2,"ng-template",null,62,t.W1O),t.qZA()(),t.YNc(7,kt,4,1,"div",56),t.TgZ(8,"div",54)(9,"div",57)(10,"h5"),t._uU(11),t.ALo(12,"translate"),t.TgZ(13,"span"),t._uU(14,"&"),t.qZA(),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"small"),t.YNc(18,Bt,3,3,"ng-container",8),t.YNc(19,Xt,3,3,"ng-container",8),t.YNc(20,jt,5,4,"span",58),t.YNc(21,Kt,1,2,"ng-template",null,59,t.W1O),t.qZA()()(),t.BQk()),2&n){const e=t.MAs(6),i=t.MAs(22),a=t.oxw(2).$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!a.noLogo),t.xp6(3),t.Q6J("ngIf","p4f-deposit"===a.commonCode)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",s.showBonusText&&!!a.bonusText),t.xp6(4),t.hij("",t.lcZ(12,10,"TEXTS.TRANSACTION_FEE")," "),t.xp6(4),t.hij(" ",t.lcZ(16,12,"TEXTS.TRANSACTION_TIME"),""),t.xp6(3),t.Q6J("ngIf",s.isDeposit),t.xp6(1),t.Q6J("ngIf",!s.isDeposit),t.xp6(1),t.Q6J("ngIf",a.processingTime)("ngIfElse",i)}}function Ht(n,o){1&n&&(t.TgZ(0,"a",65),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.DEPOSIT")))}const zt=function(n){return{disabled:n}};function te(n,o){if(1&n&&(t.TgZ(0,"a",66),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw(4);t.Q6J("ngClass",t.VKq(4,zt,e.isWithdrawDisabled)),t.xp6(1),t.Oqu(t.lcZ(2,2,"TEXTS.WITHDRAW"))}}function ee(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",45)(1,"div",46),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG((!s.isWithdrawDisabled||s.isDeposit)&&s.generatePaymentForm(a))}),t.TgZ(2,"div",47),t.YNc(3,Ut,10,10,"ng-container",8),t.YNc(4,Rt,11,11,"ng-container",8),t.YNc(5,Gt,23,14,"ng-container",8),t.TgZ(6,"div",48)(7,"h5"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"small"),t._uU(11),t.TgZ(12,"span",49),t._uU(13),t.ALo(14,"number"),t.qZA(),t._uU(15),t.TgZ(16,"span",50),t._uU(17),t.ALo(18,"number"),t.qZA()()(),t.YNc(19,Ht,3,3,"a",51),t.YNc(20,te,3,6,"a",52),t.qZA()()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.uIk("data-payment",e.commonCode||e.name),t.xp6(2),t.Q6J("ngIf","bankTransfer"===e.type),t.xp6(1),t.Q6J("ngIf","mobileBank"===e.type),t.xp6(1),t.Q6J("ngIf","bankTransfer"!==e.type&&"mobileBank"!==e.type),t.xp6(3),t.Oqu(t.lcZ(9,11,"TEXTS.TRANSACTION_LIMIT")),t.xp6(3),t.hij("Min. ",i.currency.currencyCode,": "),t.xp6(2),t.Oqu(t.xi3(14,13,e.minAmount,"1.2-2")),t.xp6(2),t.hij(" / Max. ",i.currency.currencyCode,": "),t.xp6(2),t.Oqu(t.xi3(18,16,e.maxAmount,"1.2-2")),t.xp6(2),t.Q6J("ngIf",i.isDeposit),t.xp6(1),t.Q6J("ngIf",!i.isDeposit)}}function ne(n,o){if(1&n&&(t.TgZ(0,"div",45)(1,"div",67),t._UZ(2,"app-static-inner-content",68),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.uIk("data-payment",e.moduleCode),t.xp6(1),t.Q6J("contentCode",e.moduleContent)}}function oe(n,o){if(1&n&&(t.ynx(0),t.YNc(1,St,2,1,"ng-container",8),t.YNc(2,ee,21,19,"div",43),t.YNc(3,ne,3,2,"div",43),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!e.webModuleId&&e.isIframe),t.xp6(1),t.Q6J("ngIf",!e.webModuleId&&!e.isIframe),t.xp6(1),t.Q6J("ngIf",e.webModuleId&&!e.isIframe)}}function ie(n,o){if(1&n&&(t.ynx(0),t.YNc(1,oe,4,3,"ng-container",42),t.ALo(2,"sort"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,e.paymentTypes,"orderBy"))}}function ae(n,o){1&n&&t._UZ(0,"app-static-inner-content",69)}function se(n,o){1&n&&t._UZ(0,"app-static-inner-content",70)}function re(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"payment-form",71),t.NdJ("getCustomerTransactionsEvent",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.getCustomerTransactions(a))})("deleteWithdrawAccountEmitter",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.onDeleteWithdrawAccount(a))})("changeToOtherPayment",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.generatePaymentForm(a))})("closeResultModalEvent",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.closeResultModal(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("isDeposit",e.isDeposit)("PaymentFormModalAction",e.PaymentFormModal)("paymentTypeList",e.paymentTypes)("selectedPayment",e.selectedPayment)("is-confiscate-on-forfeit-info",e.isConfiscateOnForfeitInfo)("withdrawAccounts",e.withdrawAccounts)}}const ce=function(){return{dismissible:!0}},pe=function(n){return[n]};d.N.map.depositWithdrawMoney;class g{constructor(o,e,i,a,s,r,m,T,b){this.paymentsService=o,this.paymentTypesFactory=e,this.traderService=i,this.promotionsService=a,this.translateService=s,this.userService=r,this.personalAndAccountDetailService=m,this.notificationService=T,this.metamapService=b,this.isDeposit=!1,this.paymentByUrl=null,this.destroyed$=new x.xQ,this.componentName="deposit-withdraw-money",this.loading=!0,this.withdrawAccounts=[],this.hasUpdatedDetail=!0,this.customerInfoMissing=!1,this.PaymentFormModal=new t.vpe,this.PaymentFormModalModalParams=[{dismissible:!0,complete:()=>{this.clearSelectedPayment(),this.getCustomerWithdrawAccounts(),this.paymentsService._clearMethods.next()}}],this.deleteWithdrawAccountModal=new t.vpe,this.deleteWithdrawAccountModalParams=[{dismissible:!0,complete:()=>{this.confirmResult()}}],this.kycStatus=1,this.kycStatusObj=null,this.minimalUser=!1,this.idNowStatusObj=null,this.traderDefaults=null,this.userCode=null,this.showBankProcessTimeD=!0,this.showBankProcessTimeW=!0,this.listenCustomDepositNavigation()}listenCustomDepositNavigation(){this.paymentsService.listenCustomDepositNavigation().pipe((0,u.R)(this.destroyed$)).subscribe(o=>{o&&(this.paymentByUrl=o,this.initDepositWithdrawPage())})}ngOnInit(){this.initDepositWithdrawPage()}initDepositWithdrawPage(){this.isDeposit?this.paymentsService.getCustomerDepositTypes().then(o=>{this.notificationService.clearNotifications(),!o.find(i=>"paymentiq-platform-deposit"===i.commonCode)&&d.N.trader.paymentIqForntApi?this.initPaymentIqMethods(o,"deposit","deposit"):this.paymentTypesFactory.initPaymentType(o,this.isDeposit).then(i=>{if(this.paymentTypes=i,this.paymentByUrl){const a=this.paymentTypes.find(s=>s.commonCode===this.paymentByUrl+"-deposit");this.generatePaymentForm(a)}for(const a of this.paymentTypes)("bankTransfer"===a.type||"mobileBank"===a.type)&&(a.processingTime=a.childPaymentTypes.find(s=>s.processingTime).processingTime);this.loading=!1}).catch(i=>{this.loading=!1})}).catch(o=>{o.forEach(e=>this.notificationService.addNotification("error",e)),this.loading=!1}):(this.personalAndAccountDetailService.getCustomerNeedUpdateStatus().then(o=>{this.hasUpdatedDetail=o,!this.traderService.trader.enableIdnowVerification&&!this.userService.user.kycVerified&&this.setkycStatusObj()}),this.paymentsService.getCustomerWithdrawTypes().then(o=>{this.notificationService.clearNotifications(),!o.find(i=>"paymentiq-platform-withdrawal"===i.commonCode)&&d.N.trader.paymentIqForntApi?this.initPaymentIqMethods(o,"withdraw","withdrawal"):this.paymentTypesFactory.initPaymentType(o,this.isDeposit).then(i=>{if(this.paymentTypes=i,this.paymentByUrl){const a=this.paymentTypes.find(s=>s.commonCode===this.paymentByUrl+"-withdraw");this.generatePaymentForm(a)}for(const a of this.paymentTypes)("bankTransfer"===a.type||"mobileBank"===a.type)&&(a.processingTime=a.childPaymentTypes.find(s=>s.processingTime).processingTime);this.loading=!1}).catch(i=>{this.loading=!1}),this.getConfiscateInfo()}).catch(o=>{o.forEach(e=>this.notificationService.addNotification("error",e)),this.loading=!1}),this.gliVerification=this.traderService.trader.gliUpdateCustVerification,this.tKYCON=this.traderService.trader.tKYCON,this.kycVerified=this.userService.user.kycVerified,this.minimalUser=this.userService.user.minimal,this.tIgnoreKycWdraw=this.traderService.trader.tIgnoreKycWdraw,this.traderDefaults=this.traderService.trader,this.traderDefaults.kycMetaMapVerification&&this.metamapService.init(),this.userCode=this.userService.user.code,this.kycStatus=this.userService.user.kycStatus,this.getCustomerWithdrawAccounts(),this.traderService.trader.enableIdnowVerification||this.userService.user.kycVerified?this.idNowNeeded=this.traderService.trader.enableIdnowVerification&&!this.kycVerified:this.setkycStatusObj()),this.getCustomerTransactions(),this.currency=this.traderService.currentCurrency,this.showBonusText=this.traderService.trader.showBonusTextOnDeposits&&this.isDeposit,this.traderName=d.N.trader.name,this.showBankProcessTimeD=!this.traderService.trader.btProcessTimeIscloseD,this.showBankProcessTimeW=!this.traderService.trader.btProcessTimeIscloseW}initPaymentIqMethods(o,e,i){this.paymentsService.getPaymentIqPaymentTypes(i).then(a=>{this.notificationService.clearNotifications();const s=this.paymentTypesFactory.mapPaymentIqMethods(a.methods,e).map(m=>{const T=o.find(U=>U.commonCode===m.commonCode),b=o.indexOf(T);return-1!==b&&(m.name=o[b].name),m}).filter(m=>o.find(T=>T.commonCode===m.commonCode)),r=o.filter(m=>"paymentiq-platform-deposit"===m.commonCode||"paymentiq-platform-withdrawal"===m.commonCode);o=o.filter(m=>!m.commonCode.startsWith("paymentiq")).concat(s).concat(r),this.paymentTypesFactory.initPaymentType(o,this.isDeposit).then(m=>{this.paymentTypes=m,this.loading=!1}).catch(m=>{this.loading=!1})}).catch(a=>{a.forEach(s=>this.notificationService.addNotification("error",s))})}getCustomerTransactions(o){if(o){if(this.unCompletedTransaction=null,o&&o.transactionAmount){const e=this.isDeposit?"MESSAGES.REMOVE_DEPOSIT_TRANSACTION":"MESSAGES.REMOVE_WITHDRAW_TRANSACTION";this.translateService.get(e,{param0:o.transactionAmount,param1:o.transactionCurrency.currencyCode,param2:o.transactionAmount,param3:o.transactionCurrency.currencyCode}).pipe((0,u.R)(this.destroyed$)).subscribe(i=>{this.cancelSuccess={message:i}})}}else this.paymentsService.getCustomerTransactions().then(e=>{this.notificationService.clearNotifications();const i=this.isDeposit?"D":"W";this.unCompletedTransaction=e.data.find(a=>a.masterCode===i||"W"===i&&"RWWO"===a.masterCode)}).catch(e=>{e.forEach(i=>this.notificationService.addNotification("error",i)),delete this.unCompletedTransaction})}generatePaymentForm(o){this.clearSelectedPayment(),setTimeout(e=>{this.selectedPayment=o,this.PaymentFormModal.emit({action:"modal",params:["open"]})},200)}get isWithdrawDisabled(){var o;return!!this.kycStatusObj||!!this.idNowNeeded||(null===(o=this.traderDefaults)||void 0===o?void 0:o.kycMetaMapVerification)&&!this.kycVerified}setkycStatusObj(){this.kycStatusObj=!1;let o={key:"MESSAGES.CUSTOMER_KYC_NOT_VERIFIED",targetPath:"dashboard/user-info/personal-and-account-detail"},e=!!this.tKYCON&&!this.kycVerified&&!this.tIgnoreKycWdraw;!e||this.hasUpdatedDetail||this.minimalUser?this.hasUpdatedDetail||this.gliVerification||this.minimalUser||this.tIgnoreKycWdraw?e&&!this.minimalUser&&(o.key="TEXTS.DOCUMENT_VALIDATION_INFO",o.paramName="param0",o.paramValue="TEXTS.DOCUMENTS",o.paramUrl="dashboard/user-info/documents",this.kycStatusObj=o):(o.key="MESSAGES.CUSTOMER_INFORMATIONS_SHOULD_BE_UPDATED",this.kycStatusObj=o):this.kycStatusObj=o}getidNowUrl(){this.loading=!0,this.userService.idNowKycStart().then(o=>{window.open(o.url,"_blank")}).finally(()=>{this.loading=!1})}getCustomerWithdrawAccounts(){if(!this.traderService.trader.saveWithdrawAccounts)return!1;const o=setInterval(()=>{typeof this.paymentTypes<"u"&&(clearInterval(o),this.paymentsService.getCustomerWithdrawAccounts().then(e=>{let i,a;this.withdrawAccounts=e;for(const s in this.withdrawAccounts)a=this.paymentTypes.find(r=>{if("bankTransfer"!==r.type)return r.commonCode===this.withdrawAccounts[s].commonCode;i=r.childPaymentTypes.find(m=>m.commonCode===this.withdrawAccounts[s].commonCode)}),this.withdrawAccounts[s].accountTitle=typeof i<"u"?this.withdrawAccounts[s].accountTitle+" - "+i.name:this.withdrawAccounts[s].accountTitle+" - "+a.name}))},700)}closeResultModal(){this.PaymentFormModal.emit({action:"modal",params:["close"]})}clearSelectedPayment(){this.selectedPayment=null}getConfiscateInfo(){this.promotionsService.getPromotions().then(o=>{this.notificationService.clearNotifications(),o&&o.bonuses&&o.bonuses.length&&(this.isConfiscateOnForfeitInfo={isWithdraw:o.bonuses[0].withdraw,isWithdrawBonusAmount:o.bonuses[0].amount,isConfiscateOnForfeit:o.bonuses[0].isConfiscateOnForfeit})}).catch(o=>{o.forEach(e=>this.notificationService.addNotification("error",e))})}onDeleteWithdrawAccount(o){this.removingAccount=o,this.deleteWithdrawAccountModal.emit({action:"modal",params:["open"]})}confirmResult(o){o&&this.paymentsService.deleteCustomerWithdrawMethod(this.removingAccount.customerWithdrawMethodId).then(e=>{this.getCustomerWithdrawAccounts()}).catch(e=>{})}closeWithdrawAccountModal(){this.deleteWithdrawAccountModal.emit({action:"modal",params:["close"]})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}g.\u0275fac=function(o){return new(o||g)(t.Y36(c.sUb),t.Y36(c.LYe),t.Y36(c._W6),t.Y36(c.BfO),t.Y36(h.sK),t.Y36(c.Ye3),t.Y36(c._Wf),t.Y36(c.Pzy),t.Y36(c.pIF))},g.\u0275cmp=t.Xpm({type:g,selectors:[["deposit-withdraw-money"]],inputs:{isDeposit:"isDeposit",paymentByUrl:"paymentByUrl"},decls:35,vars:30,consts:[[1,"pymnt-cntnt"],[1,"dshbrd-mdl","dshbrd-hide-block"],[1,"mdl-hdr"],[1,"inf-hdr"],["aria-hidden","true",1,"fa","fa-credit-card-alt"],["class","inf-title",4,"ngIf"],[1,"mdl-cntnt"],[3,"latestTransaction","cancelTransactionEvent",4,"ngIf"],[4,"ngIf"],[3,"componentName"],["class","card-panel  message-box success animated fadeInDown",4,"ngIf"],[1,"dshbrd-mdl"],["class","progress",4,"ngIf"],[1,"mdl-cntnt","clear"],["type","error","icon","fa fa-exclamation-circle",3,"action","content",4,"ngIf"],["type","error","icon","fa fa-exclamation-circle","data-msg-1","asdasdas",3,"contentWithUrlParam",4,"ngIf"],["type","error","icon","fa fa-exclamation-circle",3,"content",4,"ngIf"],["class","card-panel message-box error",4,"ngIf"],["contentCode","deposit-link",4,"ngIf"],["contentCode","withdraw-link",4,"ngIf"],["contentCode","deposit-bottom",4,"ngIf"],["contentCode","withdraw-bottom",4,"ngIf"],["id","PaymentFormModal","materialize","modal",1,"modal","open","dshbrd-modal","pymnt-mdl",3,"materializeActions","materializeParams"],[3,"isDeposit","PaymentFormModalAction","paymentTypeList","selectedPayment","is-confiscate-on-forfeit-info","withdrawAccounts","getCustomerTransactionsEvent","deleteWithdrawAccountEmitter","changeToOtherPayment","closeResultModalEvent",4,"ngIf"],["id","confirmPromptModal","materialize","modal",1,"modal","modal-sm","dshbrd-modal",3,"materializeActions","materializeParams"],[3,"modalAct","preparedConfirmObj","confirmResult"],[1,"inf-title"],[3,"latestTransaction","cancelTransactionEvent"],[3,"click"],[1,"card-panel","message-box","success","animated","fadeInDown"],[3,"paymentTypes","withdrawAccounts","waChange"],[1,"progress"],[1,"indeterminate"],["type","error","icon","fa fa-exclamation-circle",3,"action","content"],["type","error","icon","fa fa-exclamation-circle","data-msg-1","asdasdas",3,"contentWithUrlParam"],["type","error","icon","fa fa-exclamation-circle",3,"content"],[1,"card-panel","message-box","error"],[1,"icon","left"],[1,"fa","fa-exclamation-circle"],["href","javascript:;",3,"click"],["contentCode","deposit-link"],["contentCode","withdraw-link"],[4,"ngFor","ngForOf"],["class","col s12",4,"ngIf"],[3,"payment"],[1,"col","s12"],[1,"card-panel","bank-card",3,"click"],[1,"flex-container"],[1,"bnk-inf-fld"],["data-test","transaction-limit-min-amount"],["data-test","transaction-limit-max-amount"],["href","javascript:;","class","btn right deposit-btn","data-test","deposit-money-button",4,"ngIf"],["href","javascript:;","class","btn right deposit-btn","data-test","withdraw-money-button",3,"ngClass",4,"ngIf"],[3,"isDeposit","payment","width","height"],[1,"flex-item"],[1,"bnk-inf-fld","bnk-fisrts"],["class","flex-item",4,"ngIf"],[1,"bnk-inf-fld","trans-fee"],[4,"ngIf","ngIfElse"],["now",""],[1,"processing-min"],["class","bnk-inf-fld bnk-fisrts",4,"ngIf","ngIfElse"],["showUsing",""],[3,"title"],["class","bnk-inf-fld bnk-fisrts",4,"ngIf"],["href","javascript:;","data-test","deposit-money-button",1,"btn","right","deposit-btn"],["href","javascript:;","data-test","withdraw-money-button",1,"btn","right","deposit-btn",3,"ngClass"],[1,"card-panel","bank-card","static"],["isContent","true",3,"contentCode"],["contentCode","deposit-bottom"],["contentCode","withdraw-bottom"],[3,"isDeposit","PaymentFormModalAction","paymentTypeList","selectedPayment","is-confiscate-on-forfeit-info","withdrawAccounts","getCustomerTransactionsEvent","deleteWithdrawAccountEmitter","changeToOtherPayment","closeResultModalEvent"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"i",4),t.YNc(5,at,3,3,"span",5),t.YNc(6,st,3,3,"span",5),t.qZA()(),t.TgZ(7,"div",6),t.YNc(8,rt,1,1,"waiting-transactions",7),t.YNc(9,ct,3,3,"p",8),t.YNc(10,mt,5,4,"ng-container",8),t.qZA(),t._UZ(11,"app-notifications",9),t.qZA(),t.YNc(12,lt,3,1,"div",10),t.TgZ(13,"div",11),t.YNc(14,_t,2,2,"ng-container",8),t.TgZ(15,"div",2)(16,"div",3),t._UZ(17,"i",4),t.YNc(18,dt,3,3,"span",5),t.YNc(19,ut,3,3,"span",5),t.qZA()(),t.YNc(20,ht,2,0,"div",12),t.TgZ(21,"div",13),t.YNc(22,Tt,1,4,"message-box",14),t.YNc(23,yt,1,6,"message-box",15),t.YNc(24,At,1,1,"message-box",16),t.YNc(25,xt,8,6,"div",17),t.YNc(26,Zt,1,0,"app-static-inner-content",18),t.YNc(27,Ct,1,0,"app-static-inner-content",19),t.YNc(28,ie,3,4,"ng-container",8),t.qZA()(),t.YNc(29,ae,1,0,"app-static-inner-content",20),t.YNc(30,se,1,0,"app-static-inner-content",21),t.qZA(),t.TgZ(31,"div",22),t.YNc(32,re,1,6,"payment-form",23),t.qZA(),t.TgZ(33,"div",24)(34,"app-confirm-promt",25),t.NdJ("confirmResult",function(a){return e.confirmResult(a)}),t.qZA()()),2&o&&(t.xp6(5),t.Q6J("ngIf",e.isDeposit),t.xp6(1),t.Q6J("ngIf",!e.isDeposit),t.xp6(2),t.Q6J("ngIf",e.unCompletedTransaction),t.xp6(1),t.Q6J("ngIf",e.isDeposit),t.xp6(1),t.Q6J("ngIf",!e.isDeposit),t.xp6(1),t.Q6J("componentName",e.componentName),t.xp6(1),t.Q6J("ngIf",e.cancelSuccess),t.xp6(2),t.Q6J("ngIf",!e.isDeposit&&!!e.withdrawAccounts&&e.withdrawAccounts.length),t.xp6(4),t.Q6J("ngIf",e.isDeposit),t.xp6(1),t.Q6J("ngIf",!e.isDeposit),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(2),t.Q6J("ngIf",!!e.kycStatusObj&&!!e.kycStatusObj.targetPath&&!e.kycStatusObj.paramUrl),t.xp6(1),t.Q6J("ngIf",!!e.kycStatusObj&&!!e.kycStatusObj.paramUrl),t.xp6(1),t.Q6J("ngIf",!!e.kycStatusObj&&!e.kycStatusObj.targetPath&&!e.kycStatusObj.paramUrl),t.xp6(1),t.Q6J("ngIf",e.idNowNeeded),t.xp6(1),t.Q6J("ngIf",e.isDeposit),t.xp6(1),t.Q6J("ngIf",!e.isDeposit),t.xp6(1),t.Q6J("ngIf",e.paymentTypes),t.xp6(1),t.Q6J("ngIf",e.isDeposit),t.xp6(1),t.Q6J("ngIf",!e.isDeposit),t.xp6(1),t.Q6J("materializeActions",e.PaymentFormModal)("materializeParams",e.PaymentFormModalModalParams),t.xp6(1),t.Q6J("ngIf",e.selectedPayment),t.xp6(1),t.Q6J("materializeActions",e.deleteWithdrawAccountModal)("materializeParams",t.VKq(28,pe,t.DdM(27,ce))),t.xp6(1),t.Q6J("modalAct",e.deleteWithdrawAccountModal)("preparedConfirmObj",e.removingAccount))},dependencies:[l.mk,l.sg,l.O5,P.M,V.n,M.W,K.u,L.t,G.m,H.T,z.n,C,S,l.JJ,h.X$,it.U],encapsulation:2});d.N.map.depositMoney;class y{constructor(o){this.route=o,this.destroyed$=new x.xQ}ngOnInit(){this.route.params.pipe((0,u.R)(this.destroyed$)).subscribe(o=>{this.paymentByUrl=o.paymentName})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}y.\u0275fac=function(o){return new(o||y)(t.Y36(Z.gz))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-deposit-money"]],decls:1,vars:2,consts:[[3,"isDeposit","paymentByUrl"]],template:function(o,e){1&o&&t._UZ(0,"deposit-withdraw-money",0),2&o&&t.Q6J("isDeposit",!0)("paymentByUrl",e.paymentByUrl)},dependencies:[g],encapsulation:2});var me=p(98732),le=p(48781),I=p(70710);function _e(n,o){1&n&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.DEACTIVATE")))}function de(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"button",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.deactivatePromotion(a))}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("disabled",e.activateProcess),t.xp6(1),t.hij(" ",t.lcZ(3,2,"TEXTS.DEACTIVATE")," ")}}function ue(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"span",13),t.ALo(3,"csSide"),t.ALo(4,"number"),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"i",14),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"i",14),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"i",14),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"oF"),t.ALo(18,"number"),t.ALo(19,"oF"),t.ALo(20,"number"),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.ALo(26,"oF"),t.ALo(27,"number"),t.ALo(28,"oF"),t.ALo(29,"number"),t.ALo(30,"number"),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.ALo(33,"oF"),t.ALo(34,"number"),t.ALo(35,"oF"),t.ALo(36,"number"),t.ALo(37,"number"),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.ALo(40,"oF"),t.ALo(41,"number"),t.ALo(42,"oF"),t.ALo(43,"number"),t.ALo(44,"number"),t.qZA(),t.TgZ(45,"td"),t._uU(46),t.ALo(47,"oF"),t.ALo(48,"number"),t.ALo(49,"oF"),t.ALo(50,"number"),t.ALo(51,"number"),t.qZA(),t.TgZ(52,"td"),t._uU(53),t.ALo(54,"oF"),t.ALo(55,"number"),t.ALo(56,"oF"),t.ALo(57,"number"),t.ALo(58,"number"),t.qZA(),t.TgZ(59,"td"),t._uU(60),t.ALo(61,"date"),t.qZA(),t.YNc(62,de,4,4,"td",11),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(3);t.xp6(2),t.Q6J("innerHTML",t.Dn7(3,15,t.xi3(4,19,e.amount,"1.2-2"),i.customerCurrency?i.customerCurrency.currencySymbol:"","currency-symbols"),t.oJD),t.xp6(4),t.Oqu(e.promotionName),t.xp6(2),t.Q6J("ngClass",i.isActiveClass(e.isLive)),t.xp6(2),t.Q6J("ngClass",i.isActiveClass(e.isPrelive)),t.xp6(2),t.Q6J("ngClass",i.isActiveClass(e.isVirtual)),t.xp6(2),t.Oqu(e.maxNumberOfEvents),t.xp6(2),t.hij("",t.xi3(17,22,t.xi3(18,25,e.minCouponRate,"1.2-2"),i.ofs.aOFI)?t.xi3(19,28,t.xi3(20,31,e.minCouponRate,"1.2-2"),i.ofs.aOFI):t.xi3(21,34,e.minCouponRate,"1.2-2")," "),t.xp6(7),t.Oqu(e.minNumberOfEvents),t.xp6(2),t.hij("",t.xi3(26,37,t.xi3(27,40,e.minOddAtCouponSb,"1.2-2"),i.ofs.aOFI)?t.xi3(28,43,t.xi3(29,46,e.minOddAtCouponSb,"1.2-2"),i.ofs.aOFI):t.xi3(30,49,e.minOddAtCouponSb,"1.2-2")," "),t.xp6(7),t.hij("",t.xi3(33,52,t.xi3(34,55,e.minOddAtCoupon,"1.2-2"),i.ofs.aOFI)?t.xi3(35,58,t.xi3(36,61,e.minOddAtCoupon,"1.2-2"),i.ofs.aOFI):t.xi3(37,64,e.minOddAtCoupon,"1.2-2")," "),t.xp6(7),t.hij(" ",t.xi3(40,67,t.xi3(41,70,e.maxOddAtCoupon,"1.2-2"),i.ofs.aOFI)?t.xi3(42,73,t.xi3(43,76,e.maxOddAtCoupon,"1.2-2"),i.ofs.aOFI):t.xi3(44,79,e.maxOddAtCoupon,"1.2-2")," "),t.xp6(7),t.hij("",t.xi3(47,82,t.xi3(48,85,e.maxCouponRate,"1.2-2"),i.ofs.aOFI)?t.xi3(49,88,t.xi3(50,91,e.maxCouponRate,"1.2-2"),i.ofs.aOFI):t.xi3(51,94,e.maxCouponRate,"1.2-2")," "),t.xp6(7),t.hij("",t.xi3(54,97,t.xi3(55,100,e.containsRateOverX,"1.2-2"),i.ofs.aOFI)?t.xi3(56,103,t.xi3(57,106,e.containsRateOverX,"1.2-2"),i.ofs.aOFI):t.xi3(58,109,e.containsRateOverX,"1.2-2")," "),t.xp6(7),t.Oqu(t.xi3(61,112,e.expiryDate,"dd-MM-yyyy HH:MM")),t.xp6(2),t.Q6J("ngIf",i.traderDefaults.deactivatePlayerFreebet)}}function he(n,o){if(1&n&&(t.TgZ(0,"table",10)(1,"thead")(2,"tr")(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"th"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"th"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.YNc(45,_e,3,3,"th",11),t.qZA()(),t.TgZ(46,"tbody"),t.YNc(47,ue,63,115,"tr",12),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,16,"TEXTS.AMOUNT")),t.xp6(3),t.Oqu(t.lcZ(8,18,"TEXTS.PROMOTIONS")),t.xp6(3),t.Oqu(t.lcZ(11,20,"TEXTS.LIVE")),t.xp6(3),t.Oqu(t.lcZ(14,22,"TEXTS.SPORT")),t.xp6(3),t.Oqu(t.lcZ(17,24,"TEXTS.VIRTUAL")),t.xp6(3),t.Oqu(t.lcZ(20,26,"TEXTS.PROMOTION_MAXNUMBEROFEVENTS")),t.xp6(3),t.Oqu(t.lcZ(23,28,"TEXTS.PROMOTION_MINCOUPONRATE")),t.xp6(3),t.Oqu(t.lcZ(26,30,"TEXTS.PROMOTION_MINNUMBEROFEVENTS")),t.xp6(3),t.Oqu(t.lcZ(29,32,"TEXTS.PROMOTION_MINODDATCOUPONSB")),t.xp6(3),t.Oqu(t.lcZ(32,34,"TEXTS.PROMOTION_MINODDATCOUPON")),t.xp6(3),t.Oqu(t.lcZ(35,36,"TEXTS.PROMOTION_MAXODDATCOUPON")),t.xp6(3),t.Oqu(t.lcZ(38,38,"TEXTS.PROMOTION_MAXCOUPONRATE")),t.xp6(3),t.Oqu(t.lcZ(41,40,"TEXTS.CONTAIN_RATE_OVER_X")),t.xp6(3),t.Oqu(t.lcZ(44,42,"TEXTS.EXPIRY_DATE")),t.xp6(2),t.Q6J("ngIf",e.traderDefaults.deactivatePlayerFreebet),t.xp6(2),t.Q6J("ngForOf",e.promotions.freebets)}}function fe(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t._UZ(3,"i",5),t.TgZ(4,"span",6),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"div",7)(8,"div",8),t.YNc(9,he,48,44,"table",9),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,2,"TEXTS.FREEBETS")),t.xp6(4),t.Q6J("ngIf",e.promotions.freebets)}}function Te(n,o){1&n&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.DEPOSIT_TO_BONUS")))}function ge(n,o){1&n&&(t.ynx(0),t._UZ(1,"i",16),t.BQk())}function ye(n,o){1&n&&(t.ynx(0),t._UZ(1,"i",17),t.BQk())}function Ae(n,o){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,ge,2,0,"ng-container",11),t.YNc(2,ye,2,0,"ng-container",11),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.depositToBonus),t.xp6(1),t.Q6J("ngIf",!e.depositToBonus)}}function xe(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"span",13),t.ALo(3,"csSide"),t.ALo(4,"number"),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"i",14),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"i",14),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"i",14),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"oF"),t.ALo(18,"number"),t.ALo(19,"oF"),t.ALo(20,"number"),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"td"),t._UZ(23,"span",13),t.ALo(24,"csSide"),t.ALo(25,"number"),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.ALo(30,"oF"),t.ALo(31,"number"),t.ALo(32,"oF"),t.ALo(33,"number"),t.ALo(34,"number"),t.qZA(),t.TgZ(35,"td"),t._uU(36),t.ALo(37,"oF"),t.ALo(38,"number"),t.ALo(39,"oF"),t.ALo(40,"number"),t.ALo(41,"number"),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.ALo(44,"oF"),t.ALo(45,"number"),t.ALo(46,"oF"),t.ALo(47,"number"),t.ALo(48,"number"),t.qZA(),t.TgZ(49,"td"),t._uU(50),t.ALo(51,"oF"),t.ALo(52,"number"),t.ALo(53,"oF"),t.ALo(54,"number"),t.ALo(55,"number"),t.qZA(),t.TgZ(56,"td"),t._uU(57),t.ALo(58,"oF"),t.ALo(59,"number"),t.ALo(60,"oF"),t.ALo(61,"number"),t.ALo(62,"number"),t.qZA(),t.TgZ(63,"td"),t._uU(64),t.ALo(65,"date"),t.qZA(),t.YNc(66,Ae,3,2,"td",11),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(3);t.xp6(2),t.Q6J("innerHTML",t.Dn7(3,16,t.xi3(4,20,e.amount,"1.2-2"),i.customerCurrency?i.customerCurrency.currencySymbol:"","currency-symbols"),t.oJD),t.xp6(4),t.Oqu(e.promotionName),t.xp6(2),t.Q6J("ngClass",i.isActiveClass(e.isLive)),t.xp6(2),t.Q6J("ngClass",i.isActiveClass(e.isPrelive)),t.xp6(2),t.Q6J("ngClass",i.isActiveClass(e.isVirtual)),t.xp6(2),t.Oqu(e.maxNumberOfEvents),t.xp6(2),t.hij("",t.xi3(17,23,t.xi3(18,26,e.minCouponRate,"1.2-2"),i.ofs.aOFI)?t.xi3(19,29,t.xi3(20,32,e.minCouponRate,"1.2-2"),i.ofs.aOFI):t.xi3(21,35,e.minCouponRate,"1.2-2")," "),t.xp6(7),t.Q6J("innerHTML",t.Dn7(24,38,t.xi3(25,42,e.turnoverAmount,"1.2-2"),i.customerCurrency?i.customerCurrency.currencySymbol:"","currency-symbols"),t.oJD),t.xp6(4),t.Oqu(e.minNumberOfEvents),t.xp6(2),t.hij("",t.xi3(30,45,t.xi3(31,48,e.minOddAtCouponSb,"1.2-2"),i.ofs.aOFI)?t.xi3(32,51,t.xi3(33,54,e.minOddAtCouponSb,"1.2-2"),i.ofs.aOFI):t.xi3(34,57,e.minOddAtCouponSb,"1.2-2")," "),t.xp6(7),t.hij("",t.xi3(37,60,t.xi3(38,63,e.minOddAtCoupon,"1.2-2"),i.ofs.aOFI)?t.xi3(39,66,t.xi3(40,69,e.minOddAtCoupon,"1.2-2"),i.ofs.aOFI):t.xi3(41,72,e.minOddAtCoupon,"1.2-2")," "),t.xp6(7),t.hij("",t.xi3(44,75,t.xi3(45,78,e.maxOddAtCoupon,"1.2-2"),i.ofs.aOFI)?t.xi3(46,81,t.xi3(47,84,e.maxOddAtCoupon,"1.2-2"),i.ofs.aOFI):t.xi3(48,87,e.maxOddAtCoupon,"1.2-2")," "),t.xp6(7),t.hij("",t.xi3(51,90,t.xi3(52,93,e.maxCouponRate,"1.2-2"),i.ofs.aOFI)?t.xi3(53,96,t.xi3(54,99,e.maxCouponRate,"1.2-2"),i.ofs.aOFI):t.xi3(55,102,e.maxCouponRate,"1.2-2")," "),t.xp6(7),t.hij("",t.xi3(58,105,t.xi3(59,108,e.containsRateOverX,"1.2-2"),i.ofs.aOFI)?t.xi3(60,111,t.xi3(61,114,e.containsRateOverX,"1.2-2"),i.ofs.aOFI):t.xi3(62,117,e.containsRateOverX,"1.2-2")," "),t.xp6(7),t.Oqu(t.xi3(65,120,e.expiryDate,"dd-MM-yyyy HH:MM")),t.xp6(2),t.Q6J("ngIf",i.traderDefaults.tCB)}}function Ze(n,o){if(1&n&&(t.TgZ(0,"table",10)(1,"thead")(2,"tr")(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"th"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"th"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"th"),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.YNc(48,Te,3,3,"th",11),t.qZA()(),t.TgZ(49,"tbody"),t.YNc(50,xe,67,123,"tr",12),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,17,"TEXTS.AMOUNT")),t.xp6(3),t.Oqu(t.lcZ(8,19,"TEXTS.PROMOTIONS")),t.xp6(3),t.Oqu(t.lcZ(11,21,"TEXTS.LIVE")),t.xp6(3),t.Oqu(t.lcZ(14,23,"TEXTS.SPORT")),t.xp6(3),t.Oqu(t.lcZ(17,25,"TEXTS.VIRTUAL")),t.xp6(3),t.Oqu(t.lcZ(20,27,"TEXTS.PROMOTION_MAXNUMBEROFEVENTS")),t.xp6(3),t.Oqu(t.lcZ(23,29,"TEXTS.PROMOTION_MINCOUPONRATE")),t.xp6(3),t.Oqu(t.lcZ(26,31,"TEXTS.TURNOVER_AMOUNT")),t.xp6(3),t.Oqu(t.lcZ(29,33,"TEXTS.PROMOTION_MINNUMBEROFEVENTS")),t.xp6(3),t.Oqu(t.lcZ(32,35,"TEXTS.PROMOTION_MINODDATCOUPONSB")),t.xp6(3),t.Oqu(t.lcZ(35,37,"TEXTS.PROMOTION_MINODDATCOUPON")),t.xp6(3),t.Oqu(t.lcZ(38,39,"TEXTS.PROMOTION_MAXODDATCOUPON")),t.xp6(3),t.Oqu(t.lcZ(41,41,"TEXTS.PROMOTION_MAXCOUPONRATE")),t.xp6(3),t.Oqu(t.lcZ(44,43,"TEXTS.CONTAIN_RATE_OVER_X")),t.xp6(3),t.Oqu(t.lcZ(47,45,"TEXTS.EXPIRY_DATE")),t.xp6(2),t.Q6J("ngIf",e.traderDefaults.tCB),t.xp6(2),t.Q6J("ngForOf",e.promotions.bonuses)}}function Ce(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t._UZ(3,"i",5),t.TgZ(4,"span",6),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"div",7)(8,"div",8),t.YNc(9,Ze,51,47,"table",9),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,2,"TEXTS.BONUSES")),t.xp6(4),t.Q6J("ngIf",e.promotions.bonuses)}}function Se(n,o){1&n&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.DEPOSIT_TO_BONUS")))}function ve(n,o){1&n&&(t.ynx(0),t._UZ(1,"i",16),t.BQk())}function Oe(n,o){1&n&&(t.ynx(0),t._UZ(1,"i",17),t.BQk())}function Ne(n,o){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,ve,2,0,"ng-container",11),t.YNc(2,Oe,2,0,"ng-container",11),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.bonus.depositToBonus),t.xp6(1),t.Q6J("ngIf",!e.bonus.depositToBonus)}}function we(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"csSide"),t.ALo(4,"floor"),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",20),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"csSide"),t.ALo(13,"floor"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"date"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"date"),t.qZA(),t.YNc(22,Ne,3,2,"td",11),t.TgZ(23,"td")(24,"button",15),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.activateBonus(s))}),t._uU(25),t.ALo(26,"translate"),t.qZA()()()}if(2&n){const e=o.$implicit,i=t.oxw(3);t.xp6(2),t.hij("",t.xi3(3,10,t.xi3(4,13,e.bonusAmount,2),i.customerCurrency.currencySymbol)," "),t.xp6(4),t.Oqu(e.bonus.bonusName),t.xp6(2),t.Oqu(t.xi3(9,16,e.bonus.bonusRate,"1.2-2")),t.xp6(3),t.Oqu(t.xi3(12,19,t.xi3(13,22,e.bonus.maxBonusAmount,2),i.customerCurrency.currencySymbol)),t.xp6(4),t.Oqu(e.bonus.turnoverRate),t.xp6(2),t.Oqu(t.xi3(18,25,e.bonus.expiryDate,"dd-MM-yyyy HH:mm")),t.xp6(3),t.Oqu(t.xi3(21,28,e.expiryDate,"dd-MM-yyyy HH:mm")),t.xp6(2),t.Q6J("ngIf",i.traderDefaults.tCB),t.xp6(2),t.Q6J("disabled",i.activateProcess),t.xp6(1),t.Oqu(t.lcZ(26,31,"TEXTS.ACTIVATE"))}}const be=function(n){return{param0:n}};function Ee(n,o){if(1&n&&(t.TgZ(0,"table",19)(1,"thead")(2,"tr")(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",20),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,Se,3,3,"th",11),t.TgZ(25,"th"),t._uU(26),t.ALo(27,"translate"),t.qZA()()(),t.TgZ(28,"tbody"),t.YNc(29,we,27,33,"tr",12),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,10,"TEXTS.AMOUNT")),t.xp6(3),t.Oqu(t.lcZ(8,12,"TEXTS.PROMOTION_NAME")),t.xp6(3),t.hij("",t.lcZ(11,14,"TEXTS.BONUSRATE"),"(%)"),t.xp6(3),t.Oqu(t.lcZ(14,16,"TEXTS.MAXBONUSWIN")),t.xp6(3),t.Oqu(t.lcZ(17,18,"TEXTS.TURNOVERRATE")),t.xp6(3),t.Oqu(t.xi3(20,20,"TEXTS.BONUS_TRADER_UNTIL",t.VKq(27,be,e.trader.title))),t.xp6(3),t.Oqu(t.lcZ(23,23,"TEXTS.LAST_ACTIVATION_DATE")),t.xp6(2),t.Q6J("ngIf",e.traderDefaults.tCB),t.xp6(2),t.Oqu(t.lcZ(27,25,"TEXTS.ACTIVATE")),t.xp6(3),t.Q6J("ngForOf",e.deactivePromotions)}}function Ie(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t._UZ(3,"i",5),t.TgZ(4,"span",6),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"div",7)(8,"div",8),t.YNc(9,Ee,30,29,"table",18),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,2,"TEXTS.INACTIVE_BONUSES")),t.xp6(4),t.Q6J("ngIf",e.deactivePromotions)}}function Ue(n,o){1&n&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.CONFISCATE_ON_FORFEIT")))}function qe(n,o){1&n&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"TEXTS.DEPOSIT_TO_BONUS")))}function Me(n,o){1&n&&(t.ynx(0),t._UZ(1,"i",16),t.BQk())}function Pe(n,o){1&n&&(t.ynx(0),t._UZ(1,"i",17),t.BQk())}function Le(n,o){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,Me,2,0,"ng-container",11),t.YNc(2,Pe,2,0,"ng-container",11),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.confiscateOnForfeit),t.xp6(1),t.Q6J("ngIf",!e.confiscateOnForfeit)}}function De(n,o){1&n&&(t.ynx(0),t._UZ(1,"i",16),t.BQk())}function Re(n,o){1&n&&(t.ynx(0),t._UZ(1,"i",17),t.BQk())}function Fe(n,o){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,De,2,0,"ng-container",11),t.YNc(2,Re,2,0,"ng-container",11),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.casinoAutomatedBonuses.depositToBonus),t.xp6(1),t.Q6J("ngIf",!e.casinoAutomatedBonuses.depositToBonus)}}function Je(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"span",13),t.ALo(3,"csSide"),t.ALo(4,"floor"),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",20),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"span",13),t.ALo(11,"csSide"),t.ALo(12,"floor"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"date"),t.qZA(),t.YNc(18,Le,3,2,"td",11),t.YNc(19,Fe,3,2,"td",11),t.qZA()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("innerHTML",t.Dn7(3,8,t.xi3(4,12,e.casinoAutomatedBonuses.bonusAmount,2),e.customerCurrency?e.customerCurrency.currencySymbol:"","currency-symbols"),t.oJD),t.xp6(4),t.Oqu(e.casinoAutomatedBonuses.name),t.xp6(2),t.Oqu(e.casinoAutomatedBonuses.turnoverRate),t.xp6(2),t.Q6J("innerHTML",t.Dn7(11,15,t.xi3(12,19,e.casinoAutomatedBonuses.turnoverAmount,2),e.customerCurrency?e.customerCurrency.currencySymbol:"","currency-symbols"),t.oJD),t.xp6(4),t.Oqu(e.casinoAutomatedBonuses.totalTurnover),t.xp6(2),t.Oqu(t.xi3(17,22,e.casinoAutomatedBonuses.expiryDate,"dd-MM-yyyy")),t.xp6(2),t.Q6J("ngIf",e.showConfiscateInfo),t.xp6(1),t.Q6J("ngIf",e.traderDefaults.tCB)}}function Qe(n,o){if(1&n&&(t.TgZ(0,"table",22)(1,"thead")(2,"tr")(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",20),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.YNc(21,Ue,3,3,"th",11),t.YNc(22,qe,3,3,"th",11),t.qZA()(),t.TgZ(23,"tbody"),t.YNc(24,Je,20,25,"tr",11),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,9,"TEXTS.AMOUNT")),t.xp6(3),t.Oqu(t.lcZ(8,11,"TEXTS.PROMOTIONS")),t.xp6(3),t.Oqu(t.lcZ(11,13,"TEXTS.TURNOVERRATE")),t.xp6(3),t.Oqu(t.lcZ(14,15,"TEXTS.TURNOVER_AMOUNT")),t.xp6(3),t.Oqu(t.lcZ(17,17,"TEXTS.TOTAL_TURNOVER")),t.xp6(3),t.Oqu(t.lcZ(20,19,"TEXTS.EXPIRY_DATE")),t.xp6(2),t.Q6J("ngIf",e.showConfiscateInfo),t.xp6(1),t.Q6J("ngIf",e.traderDefaults.tCB),t.xp6(2),t.Q6J("ngIf",e.casinoAutomatedBonuses&&e.casinoAutomatedBonuses.bonusAmount)}}function Ye(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t._UZ(3,"i",5),t.TgZ(4,"span",6),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"div",7)(8,"div",8),t.YNc(9,Qe,25,21,"table",21),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,2,"TEXTS.CASINO_BONUSES")),t.xp6(4),t.Q6J("ngIf",e.promotions.bonuses)}}d.N.map.promotions;class v{constructor(o,e,i,a,s,r){this.promotionsService=o,this.traderService=e,this.userService=i,this.translate=a,this.toastService=s,this.ofs=r,this.promotions={bonuses:[],freebets:[],numberOfAssignedBonuses:null,hasFrozenBonus:!1},this.deactivePromotions=[],this.activateProcess=!1,this.casinoAutomatedBonuses={},this.onlyCasino=!1,this.trader=d.N.trader,this.showConfiscateInfo=!0,this.destroyed$=new x.xQ,this.onlySportsbook=!1}ngOnInit(){this.onlySportsbook="S"===this.traderService.trader.tocs,this.userService.getCustomerCurrency().then(o=>{this.customerCurrency=o}),this.user=this.userService.user,this.onlyCasino=d.N.trader.onlyCasino,this.traderDefaults=this.traderService.trader,this.initData(),"mrbahis"===this.trader.name&&(this.showConfiscateInfo=!1)}initData(){this.onlyCasino||(this.promotionsService.getPromotions().then(o=>{this.promotions=o}),this.promotionsService.getDeactivePromotions().then(o=>{this.deactivePromotions=o}).catch(o=>{this.deactivePromotions=[]})),this.onlySportsbook||this.promotionsService.getCasinoAutomatedBonuses(this.user.code).then(o=>{null!=o&&(this.casinoAutomatedBonuses=o.bonus)})}isActiveClass(o){return o?"stts-W fa-check":"stts-L fa-times"}activateBonus(o){let e=new c.qPv(o.customerAssignedBonusId);this.activateProcess=!0,this.promotionsService.activateBonus(e).then(i=>{this.activateProcess=!1,this.initData(),this.userService.refreshBalance()}).catch(i=>{this.activateProcess=!1;const s=i.responseCodes[0].responseMessage,r=["BONUS_ASSIGN_ERROR","BONUS_NOT_FOUND","TRANSACTION_ERROR","ACTIVE_BONUS_FOUND","WITHDRAW_TIME_LIMIT_ERROR","BONUS_ACTIVATION_IS_DISABLED"].find(m=>m===s)||"GENERAL_ERROR";this.translate.get("MESSAGES."+r).pipe((0,u.R)(this.destroyed$)).subscribe(m=>{this.toastService.error(m)})})}deactivatePromotion(o){this.activateProcess=!0;const e=new c.qPv(o.promotionId);this.promotionsService.deactivatePromotion(e).then(i=>{this.activateProcess=!0,this.initData(),this.userService.refreshBalance(),this.translate.get("MESSAGES.SUCCESS").pipe((0,u.R)(this.destroyed$)).subscribe(a=>{this.toastService.success(a)})}).catch(i=>{this.activateProcess=!1;const a=i.responseCodes[0].responseMessage;this.translate.get("MESSAGES."+a).pipe((0,u.R)(this.destroyed$)).subscribe(s=>{this.toastService.error(s)})})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}v.\u0275fac=function(o){return new(o||v)(t.Y36(c.BfO),t.Y36(c._W6),t.Y36(c.Ye3),t.Y36(h.sK),t.Y36(c.Uwl),t.Y36(c.Wo4))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-promotions"]],decls:5,vars:4,consts:[[1,"bns-dtl"],["class","dshbrd-mdl",4,"ngIf"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],[1,"fa","fa-user-circle-o"],[1,"inf-title"],[1,"mdl-cntnt"],[1,"scrllble-tbl"],["class","striped dshbrd-tbl",4,"ngIf"],[1,"striped","dshbrd-tbl"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"innerHTML"],[1,"fa",3,"ngClass"],[1,"btn",3,"disabled","click"],[1,"fa","fa-check"],[1,"fa","fa-times"],["class","striped dshbrd-tbl inactive-table",4,"ngIf"],[1,"striped","dshbrd-tbl","inactive-table"],[1,"turnOverRate"],["class","striped dshbrd-tbl casinobonus-table",4,"ngIf"],[1,"striped","dshbrd-tbl","casinobonus-table"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t.YNc(1,fe,10,4,"div",1),t.YNc(2,Ce,10,4,"div",1),t.YNc(3,Ie,10,4,"div",1),t.YNc(4,Ye,10,4,"div",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",!e.onlyCasino),t.xp6(1),t.Q6J("ngIf",!e.onlyCasino),t.xp6(1),t.Q6J("ngIf",!e.onlyCasino),t.xp6(1),t.Q6J("ngIf",!e.onlySportsbook))},dependencies:[l.mk,l.sg,l.O5,l.JJ,l.uU,h.X$,me.z,le.o,I.O],encapsulation:2});var We=p(71351),ke=p(79405),Be=p(4888),Xe=p(3201);function je(n,o){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.currencyId),t.xp6(1),t.Oqu(e.currencyName)}}function $e(n,o){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.currencyId),t.xp6(1),t.Oqu(e.currencyName)}}function Ve(n,o){if(1&n&&(t.TgZ(0,"div",24)(1,"div",25),t._UZ(2,"i",26),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"csSide"),t.ALo(7,"number"),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.AsE("",t.lcZ(5,2,"TEXTS.RESULT"),": ",t.xi3(6,4,t.xi3(7,7,e.calculatedeExchange,"1.2-2"),e.calculatedCurrency.currencySymbol)," ")}}d.N.map.exchangeCalculator;class O{constructor(o){this.traderService=o,this.currencyList=[],this.exchangeCalculateModel={from:null,to:null,amount:null}}ngOnInit(){this.traderService.getCurrencyList().then(o=>{this.currencyList=o})}calculateExchange(o){let e=new c.qPv(o.value);this.traderService.calculateCurrency(e).then(i=>{this.calculatedeExchange=i;const a=this.currencyList.findIndex(s=>Number(s.currencyId)===Number(o.value.to));this.calculatedCurrency=this.currencyList[a]})}}function Ke(n,o){1&n&&t._UZ(0,"tckn-verification")}function Ge(n,o){if(1&n&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"csSide"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Oqu(t.xi3(2,1,t.xi3(3,4,e.balance||0,"1.2-2"),i.customerCurrency.currencySymbol))}}O.\u0275fac=function(o){return new(o||O)(t.Y36(c._W6))},O.\u0275cmp=t.Xpm({type:O,selectors:[["exchange-calculator"]],decls:39,vars:24,consts:[[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],["aria-hidden","true",1,"fa","fa-credit-card-alt"],[1,"inf-title"],[1,"mdl-cntnt"],[3,"ngSubmit"],["exchangeCalculateF","ngForm"],[1,"row"],[1,"col","s3"],[1,"select-field"],["name","from","id","from","materialize","material_select","name","from",1,"browser-default",3,"ngModel","ngModelChange"],["from","ngModel"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["name","to","id","to","materialize","material_select","name","to",1,"browser-default",3,"ngModel","ngModelChange"],["to","ngModel"],[1,"input-field"],["type","number","id","amount","name","amount",1,"browser-default",3,"placeholder","ngModel","ngModelChange"],["amount","ngModel"],[1,"btn","w100",3,"disabled"],["aria-hidden","true",1,"fa","fa-calculator"],["class","card-panel message-box info",4,"ngIf"],[3,"value"],[1,"card-panel","message-box","info"],[1,"icon","left"],[1,"fa","fa-info-circle"]],template:function(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"div",5)(8,"form",6,7),t.NdJ("ngSubmit",function(){t.CHM(i);const s=t.MAs(9);return t.KtG(e.calculateExchange(s))}),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"select",11,12),t.NdJ("ngModelChange",function(s){return e.exchangeCalculateModel.from=s}),t.TgZ(15,"option",13),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,je,2,2,"option",14),t.qZA()()(),t.TgZ(19,"div",9)(20,"div",10)(21,"select",15,16),t.NdJ("ngModelChange",function(s){return e.exchangeCalculateModel.to=s}),t.TgZ(23,"option",13),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.YNc(26,$e,2,2,"option",14),t.qZA()()(),t.TgZ(27,"div",9)(28,"div",17)(29,"input",18,19),t.NdJ("ngModelChange",function(s){return e.exchangeCalculateModel.amount=s}),t.ALo(31,"translate"),t.qZA()()(),t.TgZ(32,"div",9)(33,"div",17)(34,"button",20),t._UZ(35,"i",21),t._uU(36),t.ALo(37,"translate"),t.qZA()()()()(),t.YNc(38,Ve,8,10,"div",22),t.qZA()()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,14,"TEXTS.EXCHANGE_CALCULATOR")),t.xp6(8),t.Q6J("ngModel",e.exchangeCalculateModel.from),t.xp6(2),t.Q6J("value",null),t.xp6(1),t.Oqu(t.lcZ(17,16,"FIELDS.SELECT_CURRENCY")),t.xp6(2),t.Q6J("ngForOf",e.currencyList),t.xp6(3),t.Q6J("ngModel",e.exchangeCalculateModel.to),t.xp6(2),t.Q6J("value",null),t.xp6(1),t.Oqu(t.lcZ(25,18,"FIELDS.SELECT_CURRENCY")),t.xp6(2),t.Q6J("ngForOf",e.currencyList),t.xp6(3),t.s9C("placeholder",t.lcZ(31,20,"TEXTS.AMOUNT")),t.Q6J("ngModel",e.exchangeCalculateModel.amount),t.xp6(5),t.Q6J("disabled",!e.exchangeCalculateModel.amount||!e.exchangeCalculateModel.to||!e.exchangeCalculateModel.from),t.xp6(2),t.Oqu(t.lcZ(37,22,"LINKS.CALCULATE")),t.xp6(2),t.Q6J("ngIf",!!e.calculatedeExchange))},dependencies:[l.sg,l.O5,_._Y,_.YN,_.Kr,_.Fj,_.wV,_.EJ,_.JJ,_.JL,_.On,_.F,P.M,l.JJ,h.X$,I.O],encapsulation:2});const He=function(n){return{active:n}};function ze(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",21),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.setSelectedFromAccount(!0,a))}),t.TgZ(2,"i",22),t._uU(3,"radio_button_unchecked"),t.qZA(),t.TgZ(4,"i",23),t._uU(5,"check_circle"),t.qZA(),t.TgZ(6,"span",24),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Ge,4,7,"span",25),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(5,He,e.isSelectedFrom)),t.xp6(6),t.Oqu(t.lcZ(8,3,"TEXTS.ACCTYPE_"+e.thirdPartyAccountType.accountTypeCode.toUpperCase())),t.xp6(2),t.Q6J("ngIf",i.customerCurrency)}}function tn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ze,10,7,"ng-container",0),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isHidden)}}function en(n,o){if(1&n&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"csSide"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Oqu(t.xi3(2,1,t.xi3(3,4,e.balance||0,"1.2-2"),i.customerCurrency.currencySymbol))}}function nn(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",21),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(!a.isSelectedFrom&&s.setSelectedFromAccount(!1,a))}),t.TgZ(2,"i",22),t._uU(3,"radio_button_unchecked"),t.qZA(),t.TgZ(4,"i",23),t._uU(5,"check_circle"),t.qZA(),t.TgZ(6,"span",24),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,en,4,7,"span",25),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngClass",i.toAccountClass(e)),t.xp6(6),t.Oqu(t.lcZ(8,3,"TEXTS.ACCTYPE_"+e.thirdPartyAccountType.accountTypeCode.toUpperCase())),t.xp6(2),t.Q6J("ngIf",i.customerCurrency)}}function on(n,o){if(1&n&&(t.ynx(0),t.YNc(1,nn,10,5,"ng-container",0),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isHidden)}}function an(n,o){if(1&n&&t._UZ(0,"field-messages",31),2&n){const e=t.oxw(3);t.Q6J("field-errors",e.transferForm.controls.transferAmount.errors)("isTransfer",!0)}}function sn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",27)(1,"input",28),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(s.amountModel=a)})("onDebounce",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.formatAgain(a.amountModel))}),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"i",29),t.ALo(4,"translate"),t.YNc(5,an,1,2,"field-messages",30),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.s9C("placeholder",t.lcZ(2,6,"TEXTS.ENTER_AMOUNT")),t.Q6J("ngModel",e.amountModel)("cCode",e.customerCurrency.currencyCode)("formControl",e.transferForm.controls.transferAmount),t.xp6(2),t.s9C("title",t.lcZ(4,8,"TEXTS.CASHOUT")),t.xp6(2),t.Q6J("ngIf",e.transferForm.controls.transferAmount.errors&&e.transferForm.controls.transferAmount.dirty)}}const R=function(n){return{selected:n}};function rn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),t._UZ(4,"i",6),t.TgZ(5,"span",7),t._uU(6),t.ALo(7,"translate"),t.qZA()()(),t.TgZ(8,"div",8)(9,"div",2)(10,"div",9)(11,"div",10)(12,"div",11),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",12),t.YNc(16,tn,2,1,"ng-container",13),t.qZA()(),t.TgZ(17,"div",10)(18,"div",11),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",12),t.YNc(22,on,2,1,"ng-container",13),t.qZA()(),t.TgZ(23,"div",10)(24,"div",14)(25,"form",15),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.makeTransfer())}),t.YNc(26,sn,6,10,"div",16),t.TgZ(27,"div",17)(28,"button",18),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.resetTransferBetweenAccounts())}),t._uU(32),t.ALo(33,"translate"),t.qZA()()()()()()(),t._UZ(34,"app-notifications",20),t.qZA()(),t._UZ(35,"exchange-calculator"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,13,"TEXTS.TRANSFER_BETWEEN_ACCOUNTS")),t.xp6(7),t.hij(" ",t.lcZ(14,15,"TEXTS.FROM_ACCOUNT")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(23,R,e.fromAccount)),t.xp6(1),t.Q6J("ngForOf",e.traderThirdPartyAccounts),t.xp6(3),t.hij(" ",t.lcZ(20,17,"TEXTS.TO_ACCOUNT")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(25,R,e.toAccount)),t.xp6(1),t.Q6J("ngForOf",e.traderThirdPartyAccounts),t.xp6(3),t.Q6J("formGroup",e.transferForm),t.xp6(1),t.Q6J("ngIf",null==e.customerCurrency?null:e.customerCurrency.currencyCode),t.xp6(2),t.Q6J("disabled",!e.fromAccount||!e.toAccount||!e.amountModel||e.formBusy),t.xp6(1),t.hij(" ",t.lcZ(30,19,"TEXTS.TRANSFER")," "),t.xp6(3),t.hij(" ",t.lcZ(33,21,"LINKS.RESET")," "),t.xp6(2),t.Q6J("componentName",e.componentName)}}d.N.map.transfer;class N{constructor(o,e,i,a,s,r,m,T,b,U,ln){this.userService=o,this.transferService=e,this.decimalPipe=i,this.storage=a,this.translateService=s,this.translateFactory=r,this.tcknVerificationService=m,this.fb=T,this.router=b,this.traderService=U,this.notificationService=ln,this.componentName="app-transfer",this.formBusy=!1,this.traderThirdPartyAccounts=[],this.srbAccount=new c.pWu(0),this.currencyOptions={prefix:"",suffix:"",allowZero:!1,allowNegative:!1,align:"left"},this.onlyCasino=!1,this.isCommonBalance=!1,this.isOpenPoker=!1,this.destroyed$=new x.xQ,this.transferForm=T.group({transferAmount:new _.NI(0)})}ngOnInit(){this.onlyCasino=d.N.trader.onlyCasino,this.isOpenPoker="1"===this.traderService.trader.tKGO,this.userService.getCustomerCurrency().then(e=>{this.customerCurrency=e,this.currencyOptions.prefix=this.customerCurrency.currencySymbol});const o=[_.kI.required,_.kI.min(0)];if(this.traderService.trader.tTDC&&o.push((0,c.$Bq)(1)),this.transferForm.controls.transferAmount.setValidators(o),this.pullThirdPartyAccounts(),this.traderName=d.N.trader.name,this.tcknVerificationRequired(),this.isCommonBalance=!!this.traderService.trader.tCB,this.isCommonBalance&&d.N.trader.isSportingTechTrader||this.isCommonBalance&&!this.isOpenPoker){const e=this.translateFactory.currentLang.code;this.router.navigate([e,"dashboard","payments","deposit-money"])}else;}setSelectedFromAccount(o,e){if(e.error)return this.translateService.get("MESSAGES."+e.error.responseKey).pipe((0,u.R)(this.destroyed$)).subscribe(s=>{this.notificationService.addNotification("error",s,this.componentName)}),!1;let i;o&&(()=>{this.fromAccount&&(this.fromAccount=null),this.toAccount&&(this.toAccount=null),this.traderThirdPartyAccounts.forEach((s,r)=>{s.isSelectedFrom=!1,s.isSelectedTo=!1})})(),this.traderThirdPartyAccounts.forEach((s,r)=>{s.thirdPartyAccountTypeId===e.thirdPartyAccountTypeId?(o?s.isSelectedFrom=!0:s.isSelectedTo=!0,i=s):o?s.isSelectedFrom=!1:s.isSelectedTo=!1}),o?this.fromAccount=i:this.toAccount=i}toAccountClass(o){return o.isSelectedTo?"active":this.fromAccount&&(o.thirdPartyAccountTypeId===this.fromAccount.thirdPartyAccountTypeId||9999!==this.fromAccount.thirdPartyAccountTypeId&&9999!==o.thirdPartyAccountTypeId)?"disabled":void 0}getThirdPartyAccount(o){let e=o.thirdPartyAccountType.accountTypeCode;e=e.charAt(0).toUpperCase()+e.substr(1,e.length).toLowerCase(),e=e.replace("-",""),this.transferService["get"+e]().then(i=>{o.balance=i.balance||parseFloat(i)}).catch(i=>{o.error=i,o.balance=0})}pullThirdPartyAccounts(){this.formBusy=!0,this.transferService.getTraderThirdPartyAccounts().then(o=>{this.notificationService.clearNotifications(),this.traderThirdPartyAccounts=o,this.formBusy=!1,this.traderThirdPartyAccounts.forEach(e=>{"klas-poker"===e.thirdPartyAccountType.accountTypeCode&&!this.isOpenPoker&&(e.isHidden=!0),"casino"===e.thirdPartyAccountType.accountTypeCode&&this.isCommonBalance&&(e.isHidden=!0),this.getThirdPartyAccount(e)}),this.userService.refreshBalance().then(e=>{let i=new c.pWu(e);this.traderThirdPartyAccounts.unshift(i)})}).catch(o=>{o.forEach(e=>this.notificationService.addNotification("error",e,this.componentName)),this.formBusy=!1})}makeTransfer(){const o=new c.qPv,e=this.decimalPipe.transform(this.transferForm.controls.transferAmount.value,"1.2-2");if(null===e)return!1;o.identity=this.storage.session.get("tckn")||null,o.requestBody.amount=Number(e.replace(/\,/g,""));const i=9999===this.fromAccount.thirdPartyAccountTypeId?"deposit":"withdraw";let a="deposit"===i?this.toAccount.thirdPartyAccountType.accountTypeCode:this.fromAccount.thirdPartyAccountType.accountTypeCode;"SRB"===a&&"deposit"===i&&(a=this.fromAccount.thirdPartyAccountType.accountTypeCode),a=a.charAt(0).toUpperCase()+a.substr(1,a.length).toLowerCase(),a=a.replace("-",""),this.transferService[i+a](o).then(s=>{this.formBusy=!1,this.traderThirdPartyAccounts.forEach((r,m)=>{r.isSelectedFrom=!1,r.isSelectedTo=!1}),this.fromAccount=null,this.toAccount=null,this.transferForm.controls.transferAmount.setValue(0),this.translateService.get("MESSAGES."+s.responseKey).pipe((0,u.R)(this.destroyed$)).subscribe(r=>{this.notificationService.addNotification("success",r,this.componentName)}),this.pullThirdPartyAccounts()}).catch(s=>{this.formBusy=!1,"CUSTOMER_TRANSFER_NOT_SPECIFIED_RANGE_WITH_PARAMS"===s.error.responseCodes[0].responseKey?this.translateService.get("MESSAGES.CUSTOMER_TRANSFER_NOT_SPECIFIED_RANGE_WITH_PARAMS",{param0:s.error.data.minAmount,param1:s.error.data.maxAmount}).pipe((0,u.R)(this.destroyed$)).subscribe(r=>{this.notificationService.addNotification("error",r,this.componentName)}):this.translateService.get("MESSAGES."+s.error.responseCodes[0].responseKey).pipe((0,u.R)(this.destroyed$)).subscribe(r=>{this.notificationService.addNotification("error",r,this.componentName)})})}tcknVerificationRequired(){this.tcknVerificationService.getTcknTransfer().pipe((0,u.R)(this.destroyed$)).subscribe(o=>{this.tcknTransferRequired=o}),this.tcknVerificationService.checkTcknParams("transfer")}resetTransferBetweenAccounts(){this.transferForm.reset(),this.transferForm.controls.transferAmount.setValue(0),this.traderThirdPartyAccounts.forEach(o=>{o.isSelectedFrom=!1,o.isSelectedTo=!1}),this.toAccount=null,this.fromAccount=null}formatAgain(o){if(typeof o<"u"&&""!==o){const e=String(o),i=this.decimalPipe.transform(e,"1.2-2");this.amountModel=Number(i.replace(/\,/g,""))}}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}N.\u0275fac=function(o){return new(o||N)(t.Y36(c.Ye3),t.Y36(c.ER1),t.Y36(l.JJ),t.Y36(c.SwN),t.Y36(h.sK),t.Y36(c.chr),t.Y36(c.yQZ),t.Y36(_.qu),t.Y36(Z.F0),t.Y36(c._W6),t.Y36(c.Pzy))},N.\u0275cmp=t.Xpm({type:N,selectors:[["app-transfer"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","trnsfr-cntnt",4,"ngIf"],[1,"trnsfr-cntnt"],[1,"dshbrd-mdl"],[1,"mdl-hdr"],[1,"inf-hdr"],["aria-hidden","true",1,"fa","fa-credit-card-alt"],[1,"inf-title"],[1,"mdl-cntnt"],[1,"accnt-lst-wrp"],[1,"transfer-from"],[1,"title"],[1,"account-list",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"payment-wrapper"],[3,"formGroup","ngSubmit"],["class","input-field",4,"ngIf"],[1,"input-field","w100","inline-block"],[1,"btn","transfer-btn","right",3,"disabled"],["type","button",1,"btn","reset-btn","right",3,"click"],[3,"componentName"],[1,"btn",3,"ngClass","click"],[1,"material-icons"],[1,"material-icons","check-circle"],[1,"transfer-name"],["class","money",4,"ngIf"],[1,"money"],[1,"input-field"],["currency-mask","","debounce","700","type","text",1,"browser-default",3,"ngModel","cCode","placeholder","formControl","ngModelChange","onDebounce"],[1,"fa","fa-database","cashout-icon","pg-icons",3,"title"],[3,"field-errors","isTransfer",4,"ngIf"],[3,"field-errors","isTransfer"]],template:function(o,e){1&o&&(t.YNc(0,Ke,1,0,"tckn-verification",0),t.YNc(1,rn,36,27,"div",1)),2&o&&(t.Q6J("ngIf",e.tcknTransferRequired),t.xp6(1),t.Q6J("ngIf",!e.tcknTransferRequired))},dependencies:[l.mk,l.sg,l.O5,_._Y,_.Fj,_.JJ,_.JL,_.oH,_.sg,We.S,ke.g,Be.J,Xe.Y,L.t,O,l.JJ,h.X$,I.O],encapsulation:2});d.N.map.withdrawMoney;class A{constructor(o){this.route=o,this.destroyed$=new x.xQ}ngOnInit(){this.route.params.pipe((0,u.R)(this.destroyed$)).subscribe(o=>{this.paymentByUrl=o.paymentName})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}A.\u0275fac=function(o){return new(o||A)(t.Y36(Z.gz))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-withdraw-money"]],decls:1,vars:1,consts:[[3,"paymentByUrl"]],template:function(o,e){1&o&&t._UZ(0,"deposit-withdraw-money",0),2&o&&t.Q6J("paymentByUrl",e.paymentByUrl)},dependencies:[g],encapsulation:2});const cn=[{path:"deposit-money",component:y,data:{name:"deposit",meta:"dashboard.payments.depositMoney"}},{path:"deposit-money/:paymentName",component:y,data:{name:"deposit",meta:"dashboard.payments.depositMoney"}},{path:"withdraw-money",component:A,data:{name:"withdraw",meta:"dashboard.payments.withdrawMoney"}},{path:"withdraw-money/:paymentName",component:A,data:{name:"withdraw",meta:"dashboard.payments.withdrawMoney"}},{path:"transfer",component:N,data:{name:"transfer",meta:"dashboard.payments.transfer"}},{path:"promotions",component:v,data:{name:"promotions"}},{path:"transaction-result/:paymentName",component:f},{path:"transaction-result/:paymentName/:param2",component:f},{path:"transaction-result/:paymentName/:param2/:param3",component:f},{path:"transaction-result/:paymentName/:param2/:param3/:param4",component:f},{path:"transaction-result/apcopay",component:f},{path:"transaction-result/frbtcstart/:transId",component:f}],pn=Z.Bz.forChild(cn);var mn=p(55028);class w{}w.\u0275fac=function(o){return new(o||w)},w.\u0275mod=t.oAB({type:w}),w.\u0275inj=t.cJS({imports:[l.ez,pn,mn.m]})}}]);