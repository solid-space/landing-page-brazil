import{e as m,W as R,u as k,d as L,a as M,f as P,p as h,s as w,b as F,c as I,g as A,h as D,H as $,D as q,i as T,j as B,m as G,k as U,l as O}from"../chunks/index.36a91d4c.js";import{G as Q,S as j,b as H,a as K,H as V,I as z,J,K as N,j as W,g as X}from"../chunks/index.03b5aaf0.js";import{o as Y}from"../chunks/index.bd6c5768.js";import{l as Z}from"../chunks/helpers.7bffc01f.js";import{l as ee,I as te}from"../chunks/auth.189f5b74.js";import{c as se}from"../chunks/index.a7940b8a.js";import{U as oe}from"../chunks/UserPreferenceMeta.generated.12baa075.js";import{f as d}from"../chunks/loadHelpers.abbaab45.js";import{b as g}from"../chunks/index.922d4a37.js";import{b as re,G as ne}from"../chunks/currencies.bbaf1c4b.js";import{c as ae}from"../chunks/index.5916f5fe.js";import{c as ie}from"../chunks/index.9cf5ab9b.js";import{a as ce}from"../chunks/activeRaceStatus.27df684c.js";import{m as le}from"../chunks/index.07865d9f.js";import{e as ue}from"../chunks/index.5e2a9a64.js";import{w as y}from"../chunks/index.d67a6375.js";import{C as pe}from"../chunks/CurrentAnnouncements.generated.99164eee.js";import{f as me,s as fe,t as he,c as de,p as Se,l as ge}from"../chunks/_api.e3d4a270.js";function ye({client:r}){return async function(o,s,e){try{const t=Y(o,s,e),u=await r.query(t.query,t.variables,t.context).toPromise();return Object.assign(Q(t),{...u,context:{...t.context,requestPolicy:"cache-only"}}),t}catch(t){return m.next({type:"errorExchange",error:(t==null?void 0:t.message)||"Mutation error"}),t}}}const be=({forward:r})=>n=>h(r(n),$(({error:o})=>{const s=o==null?void 0:o.graphQLErrors,e=o==null?void 0:o.networkError;s?s.forEach(({originalError:t})=>{m.next({type:(t==null?void 0:t.errorType)||"errorExchange",error:t})}):e&&m.next({type:"errorExchange",error:e})})),_e=r=>({forward:n})=>o=>h(o,q(s=>{const e=r(s.context.fetchOptions);return h(typeof e.then=="function"?T(e):B(e),G(t=>({...s,context:{...s.context,fetchOptions:t}})))}),n),xe={},Ee=(r,n)=>{const o=()=>U(),s=()=>O(),e=_e(async c=>{const i=o(),l={...c,headers:{...i?{"x-access-token":i}:{},"x-language":s(),...xe}};return Promise.resolve(l)}),u=(()=>[w({forwardSubscription(c){return{subscribe:i=>({unsubscribe:F.subscribe({...c,query:typeof c.query=="string"?c.query:I(c.query)},{error:l=>{i.error(l),m.next({type:"errorExchange",error:l})},...i})})}}})])(),f=A({resolvers:{Subscription:{sportMarket:(c,i)=>({__typename:"SportMarket",marketId:i.marketId})},Query:{sportMarket:(c,i)=>({__typename:"SportMarket",id:i.marketId})}},keys:{UserFlag:()=>null,Balance:()=>null,UserBalance:()=>null,UserRole:()=>null,GameKuratorGame:()=>null,SportGroup:()=>null,SportGroupTemplate:()=>null,SportFixtureDataOutright:()=>null,SportFixtureDataMatch:()=>null,SportFixtureEventStatusStatisticHomeAway:()=>null,SportFixtureEventStatusPeriodScore:()=>null,FixtureSportEventStatusStatistic:()=>null,SportFixtureEventStatusClock:()=>null,SportFixtureEventStatus:()=>null,SportFixtureCompetitor:()=>null,ChatMessageDataText:()=>null,ChatMessageDataRain:()=>null,ChatMessageDataTip:()=>null,RacePosition:()=>null,ChatMessageDataRace:()=>null,ChatMessageDataBot:()=>null,ChatRainUser:()=>null,ChatRain:()=>null,GameKuratorFilter:()=>null,CommunityUser:()=>null,Info:()=>null,InfoCurrency:()=>null,InfoSetting:()=>null,InfoRole:()=>null},schema:D});return R({url:k,fetch:n,requestPolicy:"network-only",exchanges:[L,M,f,...u,e,be,P]})},ve=r=>d({doc:oe,load:r,variables:{}}),Ce=!1,Re=async r=>{var n;try{const o=((n=r.data)==null?void 0:n.session)??{},s=await r.parent(),e={...r,data:{...r.data,...s}},t=Ee(o,e.fetch),u=o.isAuthenticated?ve(e).then(a=>y(a)):Promise.resolve(y(void 0)),f=Promise.all([me(e,{type:re.live}),g?fe(e):Promise.resolve(void 0),g?he(e):Promise.resolve(void 0),de(e,{type:ne.sidebar}),Se(e,{isAuthenticated:o.isAuthenticated}),ge(e)]).then(a=>({fixtureCount:a[0],sportSidebar:a[1],topSportSidebar:a[2],casinoLinks:a[3],promotion:a[4],sponsorshipMenuItems:a[5]})),[S,c,i,p,l,b,_,x,E,v,C]=await Promise.all([u,ae.requestCurrencyMinBets(e),Z(e),se(e),ie.fetch(e),ee({...e,isAuthenticated:o.isAuthenticated}),ce.load(e,{}),le.load({load:e,isAuthenticated:o.isAuthenticated}),d({load:e,doc:te,variables:{}}),f,d({doc:pe,load:e,variables:{}}).then(a=>(a==null?void 0:a.currentAnnouncements)||[])]);return{session:o,minSportBetAmounts:c,restrictedRegionData:i,conversionsRates:l,leftSidebar:v,authResponse:b,activeRacesStatusResponse:_,myBetsResponse:x,userPreferences:S,chatListQuery:p,infoRoles:E,announcementsResponse:C,client:t,query:ye({client:t})}}catch(o){throw console.error("svelte handle error",o),ue(404,"Failed to load")}},Ve=Object.freeze(Object.defineProperty({__proto__:null,load:Re,prerender:Ce},Symbol.toStringTag,{value:"Module"}));function ke(r){let n;const o=r[1].default,s=V(o,r,r[0],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,t){s&&s.m(e,t),n=!0},p(e,[t]){s&&s.p&&(!n||t&1)&&z(s,o,e,e[0],n?N(o,e[0],t,null):J(e[0]),null)},i(e){n||(W(s,e),n=!0)},o(e){X(s,e),n=!1},d(e){s&&s.d(e)}}}function Le(r,n,o){let{$$slots:s={},$$scope:e}=n;return r.$$set=t=>{"$$scope"in t&&o(0,e=t.$$scope)},[e,s]}class ze extends j{constructor(n){super(),H(this,n,Le,ke,K,{})}}export{ze as component,Ve as universal};
