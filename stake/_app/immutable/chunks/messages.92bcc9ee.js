import{T as c,n as m}from"./index.36a91d4c.js";import{m as d,c as y}from"./utils.09bf360d.js";import{n as u}from"./index.bd6c5768.js";import{i as n}from"./index.b135e261.js";const f=600,g=600,w=({windowName:s="Connect With OAuth",url:t})=>{const i=screen.width/2-g/2,o=screen.height/2-f/2,h=`location=0, status=0, width=${g}, height=${f}, top=${o}, left=${i}`;return window.open(t,s,h)},x=async s=>{const{data:t,error:i,eventDispatcher:o,handlers:h}=s;if(i)if(Array.isArray(i)){const r=i[0];r!=null&&r.message&&u.error.open({message:r.message})}else u.error.open({message:i.message});const p=t&&"oauth"in t?t.oauth:t==null?void 0:t.oneTap;let a;if(p){const{result:e}=p;return(e==null?void 0:e.__typename)==="OauthTfa"&&(a="OauthTfa",c("loginToken",e.loginToken),d.auth.open({tab:"login"}),o&&o("oauth",{type:"OauthTfa",loginToken:e.loginToken})),(e==null?void 0:e.__typename)==="UserAuthenticatedSession"&&(a="UserAuthenticatedSession",m.next({type:"authenticate",subtype:"login",userAuthenticatedSession:e}),m.next({type:"firstUserResponse",user:e.session.user}),o&&o("oauth",{type:"UserAuthenticatedSession"}),y()),(e==null?void 0:e.__typename)==="OauthRegister"&&(a="OauthRegister",c.set("identityId",e.identityId),d.registerOauth.open({email:e!=null&&e.requestEmail?"requested":"omit"}),o&&o("oauth",{type:"OauthRegister",identityId:e.identityId})),(e==null?void 0:e.__typename)==="OauthUserExists"&&u.oauthUserExists.open({username:e.user.name}),(e==null?void 0:e.__typename)==="OauthRequest"&&h.OauthRequest(e),a}},b={reVerifyButtonText:n._("Re-verify with"),verifiedButtonText:n._("Verified with"),popupWindowError:n._("Please enable popups to continue with OAuth"),facebook:n._("Facebook"),google:n._("Google"),twitch:n._("Twitch"),line:n._("Line"),buttonText:({buttonText:s,provider:t})=>({id:"{buttonText} {provider}",values:{buttonText:s,provider:t}}),defaultButtonText:n._("Continue with")};export{w as a,b as m,x as o};
