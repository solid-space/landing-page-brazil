import{g as F}from"./fixture.b1018cb8.js";import{g as v}from"./utils.2a204080.js";import{z as y}from"./index.36a91d4c.js";import{w as h}from"./index.d67a6375.js";import{f as D}from"./loadHelpers.abbaab45.js";const I=e=>{var S,k,s,m,p,u,r,n,o,a,c;const i=(e==null?void 0:e.bet)||e,d=((S=i==null?void 0:i.outcomes)==null?void 0:S.length)===1,t=(i==null?void 0:i.outcomes)&&((k=i==null?void 0:i.outcomes)==null?void 0:k[0])&&((m=(s=i==null?void 0:i.outcomes)==null?void 0:s[0])==null?void 0:m.fixture)||((o=(n=(r=(u=(p=i==null?void 0:i.outcomes)==null?void 0:p[0])==null?void 0:u.outcome)==null?void 0:r.market)==null?void 0:n.game)==null?void 0:o.fixture),l=t&&((a=t.data)==null?void 0:a.__typename)==="SportFixtureDataOutright";return{sport:d&&t?t.tournament.category.sport.name:"-",event:d?l?"Outright":t&&F(t.data):`Multi (${(c=i==null?void 0:i.outcomes)==null?void 0:c.length})`,id:e.id,iid:e.iid,user:i==null?void 0:i.user,updatedAt:i==null?void 0:i.createdAt,multiplier:(i==null?void 0:i.potentialMultiplier)||(i==null?void 0:i.odds),amount:i==null?void 0:i.amount,currency:i==null?void 0:i.currency,payoutMultiplier:i!=null&&i.active||i==null?void 0:i.payoutMultiplier,profit:i!=null&&i.active?void 0:(i==null?void 0:i.payout)-(i==null?void 0:i.amount),outcomes:i==null?void 0:i.outcomes,betStatus:v(i)==="tie"?"draw":v(i)!=="win"?"lose":"win"}};function N({queryDocument:e,subscriptionDocument:i,queryVariables:d,getQueryPath:t,getSubscriptionPath:l}){const s=h({data:[],loading:!1}),m=async(u,r={})=>{s.set({data:[],loading:!0});const n=await D({doc:e,variables:{limit:10,...d,...r},load:u}),o=t(n);return s.set({data:o||[],loading:!1}),n};return{store:s,load:m,subscribeToBets:(u,r)=>{const n=r.limit||10;return m(u,{limit:n}),{unsubscribe:y({doc:i},o=>{const a=l(o==null?void 0:o.data);a&&s.update(c=>{const g=c.data.some(f=>(f==null?void 0:f.id)===(a==null?void 0:a.id));return{...c,data:g?c.data:[a,...c.data].slice(0,n)}})})}}}}const A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ActiveRacesStatus"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activeRaces"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"scope"}}]}}]}}]},L={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"subscription",name:{kind:"Name",value:"ActiveRacesStatusSubscription"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"raceStatus"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"scope"}}]}}]}}]},O=N({queryDocument:A,queryVariables:{},subscriptionDocument:L,getQueryPath:e=>(e==null?void 0:e.activeRaces)||[],getSubscriptionPath:e=>e==null?void 0:e.raceStatus});export{O as a,N as c,I as f};
