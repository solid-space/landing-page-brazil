"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[218],{6127:function(e,t,n){n.d(t,{l:function(){return r},r:function(){return a}});var o=n(2669);const a=async e=>{try{const t=await o.O.post("/promotions/opt-in?link="+e);return{ok:!0,data:await t.data}}catch(t){return{ok:!1,error:t.response.data}}},r=async()=>{try{const e=await o.O.get("/promotions/opted-in");return{ok:!0,data:(await e.data).data}}catch(e){return{ok:!1,error:e.response.data}}}},1186:function(e,t,n){n.r(t),n.d(t,{Head:function(){return h}});var o,a=n(1880),r=(n(7207),n(7294)),l=n(2788),i=n(4854),c=n(5553),s=n(4546),d=n(6127),m=n(8891),u=n(6644),p=n(334),g=n(4684),f=n(6346);const _=l.default.div.withConfig({displayName:"promotionDetail__StyledCTAWrapper",componentId:"sc-130yxhl-0"})(["width:100%;padding:1em 0 2.5em;text-align:center;box-sizing:border-box;",""],g.SJ.maxTablet(o||(o=(0,a.Z)(["\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    z-index: 1;\n    padding: 1em;\n\n    button, a {\n      width: 100%;\n    }\n  "])))),y=l.default.div.withConfig({displayName:"promotionDetail__PromotionWrapper",componentId:"sc-130yxhl-1"})(["",",",",","{line-height:1.3;&:nth-child(n + 3){margin-top:0.6em;}}"],f.Fe,f.xD,f.eX);t.default=e=>{var t;let{pageContext:{promotion:n,promotionsSlug:o},location:a}=e;const{lang:l}=(0,p.m)(),{isLoggedIn:g}=(0,r.useContext)(s.V),{0:f,1:h}=(0,r.useState)(!1),{0:v,1:E}=(0,r.useState)(!1),C=(0,m.dD)(null==a?void 0:a.search),k=(0,r.useMemo)((()=>null==C?void 0:C.action),[C]),[w]=(0,u.Z)(["login"]);(0,r.useEffect)((()=>{"optIn"!==k||v||x()}),[k,v]),(0,r.useEffect)((()=>{(async()=>{if(h(!1),g&&n.promotion_identifier){const e=await(0,d.l)();e.ok&&(e.data[n.promotion_identifier]?E(!0):h(!0))}else!g&&n.promotion_identifier&&h(!0)})()}),[g]);(0,r.useEffect)((()=>{(()=>{const e=Math.round(Date.now()/1e3),{activeFrom:t,activeTo:a}=n;"undefined"!=typeof window&&(0!==t&&e<t||0!==a&&e>a)&&(0,i.navigate)("/"+o+"/")})()}),[n]);const x=async()=>{if(g){const e=encodeURIComponent(n.promotion_identifier),t=await(0,d.r)(e);t.ok?(c.toast.success(null==l?void 0:l.promotions.message.optedInSuccessfully),h(!1),E(!0)):t.ok||210!==t.error.messageCode?c.toast.error(null==l?void 0:l.promotions.message.failedOptIn):c.toast.error(null==l?void 0:l.promotions.message.alreadyOptedIn)}else{const e="action=optIn",t=null!=a&&a.search?""+(null==a?void 0:a.pathname)+(null==a?void 0:a.search)+"&"+e:(null==a?void 0:a.pathname)+"?"+e;(0,i.navigate)("/"+w,{state:{redirectURL:(0,m.dl)(t)}})}};return r.createElement(c.Layout,null,r.createElement(y,null,r.createElement(c.ContentWrapper,{small:!0,gap:"1em"},r.createElement(c.PromotionBanner,{promotion:n,promoOptedIn:v}),null===(t=n.flexible_content)||void 0===t?void 0:t.map(((e,t)=>{var n,o;const a="layout-"+e.acf_fc_layout+"-"+t;switch(e.acf_fc_layout){case"header":return r.createElement(c.Title,{key:a,white:!0,level:2,isSpan:"span"===e.header_html_tag_type},e.header_text);case"content":return r.createElement(c.ParsedContent,{key:a,loginSlug:w,content:e.content,forceLogin:e.force_login});case"steps":return r.createElement(c.StepsCircles,{key:a,steps:e.steps});case"leaderboard":return r.createElement(c.Leaderboard,{key:a,content:e.leaderboard});case"games":return r.createElement(c.GamesList,{key:a,mobileNumOfColumns:3,desktopNumOfColumns:4,rows:2,showMore:!0,hideText:!0,forceLogin:e.force_login,games:e.games});case"game_category":return r.createElement(c.GamesCarousel,{key:a,forceLogin:e.force_login,content:{max_items_visible:4,title:null===(n=e.game_category)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.name,game_category:e.game_category}});default:return r.createElement("div",{key:"layout-"+t})}})),r.createElement(_,null,r.createElement(c.If,{condition:f,render:()=>r.createElement(c.Button,{onClick:x},null==l?void 0:l.promotions.action.optIn),renderElse:()=>r.createElement(c.If,{condition:n.cta_logged_in,render:()=>r.createElement(c.LoggedInOutButton,{loggedIn:n.cta_logged_in,loggedOut:n.cta_logged_out,forceLogin:n.force_login}),renderElse:()=>r.createElement(c.Button,{href:n.cta.url.replaceAll("&amp;","&")},n.cta.title)})})),r.createElement(c.TermsAndConditions,{title:n.tandc_title,content:n.tandc}),r.createElement(c.ScrollToTop,null)),r.createElement(c.If,{condition:n.content,render:()=>r.createElement(c.SeoContent,{customContent:n.content})})))};const h=e=>{var t;let{pageContext:{promotion:n}}=e;const o={yoast_head_json:(null==n||null===(t=n.yoast_head)||void 0===t?void 0:t.json)||{}};return r.createElement(c.Seo,{yoast:o,href_langs:null==n?void 0:n.href_langs})}}}]);